,comments_id,line,message,range.start_line,range.end_line,filepath_before,filepath_after,is_gerrit,repository_name,methods_before_count,methods_after_count
0,140fa212_552b55e6,2168.0,"We could also review this closing tab check. That way, the incognito tab is not closed when clicking back button, to be consistent with normal tab logic. WDYT?",,,140fa212_552b55e6_before.java,140fa212_552b55e6_after.java,True,chromium,117,117
1,140fa212_552b55e6,2168.0,"We could also review this closing tab check. That way, the incognito tab is not closed when clicking back button, to be consistent with normal tab logic. WDYT?",,,140fa212_552b55e6_before.java,140fa212_552b55e6_after.java,True,chromium,117,117
2,140fa212_552b55e6,2168.0,"We could also review this closing tab check. That way, the incognito tab is not closed when clicking back button, to be consistent with normal tab logic. WDYT?",,,140fa212_552b55e6_before.java,140fa212_552b55e6_after.java,True,chromium,117,117
3,140fa212_552b55e6,2168.0,"We could also review this closing tab check. That way, the incognito tab is not closed when clicking back button, to be consistent with normal tab logic. WDYT?",,,140fa212_552b55e6_before.java,140fa212_552b55e6_after.java,True,chromium,117,117
4,7fa9753f_9d8ef123,2168.0,I think it is fine to close the Tab.,,,7fa9753f_9d8ef123_before.java,7fa9753f_9d8ef123_after.java,True,chromium,117,117
5,7fa9753f_9d8ef123,2168.0,I think it is fine to close the Tab.,,,7fa9753f_9d8ef123_before.java,7fa9753f_9d8ef123_after.java,True,chromium,117,117
6,7fa9753f_9d8ef123,2168.0,I think it is fine to close the Tab.,,,7fa9753f_9d8ef123_before.java,7fa9753f_9d8ef123_after.java,True,chromium,117,117
7,7fa9753f_9d8ef123,2168.0,I think it is fine to close the Tab.,,,7fa9753f_9d8ef123_before.java,7fa9753f_9d8ef123_after.java,True,chromium,117,117
8,b5ea4309_819de63f,2168.0,Ack,,,b5ea4309_819de63f_before.java,b5ea4309_819de63f_after.java,True,chromium,117,117
9,b5ea4309_819de63f,2168.0,Ack,,,b5ea4309_819de63f_before.java,b5ea4309_819de63f_after.java,True,chromium,117,117
10,b5ea4309_819de63f,2168.0,Ack,,,b5ea4309_819de63f_before.java,b5ea4309_819de63f_after.java,True,chromium,117,117
11,b5ea4309_819de63f,2168.0,Ack,,,b5ea4309_819de63f_before.java,b5ea4309_819de63f_after.java,True,chromium,117,117
12,d593f285_456a0ae4,390.0,"Can we have null check and this check within a single if expression? Otherwise, it's a bit hard to decipher this code.",390.0,390.0,d593f285_456a0ae4_before.java,d593f285_456a0ae4_after.java,True,chromium,35,35
13,d593f285_456a0ae4,390.0,"Can we have null check and this check within a single if expression? Otherwise, it's a bit hard to decipher this code.",390.0,390.0,d593f285_456a0ae4_before.java,d593f285_456a0ae4_after.java,True,chromium,35,35
14,d593f285_456a0ae4,390.0,"Can we have null check and this check within a single if expression? Otherwise, it's a bit hard to decipher this code.",390.0,390.0,d593f285_456a0ae4_before.java,d593f285_456a0ae4_after.java,True,chromium,35,35
15,d593f285_456a0ae4,390.0,"Can we have null check and this check within a single if expression? Otherwise, it's a bit hard to decipher this code.",390.0,390.0,d593f285_456a0ae4_before.java,d593f285_456a0ae4_after.java,True,chromium,35,35
16,d1231ff6_b6647ed7,390.0,Done,390.0,390.0,d1231ff6_b6647ed7_before.java,d1231ff6_b6647ed7_after.java,True,chromium,35,35
17,d1231ff6_b6647ed7,390.0,Done,390.0,390.0,d1231ff6_b6647ed7_before.java,d1231ff6_b6647ed7_after.java,True,chromium,35,35
18,d1231ff6_b6647ed7,390.0,Done,390.0,390.0,d1231ff6_b6647ed7_before.java,d1231ff6_b6647ed7_after.java,True,chromium,35,35
19,d1231ff6_b6647ed7,390.0,Done,390.0,390.0,d1231ff6_b6647ed7_before.java,d1231ff6_b6647ed7_after.java,True,chromium,35,35
20,179536cc_ff230c6a,390.0,Please fix this.,390.0,390.0,179536cc_ff230c6a_before.java,179536cc_ff230c6a_after.java,True,chromium,35,35
21,179536cc_ff230c6a,390.0,Please fix this.,390.0,390.0,179536cc_ff230c6a_before.java,179536cc_ff230c6a_after.java,True,chromium,35,35
22,179536cc_ff230c6a,390.0,Please fix this.,390.0,390.0,179536cc_ff230c6a_before.java,179536cc_ff230c6a_after.java,True,chromium,35,35
23,179536cc_ff230c6a,390.0,Please fix this.,390.0,390.0,179536cc_ff230c6a_before.java,179536cc_ff230c6a_after.java,True,chromium,35,35
24,dc75234d_557459ea,391.0,"Reading through the CL one more time - it looks like mForeignSessions can be null ONLY before updateForeignSessions call in the ctor. In all other cases it is guaranteed to be non-null. With this in mind, does it make sense to move updatePromoState after updateForeignSessions call in ctor (and use assert in this method instead)?",390.0,391.0,dc75234d_557459ea_before.java,dc75234d_557459ea_after.java,True,chromium,35,35
25,dc75234d_557459ea,391.0,"Reading through the CL one more time - it looks like mForeignSessions can be null ONLY before updateForeignSessions call in the ctor. In all other cases it is guaranteed to be non-null. With this in mind, does it make sense to move updatePromoState after updateForeignSessions call in ctor (and use assert in this method instead)?",390.0,391.0,dc75234d_557459ea_before.java,dc75234d_557459ea_after.java,True,chromium,35,35
26,dc75234d_557459ea,391.0,"Reading through the CL one more time - it looks like mForeignSessions can be null ONLY before updateForeignSessions call in the ctor. In all other cases it is guaranteed to be non-null. With this in mind, does it make sense to move updatePromoState after updateForeignSessions call in ctor (and use assert in this method instead)?",390.0,391.0,dc75234d_557459ea_before.java,dc75234d_557459ea_after.java,True,chromium,35,35
27,dc75234d_557459ea,391.0,"Reading through the CL one more time - it looks like mForeignSessions can be null ONLY before updateForeignSessions call in the ctor. In all other cases it is guaranteed to be non-null. With this in mind, does it make sense to move updatePromoState after updateForeignSessions call in ctor (and use assert in this method instead)?",390.0,391.0,dc75234d_557459ea_before.java,dc75234d_557459ea_after.java,True,chromium,35,35
28,4889ba76_7b6f8367,391.0,Done,390.0,391.0,4889ba76_7b6f8367_before.java,4889ba76_7b6f8367_after.java,True,chromium,35,35
29,4889ba76_7b6f8367,391.0,Done,390.0,391.0,4889ba76_7b6f8367_before.java,4889ba76_7b6f8367_after.java,True,chromium,35,35
30,4889ba76_7b6f8367,391.0,Done,390.0,391.0,4889ba76_7b6f8367_before.java,4889ba76_7b6f8367_after.java,True,chromium,35,35
31,4889ba76_7b6f8367,391.0,Done,390.0,391.0,4889ba76_7b6f8367_before.java,4889ba76_7b6f8367_after.java,True,chromium,35,35
32,f6c5c24f_7c98e53b,408.0,"This test is very similar with testShowAndHideTabSwitcher(), can you add a helper function which indicates the only difference is line 384 and line 444?",408.0,408.0,f6c5c24f_7c98e53b_before.java,f6c5c24f_7c98e53b_after.java,True,chromium,23,22
33,f6c5c24f_7c98e53b,408.0,"This test is very similar with testShowAndHideTabSwitcher(), can you add a helper function which indicates the only difference is line 384 and line 444?",408.0,408.0,f6c5c24f_7c98e53b_before.java,f6c5c24f_7c98e53b_after.java,True,chromium,23,22
34,f6c5c24f_7c98e53b,408.0,"This test is very similar with testShowAndHideTabSwitcher(), can you add a helper function which indicates the only difference is line 384 and line 444?",408.0,408.0,f6c5c24f_7c98e53b_before.java,f6c5c24f_7c98e53b_after.java,True,chromium,23,22
35,f6c5c24f_7c98e53b,408.0,"This test is very similar with testShowAndHideTabSwitcher(), can you add a helper function which indicates the only difference is line 384 and line 444?",408.0,408.0,f6c5c24f_7c98e53b_before.java,f6c5c24f_7c98e53b_after.java,True,chromium,23,22
36,3d93e078_481e6b1d,408.0,"Some of assertions are duplicated, so I did more clean up. PTAL. Thanks!",408.0,408.0,3d93e078_481e6b1d_before.java,3d93e078_481e6b1d_after.java,True,chromium,23,22
37,3d93e078_481e6b1d,408.0,"Some of assertions are duplicated, so I did more clean up. PTAL. Thanks!",408.0,408.0,3d93e078_481e6b1d_before.java,3d93e078_481e6b1d_after.java,True,chromium,23,22
38,3d93e078_481e6b1d,408.0,"Some of assertions are duplicated, so I did more clean up. PTAL. Thanks!",408.0,408.0,3d93e078_481e6b1d_before.java,3d93e078_481e6b1d_after.java,True,chromium,23,22
39,3d93e078_481e6b1d,408.0,"Some of assertions are duplicated, so I did more clean up. PTAL. Thanks!",408.0,408.0,3d93e078_481e6b1d_before.java,3d93e078_481e6b1d_after.java,True,chromium,23,22
40,46f115bb_aefedbc2,71.0,There is no sign-in completed here. We record the histogram SigninCompletedAccessPoint for users who completes the sign-in. It's confusing to see this field also called sign-in completed while users simply clicks a button to open the sync consent page.,71.0,71.0,46f115bb_aefedbc2_before.java,46f115bb_aefedbc2_after.java,True,chromium,26,26
41,46f115bb_aefedbc2,71.0,There is no sign-in completed here. We record the histogram SigninCompletedAccessPoint for users who completes the sign-in. It's confusing to see this field also called sign-in completed while users simply clicks a button to open the sync consent page.,71.0,71.0,46f115bb_aefedbc2_before.java,46f115bb_aefedbc2_after.java,True,chromium,26,26
42,46f115bb_aefedbc2,71.0,There is no sign-in completed here. We record the histogram SigninCompletedAccessPoint for users who completes the sign-in. It's confusing to see this field also called sign-in completed while users simply clicks a button to open the sync consent page.,71.0,71.0,46f115bb_aefedbc2_before.java,46f115bb_aefedbc2_after.java,True,chromium,26,26
43,46f115bb_aefedbc2,71.0,There is no sign-in completed here. We record the histogram SigninCompletedAccessPoint for users who completes the sign-in. It's confusing to see this field also called sign-in completed while users simply clicks a button to open the sync consent page.,71.0,71.0,46f115bb_aefedbc2_before.java,46f115bb_aefedbc2_after.java,True,chromium,26,26
44,88e7567e_4ca8fbe4,71.0,Done,71.0,71.0,88e7567e_4ca8fbe4_before.java,88e7567e_4ca8fbe4_after.java,True,chromium,26,26
45,88e7567e_4ca8fbe4,71.0,Done,71.0,71.0,88e7567e_4ca8fbe4_before.java,88e7567e_4ca8fbe4_after.java,True,chromium,26,26
46,88e7567e_4ca8fbe4,71.0,Done,71.0,71.0,88e7567e_4ca8fbe4_before.java,88e7567e_4ca8fbe4_after.java,True,chromium,26,26
47,88e7567e_4ca8fbe4,71.0,Done,71.0,71.0,88e7567e_4ca8fbe4_before.java,88e7567e_4ca8fbe4_after.java,True,chromium,26,26
48,e7047949_4ee57a6c,84.0,"It looks like all of these are no longer needed anymore as they cover more or less the same thing, right? Could you file a bug and add a TODO here to remove them?",82.0,84.0,e7047949_4ee57a6c_before.java,e7047949_4ee57a6c_after.java,True,chromium,26,26
49,e7047949_4ee57a6c,84.0,"It looks like all of these are no longer needed anymore as they cover more or less the same thing, right? Could you file a bug and add a TODO here to remove them?",82.0,84.0,e7047949_4ee57a6c_before.java,e7047949_4ee57a6c_after.java,True,chromium,26,26
50,e7047949_4ee57a6c,84.0,"It looks like all of these are no longer needed anymore as they cover more or less the same thing, right? Could you file a bug and add a TODO here to remove them?",82.0,84.0,e7047949_4ee57a6c_before.java,e7047949_4ee57a6c_after.java,True,chromium,26,26
51,e7047949_4ee57a6c,84.0,"It looks like all of these are no longer needed anymore as they cover more or less the same thing, right? Could you file a bug and add a TODO here to remove them?",82.0,84.0,e7047949_4ee57a6c_before.java,e7047949_4ee57a6c_after.java,True,chromium,26,26
52,01926b59_a9dfaf3a,84.0,Done,82.0,84.0,01926b59_a9dfaf3a_before.java,01926b59_a9dfaf3a_after.java,True,chromium,26,26
53,01926b59_a9dfaf3a,84.0,Done,82.0,84.0,01926b59_a9dfaf3a_before.java,01926b59_a9dfaf3a_after.java,True,chromium,26,26
54,01926b59_a9dfaf3a,84.0,Done,82.0,84.0,01926b59_a9dfaf3a_before.java,01926b59_a9dfaf3a_after.java,True,chromium,26,26
55,01926b59_a9dfaf3a,84.0,Done,82.0,84.0,01926b59_a9dfaf3a_before.java,01926b59_a9dfaf3a_after.java,True,chromium,26,26
56,6395c650_38152d5e,305.0,"Can you just reuse this field for mPromoShownAfterImpressionsHistogramName, somehow I think mImpressionCountName is easier to read and understand for its brevity.",305.0,305.0,6395c650_38152d5e_before.java,6395c650_38152d5e_after.java,True,chromium,26,26
57,6395c650_38152d5e,305.0,"Can you just reuse this field for mPromoShownAfterImpressionsHistogramName, somehow I think mImpressionCountName is easier to read and understand for its brevity.",305.0,305.0,6395c650_38152d5e_before.java,6395c650_38152d5e_after.java,True,chromium,26,26
58,6395c650_38152d5e,305.0,"Can you just reuse this field for mPromoShownAfterImpressionsHistogramName, somehow I think mImpressionCountName is easier to read and understand for its brevity.",305.0,305.0,6395c650_38152d5e_before.java,6395c650_38152d5e_after.java,True,chromium,26,26
59,6395c650_38152d5e,305.0,"Can you just reuse this field for mPromoShownAfterImpressionsHistogramName, somehow I think mImpressionCountName is easier to read and understand for its brevity.",305.0,305.0,6395c650_38152d5e_before.java,6395c650_38152d5e_after.java,True,chromium,26,26
60,3ab64ce2_e0a82ea8,305.0,I have renamed it to mImpressionCountHistogramName,305.0,305.0,3ab64ce2_e0a82ea8_before.java,3ab64ce2_e0a82ea8_after.java,True,chromium,26,26
61,3ab64ce2_e0a82ea8,305.0,I have renamed it to mImpressionCountHistogramName,305.0,305.0,3ab64ce2_e0a82ea8_before.java,3ab64ce2_e0a82ea8_after.java,True,chromium,26,26
62,3ab64ce2_e0a82ea8,305.0,I have renamed it to mImpressionCountHistogramName,305.0,305.0,3ab64ce2_e0a82ea8_before.java,3ab64ce2_e0a82ea8_after.java,True,chromium,26,26
63,3ab64ce2_e0a82ea8,305.0,I have renamed it to mImpressionCountHistogramName,305.0,305.0,3ab64ce2_e0a82ea8_before.java,3ab64ce2_e0a82ea8_after.java,True,chromium,26,26
64,d816f9d1_04997d1d,438.0,"Could we extract a method for this part? Since it repeats in three places. Something like naming it recordShowCountHistogram(histogramName, prefName)?",434.0,438.0,d816f9d1_04997d1d_before.java,d816f9d1_04997d1d_after.java,True,chromium,26,26
65,d816f9d1_04997d1d,438.0,"Could we extract a method for this part? Since it repeats in three places. Something like naming it recordShowCountHistogram(histogramName, prefName)?",434.0,438.0,d816f9d1_04997d1d_before.java,d816f9d1_04997d1d_after.java,True,chromium,26,26
66,d816f9d1_04997d1d,438.0,"Could we extract a method for this part? Since it repeats in three places. Something like naming it recordShowCountHistogram(histogramName, prefName)?",434.0,438.0,d816f9d1_04997d1d_before.java,d816f9d1_04997d1d_after.java,True,chromium,26,26
67,d816f9d1_04997d1d,438.0,"Could we extract a method for this part? Since it repeats in three places. Something like naming it recordShowCountHistogram(histogramName, prefName)?",434.0,438.0,d816f9d1_04997d1d_before.java,d816f9d1_04997d1d_after.java,True,chromium,26,26
68,08e74807_3a1e495e,438.0,Done,434.0,438.0,08e74807_3a1e495e_before.java,08e74807_3a1e495e_after.java,True,chromium,26,26
69,08e74807_3a1e495e,438.0,Done,434.0,438.0,08e74807_3a1e495e_before.java,08e74807_3a1e495e_after.java,True,chromium,26,26
70,08e74807_3a1e495e,438.0,Done,434.0,438.0,08e74807_3a1e495e_before.java,08e74807_3a1e495e_after.java,True,chromium,26,26
71,08e74807_3a1e495e,438.0,Done,434.0,438.0,08e74807_3a1e495e_before.java,08e74807_3a1e495e_after.java,True,chromium,26,26
72,1fae5cd9_cdf164c1,457.0,"Not sure we need to rename this method here. Many methods do the metrics recording and people usually don't announce it in the method name. Though it looks good to change increase to increment, but that doesn't need to stay in this cl.",457.0,457.0,1fae5cd9_cdf164c1_before.java,1fae5cd9_cdf164c1_after.java,True,chromium,26,26
73,1fae5cd9_cdf164c1,457.0,"Not sure we need to rename this method here. Many methods do the metrics recording and people usually don't announce it in the method name. Though it looks good to change increase to increment, but that doesn't need to stay in this cl.",457.0,457.0,1fae5cd9_cdf164c1_before.java,1fae5cd9_cdf164c1_after.java,True,chromium,26,26
74,1fae5cd9_cdf164c1,457.0,"Not sure we need to rename this method here. Many methods do the metrics recording and people usually don't announce it in the method name. Though it looks good to change increase to increment, but that doesn't need to stay in this cl.",457.0,457.0,1fae5cd9_cdf164c1_before.java,1fae5cd9_cdf164c1_after.java,True,chromium,26,26
75,1fae5cd9_cdf164c1,457.0,"Not sure we need to rename this method here. Many methods do the metrics recording and people usually don't announce it in the method name. Though it looks good to change increase to increment, but that doesn't need to stay in this cl.",457.0,457.0,1fae5cd9_cdf164c1_before.java,1fae5cd9_cdf164c1_after.java,True,chromium,26,26
76,8d6a0e44_8134eb07,457.0,Done,457.0,457.0,8d6a0e44_8134eb07_before.java,8d6a0e44_8134eb07_after.java,True,chromium,26,26
77,8d6a0e44_8134eb07,457.0,Done,457.0,457.0,8d6a0e44_8134eb07_before.java,8d6a0e44_8134eb07_after.java,True,chromium,26,26
78,8d6a0e44_8134eb07,457.0,Done,457.0,457.0,8d6a0e44_8134eb07_before.java,8d6a0e44_8134eb07_after.java,True,chromium,26,26
79,8d6a0e44_8134eb07,457.0,Done,457.0,457.0,8d6a0e44_8134eb07_before.java,8d6a0e44_8134eb07_after.java,True,chromium,26,26
80,cdafe899_4215da6d,70.0,"TBH it's hard to understand what is ""continued after impressions""...",70.0,70.0,cdafe899_4215da6d_before.java,cdafe899_4215da6d_after.java,True,chromium,26,26
81,cdafe899_4215da6d,70.0,"TBH it's hard to understand what is ""continued after impressions""...",70.0,70.0,cdafe899_4215da6d_before.java,cdafe899_4215da6d_after.java,True,chromium,26,26
82,cdafe899_4215da6d,70.0,"TBH it's hard to understand what is ""continued after impressions""...",70.0,70.0,cdafe899_4215da6d_before.java,cdafe899_4215da6d_after.java,True,chromium,26,26
83,cdafe899_4215da6d,70.0,"TBH it's hard to understand what is ""continued after impressions""...",70.0,70.0,cdafe899_4215da6d_before.java,cdafe899_4215da6d_after.java,True,chromium,26,26
84,9cef1c1f_332a16af,70.0,"It's fine, sorry for the back and forth. I think continue is better here. I mostly didn't understand what is after impresssions.",70.0,70.0,9cef1c1f_332a16af_before.java,9cef1c1f_332a16af_after.java,True,chromium,26,26
85,9cef1c1f_332a16af,70.0,"It's fine, sorry for the back and forth. I think continue is better here. I mostly didn't understand what is after impresssions.",70.0,70.0,9cef1c1f_332a16af_before.java,9cef1c1f_332a16af_after.java,True,chromium,26,26
86,9cef1c1f_332a16af,70.0,"It's fine, sorry for the back and forth. I think continue is better here. I mostly didn't understand what is after impresssions.",70.0,70.0,9cef1c1f_332a16af_before.java,9cef1c1f_332a16af_after.java,True,chromium,26,26
87,9cef1c1f_332a16af,70.0,"It's fine, sorry for the back and forth. I think continue is better here. I mostly didn't understand what is after impresssions.",70.0,70.0,9cef1c1f_332a16af_before.java,9cef1c1f_332a16af_after.java,True,chromium,26,26
88,b86de429_22edac33,70.0,I have renamed it to mSigninAfterImpressions...,70.0,70.0,b86de429_22edac33_before.java,b86de429_22edac33_after.java,True,chromium,26,26
89,b86de429_22edac33,70.0,I have renamed it to mSigninAfterImpressions...,70.0,70.0,b86de429_22edac33_before.java,b86de429_22edac33_after.java,True,chromium,26,26
90,b86de429_22edac33,70.0,I have renamed it to mSigninAfterImpressions...,70.0,70.0,b86de429_22edac33_before.java,b86de429_22edac33_after.java,True,chromium,26,26
91,b86de429_22edac33,70.0,I have renamed it to mSigninAfterImpressions...,70.0,70.0,b86de429_22edac33_before.java,b86de429_22edac33_after.java,True,chromium,26,26
92,17fd13c1_5c295a5b,239.0,Should we also change the histogram name to Continued..?,239.0,239.0,17fd13c1_5c295a5b_before.java,17fd13c1_5c295a5b_after.java,True,chromium,26,26
93,17fd13c1_5c295a5b,239.0,Should we also change the histogram name to Continued..?,239.0,239.0,17fd13c1_5c295a5b_before.java,17fd13c1_5c295a5b_after.java,True,chromium,26,26
94,17fd13c1_5c295a5b,239.0,Should we also change the histogram name to Continued..?,239.0,239.0,17fd13c1_5c295a5b_before.java,17fd13c1_5c295a5b_after.java,True,chromium,26,26
95,17fd13c1_5c295a5b,239.0,Should we also change the histogram name to Continued..?,239.0,239.0,17fd13c1_5c295a5b_before.java,17fd13c1_5c295a5b_after.java,True,chromium,26,26
96,667f3941_7034dd1b,239.0,Done,239.0,239.0,667f3941_7034dd1b_before.java,667f3941_7034dd1b_after.java,True,chromium,26,26
97,667f3941_7034dd1b,239.0,Done,239.0,239.0,667f3941_7034dd1b_before.java,667f3941_7034dd1b_after.java,True,chromium,26,26
98,667f3941_7034dd1b,239.0,Done,239.0,239.0,667f3941_7034dd1b_before.java,667f3941_7034dd1b_after.java,True,chromium,26,26
99,667f3941_7034dd1b,239.0,Done,239.0,239.0,667f3941_7034dd1b_before.java,667f3941_7034dd1b_after.java,True,chromium,26,26
100,c8efb81a_cf06f7a0,434.0,Why not calling recordShowCount() method here?,431.0,434.0,c8efb81a_cf06f7a0_before.java,c8efb81a_cf06f7a0_after.java,True,chromium,26,26
101,c8efb81a_cf06f7a0,434.0,Why not calling recordShowCount() method here?,431.0,434.0,c8efb81a_cf06f7a0_before.java,c8efb81a_cf06f7a0_after.java,True,chromium,26,26
102,c8efb81a_cf06f7a0,434.0,Why not calling recordShowCount() method here?,431.0,434.0,c8efb81a_cf06f7a0_before.java,c8efb81a_cf06f7a0_after.java,True,chromium,26,26
103,c8efb81a_cf06f7a0,434.0,Why not calling recordShowCount() method here?,431.0,434.0,c8efb81a_cf06f7a0_before.java,c8efb81a_cf06f7a0_after.java,True,chromium,26,26
104,1f4253b4_7d1dc83a,434.0,Done,431.0,434.0,1f4253b4_7d1dc83a_before.java,1f4253b4_7d1dc83a_after.java,True,chromium,26,26
105,1f4253b4_7d1dc83a,434.0,Done,431.0,434.0,1f4253b4_7d1dc83a_before.java,1f4253b4_7d1dc83a_after.java,True,chromium,26,26
106,1f4253b4_7d1dc83a,434.0,Done,431.0,434.0,1f4253b4_7d1dc83a_before.java,1f4253b4_7d1dc83a_after.java,True,chromium,26,26
107,1f4253b4_7d1dc83a,434.0,Done,431.0,434.0,1f4253b4_7d1dc83a_before.java,1f4253b4_7d1dc83a_after.java,True,chromium,26,26
108,21e86f2d_5016db6c,241.0,"I wonder if this will be easier if we can just move ""Other"" to the end and treat it as a suffix, then we don't need to add three fields for everyone, can just decide which suffix to add on the fly according to the access point.",237.0,241.0,21e86f2d_5016db6c_before.java,21e86f2d_5016db6c_after.java,True,chromium,26,26
109,21e86f2d_5016db6c,241.0,"I wonder if this will be easier if we can just move ""Other"" to the end and treat it as a suffix, then we don't need to add three fields for everyone, can just decide which suffix to add on the fly according to the access point.",237.0,241.0,21e86f2d_5016db6c_before.java,21e86f2d_5016db6c_after.java,True,chromium,26,26
110,21e86f2d_5016db6c,241.0,"I wonder if this will be easier if we can just move ""Other"" to the end and treat it as a suffix, then we don't need to add three fields for everyone, can just decide which suffix to add on the fly according to the access point.",237.0,241.0,21e86f2d_5016db6c_before.java,21e86f2d_5016db6c_after.java,True,chromium,26,26
111,21e86f2d_5016db6c,241.0,"I wonder if this will be easier if we can just move ""Other"" to the end and treat it as a suffix, then we don't need to add three fields for everyone, can just decide which suffix to add on the fly according to the access point.",237.0,241.0,21e86f2d_5016db6c_before.java,21e86f2d_5016db6c_after.java,True,chromium,26,26
112,6bed6b34_e7d40185,241.0,"From a coding perspective it would be easier. But I wonder if it would be a bit of anti-pattern to name histograms like that.
+Alex, Can you please comment on this?",237.0,241.0,6bed6b34_e7d40185_before.java,6bed6b34_e7d40185_after.java,True,chromium,26,26
113,6bed6b34_e7d40185,241.0,"From a coding perspective it would be easier. But I wonder if it would be a bit of anti-pattern to name histograms like that.
+Alex, Can you please comment on this?",237.0,241.0,6bed6b34_e7d40185_before.java,6bed6b34_e7d40185_after.java,True,chromium,26,26
114,6bed6b34_e7d40185,241.0,"From a coding perspective it would be easier. But I wonder if it would be a bit of anti-pattern to name histograms like that.
+Alex, Can you please comment on this?",237.0,241.0,6bed6b34_e7d40185_before.java,6bed6b34_e7d40185_after.java,True,chromium,26,26
115,6bed6b34_e7d40185,241.0,"From a coding perspective it would be easier. But I wonder if it would be a bit of anti-pattern to name histograms like that.
+Alex, Can you please comment on this?",237.0,241.0,6bed6b34_e7d40185_before.java,6bed6b34_e7d40185_after.java,True,chromium,26,26
116,1d768ddf_13812942,74.0,"I don't agree with this approach of moving this pref handling here. The design of this package is to let account picker MVC handle the domain logic while the delegate is mostly a simple executor to perform the tasks like sign-in, add account etc. It shouldn't contain such side effects. The domain logic need to stay inside account picker. 

This makes the things hard to understand and also diminish the protection degree of the tests. This logic till now is tested as part of integration tests in account picker bottom sheet from users' perspective. Moving it here we can just test the state change, that's much shallower and cannot protect us against regression as much as before.",73.0,74.0,1d768ddf_13812942_before.java,1d768ddf_13812942_after.java,True,chromium,4,6
117,1d768ddf_13812942,74.0,"I don't agree with this approach of moving this pref handling here. The design of this package is to let account picker MVC handle the domain logic while the delegate is mostly a simple executor to perform the tasks like sign-in, add account etc. It shouldn't contain such side effects. The domain logic need to stay inside account picker. 

This makes the things hard to understand and also diminish the protection degree of the tests. This logic till now is tested as part of integration tests in account picker bottom sheet from users' perspective. Moving it here we can just test the state change, that's much shallower and cannot protect us against regression as much as before.",73.0,74.0,1d768ddf_13812942_before.java,1d768ddf_13812942_after.java,True,chromium,4,6
118,1d768ddf_13812942,74.0,"I don't agree with this approach of moving this pref handling here. The design of this package is to let account picker MVC handle the domain logic while the delegate is mostly a simple executor to perform the tasks like sign-in, add account etc. It shouldn't contain such side effects. The domain logic need to stay inside account picker. 

This makes the things hard to understand and also diminish the protection degree of the tests. This logic till now is tested as part of integration tests in account picker bottom sheet from users' perspective. Moving it here we can just test the state change, that's much shallower and cannot protect us against regression as much as before.",73.0,74.0,1d768ddf_13812942_before.java,1d768ddf_13812942_after.java,True,chromium,4,6
119,1d768ddf_13812942,74.0,"I don't agree with this approach of moving this pref handling here. The design of this package is to let account picker MVC handle the domain logic while the delegate is mostly a simple executor to perform the tasks like sign-in, add account etc. It shouldn't contain such side effects. The domain logic need to stay inside account picker. 

This makes the things hard to understand and also diminish the protection degree of the tests. This logic till now is tested as part of integration tests in account picker bottom sheet from users' perspective. Moving it here we can just test the state change, that's much shallower and cannot protect us against regression as much as before.",73.0,74.0,1d768ddf_13812942_before.java,1d768ddf_13812942_after.java,True,chromium,4,6
120,865dad0b_41139c64,74.0,"The way I think of this delegate is it takes care of the heavy work, the non-UI parts, and that's specific to each use case.
Right now AccountPickerDelegateImpl is heavily mixed with the WebSigninBridge stuff, it would be a mess to just add a bunch of `if (accessPoint == SEND_TAB_TO_SELF)` in there. So I think the best approach is to
- Customize the strings inside the UI classes depending on the accessPoint enum
- Customize the actual behavior by introducing a different implementation of the delegate. And this includes the pref handling.

This makes the split between the two use cases very clear instead of having a bunch of ifs everywhere.",73.0,74.0,865dad0b_41139c64_before.java,865dad0b_41139c64_after.java,True,chromium,4,6
121,865dad0b_41139c64,74.0,"The way I think of this delegate is it takes care of the heavy work, the non-UI parts, and that's specific to each use case.
Right now AccountPickerDelegateImpl is heavily mixed with the WebSigninBridge stuff, it would be a mess to just add a bunch of `if (accessPoint == SEND_TAB_TO_SELF)` in there. So I think the best approach is to
- Customize the strings inside the UI classes depending on the accessPoint enum
- Customize the actual behavior by introducing a different implementation of the delegate. And this includes the pref handling.

This makes the split between the two use cases very clear instead of having a bunch of ifs everywhere.",73.0,74.0,865dad0b_41139c64_before.java,865dad0b_41139c64_after.java,True,chromium,4,6
122,865dad0b_41139c64,74.0,"The way I think of this delegate is it takes care of the heavy work, the non-UI parts, and that's specific to each use case.
Right now AccountPickerDelegateImpl is heavily mixed with the WebSigninBridge stuff, it would be a mess to just add a bunch of `if (accessPoint == SEND_TAB_TO_SELF)` in there. So I think the best approach is to
- Customize the strings inside the UI classes depending on the accessPoint enum
- Customize the actual behavior by introducing a different implementation of the delegate. And this includes the pref handling.

This makes the split between the two use cases very clear instead of having a bunch of ifs everywhere.",73.0,74.0,865dad0b_41139c64_before.java,865dad0b_41139c64_after.java,True,chromium,4,6
123,865dad0b_41139c64,74.0,"The way I think of this delegate is it takes care of the heavy work, the non-UI parts, and that's specific to each use case.
Right now AccountPickerDelegateImpl is heavily mixed with the WebSigninBridge stuff, it would be a mess to just add a bunch of `if (accessPoint == SEND_TAB_TO_SELF)` in there. So I think the best approach is to
- Customize the strings inside the UI classes depending on the accessPoint enum
- Customize the actual behavior by introducing a different implementation of the delegate. And this includes the pref handling.

This makes the split between the two use cases very clear instead of having a bunch of ifs everywhere.",73.0,74.0,865dad0b_41139c64_before.java,865dad0b_41139c64_after.java,True,chromium,4,6
124,83e493e5_c1b3f5c4,74.0,"> * Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 
Good catch

Let's do if-s then. Do we agree on having a separate delegate? (I don't see it explicitly stated in the thread)",73.0,74.0,83e493e5_c1b3f5c4_before.java,83e493e5_c1b3f5c4_after.java,True,chromium,4,6
125,83e493e5_c1b3f5c4,74.0,"> * Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 
Good catch

Let's do if-s then. Do we agree on having a separate delegate? (I don't see it explicitly stated in the thread)",73.0,74.0,83e493e5_c1b3f5c4_before.java,83e493e5_c1b3f5c4_after.java,True,chromium,4,6
126,83e493e5_c1b3f5c4,74.0,"> * Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 
Good catch

Let's do if-s then. Do we agree on having a separate delegate? (I don't see it explicitly stated in the thread)",73.0,74.0,83e493e5_c1b3f5c4_before.java,83e493e5_c1b3f5c4_after.java,True,chromium,4,6
127,83e493e5_c1b3f5c4,74.0,"> * Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 
Good catch

Let's do if-s then. Do we agree on having a separate delegate? (I don't see it explicitly stated in the thread)",73.0,74.0,83e493e5_c1b3f5c4_before.java,83e493e5_c1b3f5c4_after.java,True,chromium,4,6
128,9368acf3_6d7eac04,74.0,"Thanks for the interesting discussion, let me try to give a few more counterarguments. 
- This delegate is inside the package, it has AccountPicker in its name, I think it's very tied to this UI anyways, so I don't think it would hurt. I'd even propose renaming destroy() back to onDismissed() to make the relation clearer.
- I don't think this counter is ""domain logic"" to this component from the moment we have a use case which doesn't care about it. It's something enforced externally.

IIUC your proposal would be
- decide the string with if's on accessPoint
- decide whether to increment/clear the counter with if's on accessPoint
- still have 2 separate delegates
If we have to go with that, I'd at least
- Rename the counter APIs so they are specific to the existing use case, maybe add ""web-signin"" to the name. Edit: Actually this should be done regardless.
- Try to keep all the if checks in a single layer, so the uglyness is localized. Edit: I don't think that's possible.

Another possibility that just came to mind: The coordinator exposes a listener with
- onDismissed()
- onSigninAttempted()
A listener incrementing/clearing the counter then gets created here, which is nice because this is the same layer that reads the counter.
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/signin/SigninBridge.java;l=115;drc=75960512ffa1b248d35c72329e90b1b399082c07
What I don't like too much about this approach is we'd have 3 forms of customization: the enum for the strings, the delegate and the listener",73.0,74.0,9368acf3_6d7eac04_before.java,9368acf3_6d7eac04_after.java,True,chromium,4,6
129,9368acf3_6d7eac04,74.0,"Thanks for the interesting discussion, let me try to give a few more counterarguments. 
- This delegate is inside the package, it has AccountPicker in its name, I think it's very tied to this UI anyways, so I don't think it would hurt. I'd even propose renaming destroy() back to onDismissed() to make the relation clearer.
- I don't think this counter is ""domain logic"" to this component from the moment we have a use case which doesn't care about it. It's something enforced externally.

IIUC your proposal would be
- decide the string with if's on accessPoint
- decide whether to increment/clear the counter with if's on accessPoint
- still have 2 separate delegates
If we have to go with that, I'd at least
- Rename the counter APIs so they are specific to the existing use case, maybe add ""web-signin"" to the name. Edit: Actually this should be done regardless.
- Try to keep all the if checks in a single layer, so the uglyness is localized. Edit: I don't think that's possible.

Another possibility that just came to mind: The coordinator exposes a listener with
- onDismissed()
- onSigninAttempted()
A listener incrementing/clearing the counter then gets created here, which is nice because this is the same layer that reads the counter.
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/signin/SigninBridge.java;l=115;drc=75960512ffa1b248d35c72329e90b1b399082c07
What I don't like too much about this approach is we'd have 3 forms of customization: the enum for the strings, the delegate and the listener",73.0,74.0,9368acf3_6d7eac04_before.java,9368acf3_6d7eac04_after.java,True,chromium,4,6
130,9368acf3_6d7eac04,74.0,"Thanks for the interesting discussion, let me try to give a few more counterarguments. 
- This delegate is inside the package, it has AccountPicker in its name, I think it's very tied to this UI anyways, so I don't think it would hurt. I'd even propose renaming destroy() back to onDismissed() to make the relation clearer.
- I don't think this counter is ""domain logic"" to this component from the moment we have a use case which doesn't care about it. It's something enforced externally.

IIUC your proposal would be
- decide the string with if's on accessPoint
- decide whether to increment/clear the counter with if's on accessPoint
- still have 2 separate delegates
If we have to go with that, I'd at least
- Rename the counter APIs so they are specific to the existing use case, maybe add ""web-signin"" to the name. Edit: Actually this should be done regardless.
- Try to keep all the if checks in a single layer, so the uglyness is localized. Edit: I don't think that's possible.

Another possibility that just came to mind: The coordinator exposes a listener with
- onDismissed()
- onSigninAttempted()
A listener incrementing/clearing the counter then gets created here, which is nice because this is the same layer that reads the counter.
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/signin/SigninBridge.java;l=115;drc=75960512ffa1b248d35c72329e90b1b399082c07
What I don't like too much about this approach is we'd have 3 forms of customization: the enum for the strings, the delegate and the listener",73.0,74.0,9368acf3_6d7eac04_before.java,9368acf3_6d7eac04_after.java,True,chromium,4,6
131,9368acf3_6d7eac04,74.0,"Thanks for the interesting discussion, let me try to give a few more counterarguments. 
- This delegate is inside the package, it has AccountPicker in its name, I think it's very tied to this UI anyways, so I don't think it would hurt. I'd even propose renaming destroy() back to onDismissed() to make the relation clearer.
- I don't think this counter is ""domain logic"" to this component from the moment we have a use case which doesn't care about it. It's something enforced externally.

IIUC your proposal would be
- decide the string with if's on accessPoint
- decide whether to increment/clear the counter with if's on accessPoint
- still have 2 separate delegates
If we have to go with that, I'd at least
- Rename the counter APIs so they are specific to the existing use case, maybe add ""web-signin"" to the name. Edit: Actually this should be done regardless.
- Try to keep all the if checks in a single layer, so the uglyness is localized. Edit: I don't think that's possible.

Another possibility that just came to mind: The coordinator exposes a listener with
- onDismissed()
- onSigninAttempted()
A listener incrementing/clearing the counter then gets created here, which is nice because this is the same layer that reads the counter.
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/signin/SigninBridge.java;l=115;drc=75960512ffa1b248d35c72329e90b1b399082c07
What I don't like too much about this approach is we'd have 3 forms of customization: the enum for the strings, the delegate and the listener",73.0,74.0,9368acf3_6d7eac04_before.java,9368acf3_6d7eac04_after.java,True,chromium,4,6
132,b61475cc_5788781d,74.0,"I think it makes sense to have a separate delegate impl. Anyway the delegate is just a plugin, it's totally decoupled from the mvc.",73.0,74.0,b61475cc_5788781d_before.java,b61475cc_5788781d_after.java,True,chromium,4,6
133,b61475cc_5788781d,74.0,"I think it makes sense to have a separate delegate impl. Anyway the delegate is just a plugin, it's totally decoupled from the mvc.",73.0,74.0,b61475cc_5788781d_before.java,b61475cc_5788781d_after.java,True,chromium,4,6
134,b61475cc_5788781d,74.0,"I think it makes sense to have a separate delegate impl. Anyway the delegate is just a plugin, it's totally decoupled from the mvc.",73.0,74.0,b61475cc_5788781d_before.java,b61475cc_5788781d_after.java,True,chromium,4,6
135,b61475cc_5788781d,74.0,"I think it makes sense to have a separate delegate impl. Anyway the delegate is just a plugin, it's totally decoupled from the mvc.",73.0,74.0,b61475cc_5788781d_before.java,b61475cc_5788781d_after.java,True,chromium,4,6
136,757e1853_227d5155,74.0,"I understand your use case, but the delegate is just an executor, like an API to communicate with the world outside without modifying the account picker's state.
It does heavy work with the WebSigninBridge, that's the idea, we hide the communication with the outside world behind the API and let the MVC handle the UI logic. 

It's like when you create an app with an API sendEmail(), sendEmail() also will do heavy work by connecting SMTP, retry network etc, that doesn't mean you should also stuff your domain logic/internal state change inside as well. In account picker, when we say ""sign-in"" then it should just sign in and that's all. I don't expect it to erase the bottom sheet dismissal data. That's quite anti-pattern to mix all this up.",73.0,74.0,757e1853_227d5155_before.java,757e1853_227d5155_after.java,True,chromium,4,6
137,757e1853_227d5155,74.0,"I understand your use case, but the delegate is just an executor, like an API to communicate with the world outside without modifying the account picker's state.
It does heavy work with the WebSigninBridge, that's the idea, we hide the communication with the outside world behind the API and let the MVC handle the UI logic. 

It's like when you create an app with an API sendEmail(), sendEmail() also will do heavy work by connecting SMTP, retry network etc, that doesn't mean you should also stuff your domain logic/internal state change inside as well. In account picker, when we say ""sign-in"" then it should just sign in and that's all. I don't expect it to erase the bottom sheet dismissal data. That's quite anti-pattern to mix all this up.",73.0,74.0,757e1853_227d5155_before.java,757e1853_227d5155_after.java,True,chromium,4,6
138,757e1853_227d5155,74.0,"I understand your use case, but the delegate is just an executor, like an API to communicate with the world outside without modifying the account picker's state.
It does heavy work with the WebSigninBridge, that's the idea, we hide the communication with the outside world behind the API and let the MVC handle the UI logic. 

It's like when you create an app with an API sendEmail(), sendEmail() also will do heavy work by connecting SMTP, retry network etc, that doesn't mean you should also stuff your domain logic/internal state change inside as well. In account picker, when we say ""sign-in"" then it should just sign in and that's all. I don't expect it to erase the bottom sheet dismissal data. That's quite anti-pattern to mix all this up.",73.0,74.0,757e1853_227d5155_before.java,757e1853_227d5155_after.java,True,chromium,4,6
139,757e1853_227d5155,74.0,"I understand your use case, but the delegate is just an executor, like an API to communicate with the world outside without modifying the account picker's state.
It does heavy work with the WebSigninBridge, that's the idea, we hide the communication with the outside world behind the API and let the MVC handle the UI logic. 

It's like when you create an app with an API sendEmail(), sendEmail() also will do heavy work by connecting SMTP, retry network etc, that doesn't mean you should also stuff your domain logic/internal state change inside as well. In account picker, when we say ""sign-in"" then it should just sign in and that's all. I don't expect it to erase the bottom sheet dismissal data. That's quite anti-pattern to mix all this up.",73.0,74.0,757e1853_227d5155_before.java,757e1853_227d5155_after.java,True,chromium,4,6
140,5d96a634_ac4755e1,74.0,"* The delegate impl doesn't need to stay inside this package, I did think about moving it outside to signin/ui for example and make it a package private class some time ago. Nothing forces this class to stay in this package actually, the impl is not tied to UI.

* It's just strange why a sign-in method erases the bottom sheet dismissal count. The counter is bound to some UI button clicks, it's weird why an sign-in action should alter this. 

* Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 

* The third approach doesn't look so good either, all the listener and abstract classes simply make the code harder and harder to understand with all the indirection. And here you will need listener + view adjustment + delegate, you don't need delegate anymore but the MVC have the two similar structure listener and delegate in it on the same time.

* About the ifs: Actually that's how MVC works, we use property to branch UI refresh in viewbinder and logic in mediator, while coordinator just connects these components together without entering into specific details. So there's nothing strange to introduce a new access point property and that adds ifs in both ViewBinder and mediator.",73.0,74.0,5d96a634_ac4755e1_before.java,5d96a634_ac4755e1_after.java,True,chromium,4,6
141,5d96a634_ac4755e1,74.0,"* The delegate impl doesn't need to stay inside this package, I did think about moving it outside to signin/ui for example and make it a package private class some time ago. Nothing forces this class to stay in this package actually, the impl is not tied to UI.

* It's just strange why a sign-in method erases the bottom sheet dismissal count. The counter is bound to some UI button clicks, it's weird why an sign-in action should alter this. 

* Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 

* The third approach doesn't look so good either, all the listener and abstract classes simply make the code harder and harder to understand with all the indirection. And here you will need listener + view adjustment + delegate, you don't need delegate anymore but the MVC have the two similar structure listener and delegate in it on the same time.

* About the ifs: Actually that's how MVC works, we use property to branch UI refresh in viewbinder and logic in mediator, while coordinator just connects these components together without entering into specific details. So there's nothing strange to introduce a new access point property and that adds ifs in both ViewBinder and mediator.",73.0,74.0,5d96a634_ac4755e1_before.java,5d96a634_ac4755e1_after.java,True,chromium,4,6
142,5d96a634_ac4755e1,74.0,"* The delegate impl doesn't need to stay inside this package, I did think about moving it outside to signin/ui for example and make it a package private class some time ago. Nothing forces this class to stay in this package actually, the impl is not tied to UI.

* It's just strange why a sign-in method erases the bottom sheet dismissal count. The counter is bound to some UI button clicks, it's weird why an sign-in action should alter this. 

* Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 

* The third approach doesn't look so good either, all the listener and abstract classes simply make the code harder and harder to understand with all the indirection. And here you will need listener + view adjustment + delegate, you don't need delegate anymore but the MVC have the two similar structure listener and delegate in it on the same time.

* About the ifs: Actually that's how MVC works, we use property to branch UI refresh in viewbinder and logic in mediator, while coordinator just connects these components together without entering into specific details. So there's nothing strange to introduce a new access point property and that adds ifs in both ViewBinder and mediator.",73.0,74.0,5d96a634_ac4755e1_before.java,5d96a634_ac4755e1_after.java,True,chromium,4,6
143,5d96a634_ac4755e1,74.0,"* The delegate impl doesn't need to stay inside this package, I did think about moving it outside to signin/ui for example and make it a package private class some time ago. Nothing forces this class to stay in this package actually, the impl is not tied to UI.

* It's just strange why a sign-in method erases the bottom sheet dismissal count. The counter is bound to some UI button clicks, it's weird why an sign-in action should alter this. 

* Bottom sheet can be dismissed for reasons other than the four we listed in coordinator, we only want to increment for those *four* cases while we should destroy the delegate in *all* scenarios. In that sense, the cl will cause regression. 

* The third approach doesn't look so good either, all the listener and abstract classes simply make the code harder and harder to understand with all the indirection. And here you will need listener + view adjustment + delegate, you don't need delegate anymore but the MVC have the two similar structure listener and delegate in it on the same time.

* About the ifs: Actually that's how MVC works, we use property to branch UI refresh in viewbinder and logic in mediator, while coordinator just connects these components together without entering into specific details. So there's nothing strange to introduce a new access point property and that adds ifs in both ViewBinder and mediator.",73.0,74.0,5d96a634_ac4755e1_before.java,5d96a634_ac4755e1_after.java,True,chromium,4,6
144,d9bf9954_21f98b78,64.0,"Why this late change?
1) Did you mean != 0 in the check?
2) It looks like it can never be 0 anyway? https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/data/AuthenticatorOption.java;l=85;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",57.0,64.0,d9bf9954_21f98b78_before.java,d9bf9954_21f98b78_after.java,True,chromium,9,9
145,d9bf9954_21f98b78,64.0,"Why this late change?
1) Did you mean != 0 in the check?
2) It looks like it can never be 0 anyway? https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/data/AuthenticatorOption.java;l=85;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",57.0,64.0,d9bf9954_21f98b78_before.java,d9bf9954_21f98b78_after.java,True,chromium,9,9
146,d9bf9954_21f98b78,64.0,"Why this late change?
1) Did you mean != 0 in the check?
2) It looks like it can never be 0 anyway? https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/data/AuthenticatorOption.java;l=85;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",57.0,64.0,d9bf9954_21f98b78_before.java,d9bf9954_21f98b78_after.java,True,chromium,9,9
147,d9bf9954_21f98b78,64.0,"Why this late change?
1) Did you mean != 0 in the check?
2) It looks like it can never be 0 anyway? https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/data/AuthenticatorOption.java;l=85;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",57.0,64.0,d9bf9954_21f98b78_before.java,d9bf9954_21f98b78_after.java,True,chromium,9,9
148,e39333af_38929a00,64.0,"This change came out of this discussion: https://chromium-review.googlesource.com/c/chromium/src/+/3192612/comments/1352903e_913850c6

I've fixed the logic error, and I've removed the assertion from AuthenticatorOption.java.

Thanks for catching this!",57.0,64.0,e39333af_38929a00_before.java,e39333af_38929a00_after.java,True,chromium,9,9
149,e39333af_38929a00,64.0,"This change came out of this discussion: https://chromium-review.googlesource.com/c/chromium/src/+/3192612/comments/1352903e_913850c6

I've fixed the logic error, and I've removed the assertion from AuthenticatorOption.java.

Thanks for catching this!",57.0,64.0,e39333af_38929a00_before.java,e39333af_38929a00_after.java,True,chromium,9,9
150,e39333af_38929a00,64.0,"This change came out of this discussion: https://chromium-review.googlesource.com/c/chromium/src/+/3192612/comments/1352903e_913850c6

I've fixed the logic error, and I've removed the assertion from AuthenticatorOption.java.

Thanks for catching this!",57.0,64.0,e39333af_38929a00_before.java,e39333af_38929a00_after.java,True,chromium,9,9
151,e39333af_38929a00,64.0,"This change came out of this discussion: https://chromium-review.googlesource.com/c/chromium/src/+/3192612/comments/1352903e_913850c6

I've fixed the logic error, and I've removed the assertion from AuthenticatorOption.java.

Thanks for catching this!",57.0,64.0,e39333af_38929a00_before.java,e39333af_38929a00_after.java,True,chromium,9,9
152,ccc0eec1_c716bbe1,64.0,"I missed that it can't be 0 anyway. In that case, we'd need to either throw an exception while creating the AuthenticatorSelectionDialogBridge or allow the iconResId to be 0.

Personally, I'd prefer the latter as when there are multiple authenticators, then we use radio buttons instead of the iconResId.",57.0,64.0,ccc0eec1_c716bbe1_before.java,ccc0eec1_c716bbe1_after.java,True,chromium,9,9
153,ccc0eec1_c716bbe1,64.0,"I missed that it can't be 0 anyway. In that case, we'd need to either throw an exception while creating the AuthenticatorSelectionDialogBridge or allow the iconResId to be 0.

Personally, I'd prefer the latter as when there are multiple authenticators, then we use radio buttons instead of the iconResId.",57.0,64.0,ccc0eec1_c716bbe1_before.java,ccc0eec1_c716bbe1_after.java,True,chromium,9,9
154,ccc0eec1_c716bbe1,64.0,"I missed that it can't be 0 anyway. In that case, we'd need to either throw an exception while creating the AuthenticatorSelectionDialogBridge or allow the iconResId to be 0.

Personally, I'd prefer the latter as when there are multiple authenticators, then we use radio buttons instead of the iconResId.",57.0,64.0,ccc0eec1_c716bbe1_before.java,ccc0eec1_c716bbe1_after.java,True,chromium,9,9
155,ccc0eec1_c716bbe1,64.0,"I missed that it can't be 0 anyway. In that case, we'd need to either throw an exception while creating the AuthenticatorSelectionDialogBridge or allow the iconResId to be 0.

Personally, I'd prefer the latter as when there are multiple authenticators, then we use radio buttons instead of the iconResId.",57.0,64.0,ccc0eec1_c716bbe1_before.java,ccc0eec1_c716bbe1_after.java,True,chromium,9,9
156,aef60e12_40ecd0bb,64.0,"Ok thanks.  I'll defer to Android experts/owners on if removing the assert is fine, but from the comment thread you linked it sounds like that's the desired approach.",57.0,64.0,aef60e12_40ecd0bb_before.java,aef60e12_40ecd0bb_after.java,True,chromium,9,9
157,aef60e12_40ecd0bb,64.0,"Ok thanks.  I'll defer to Android experts/owners on if removing the assert is fine, but from the comment thread you linked it sounds like that's the desired approach.",57.0,64.0,aef60e12_40ecd0bb_before.java,aef60e12_40ecd0bb_after.java,True,chromium,9,9
158,aef60e12_40ecd0bb,64.0,"Ok thanks.  I'll defer to Android experts/owners on if removing the assert is fine, but from the comment thread you linked it sounds like that's the desired approach.",57.0,64.0,aef60e12_40ecd0bb_before.java,aef60e12_40ecd0bb_after.java,True,chromium,9,9
159,aef60e12_40ecd0bb,64.0,"Ok thanks.  I'll defer to Android experts/owners on if removing the assert is fine, but from the comment thread you linked it sounds like that's the desired approach.",57.0,64.0,aef60e12_40ecd0bb_before.java,aef60e12_40ecd0bb_after.java,True,chromium,9,9
160,d3a40f79_461b38cc,85.0,nit: I have generally noticed a new line between the first line and the first @param. I couldn't find a specific recommendation from Java style guide so consider it optional.,85.0,85.0,d3a40f79_461b38cc_before.java,d3a40f79_461b38cc_after.java,True,chromium,6,6
161,d3a40f79_461b38cc,85.0,nit: I have generally noticed a new line between the first line and the first @param. I couldn't find a specific recommendation from Java style guide so consider it optional.,85.0,85.0,d3a40f79_461b38cc_before.java,d3a40f79_461b38cc_after.java,True,chromium,6,6
162,d3a40f79_461b38cc,85.0,nit: I have generally noticed a new line between the first line and the first @param. I couldn't find a specific recommendation from Java style guide so consider it optional.,85.0,85.0,d3a40f79_461b38cc_before.java,d3a40f79_461b38cc_after.java,True,chromium,6,6
163,d3a40f79_461b38cc,85.0,nit: I have generally noticed a new line between the first line and the first @param. I couldn't find a specific recommendation from Java style guide so consider it optional.,85.0,85.0,d3a40f79_461b38cc_before.java,d3a40f79_461b38cc_after.java,True,chromium,6,6
164,a24eda97_67a295c7,85.0,Wasn't done here,85.0,85.0,a24eda97_67a295c7_before.java,a24eda97_67a295c7_after.java,True,chromium,6,6
165,a24eda97_67a295c7,85.0,Wasn't done here,85.0,85.0,a24eda97_67a295c7_before.java,a24eda97_67a295c7_after.java,True,chromium,6,6
166,a24eda97_67a295c7,85.0,Wasn't done here,85.0,85.0,a24eda97_67a295c7_before.java,a24eda97_67a295c7_after.java,True,chromium,6,6
167,a24eda97_67a295c7,85.0,Wasn't done here,85.0,85.0,a24eda97_67a295c7_before.java,a24eda97_67a295c7_after.java,True,chromium,6,6
168,09a4b905_7d88ae6a,85.0,Done,85.0,85.0,09a4b905_7d88ae6a_before.java,09a4b905_7d88ae6a_after.java,True,chromium,6,6
169,09a4b905_7d88ae6a,85.0,Done,85.0,85.0,09a4b905_7d88ae6a_before.java,09a4b905_7d88ae6a_after.java,True,chromium,6,6
170,09a4b905_7d88ae6a,85.0,Done,85.0,85.0,09a4b905_7d88ae6a_before.java,09a4b905_7d88ae6a_after.java,True,chromium,6,6
171,09a4b905_7d88ae6a,85.0,Done,85.0,85.0,09a4b905_7d88ae6a_before.java,09a4b905_7d88ae6a_after.java,True,chromium,6,6
172,01298bd6_5bf8c002,85.0,Done,85.0,85.0,01298bd6_5bf8c002_before.java,01298bd6_5bf8c002_after.java,True,chromium,6,6
173,01298bd6_5bf8c002,85.0,Done,85.0,85.0,01298bd6_5bf8c002_before.java,01298bd6_5bf8c002_after.java,True,chromium,6,6
174,01298bd6_5bf8c002,85.0,Done,85.0,85.0,01298bd6_5bf8c002_before.java,01298bd6_5bf8c002_after.java,True,chromium,6,6
175,01298bd6_5bf8c002,85.0,Done,85.0,85.0,01298bd6_5bf8c002_before.java,01298bd6_5bf8c002_after.java,True,chromium,6,6
176,3c9dffbe_11cfa28e,102.0,remove addition,102.0,102.0,3c9dffbe_11cfa28e_before.java,3c9dffbe_11cfa28e_after.java,True,chromium,6,6
177,3c9dffbe_11cfa28e,102.0,remove addition,102.0,102.0,3c9dffbe_11cfa28e_before.java,3c9dffbe_11cfa28e_after.java,True,chromium,6,6
178,3c9dffbe_11cfa28e,102.0,remove addition,102.0,102.0,3c9dffbe_11cfa28e_before.java,3c9dffbe_11cfa28e_after.java,True,chromium,6,6
179,3c9dffbe_11cfa28e,102.0,remove addition,102.0,102.0,3c9dffbe_11cfa28e_before.java,3c9dffbe_11cfa28e_after.java,True,chromium,6,6
180,3aba56b0_3679af05,102.0,Done,102.0,102.0,3aba56b0_3679af05_before.java,3aba56b0_3679af05_after.java,True,chromium,6,6
181,3aba56b0_3679af05,102.0,Done,102.0,102.0,3aba56b0_3679af05_before.java,3aba56b0_3679af05_after.java,True,chromium,6,6
182,3aba56b0_3679af05,102.0,Done,102.0,102.0,3aba56b0_3679af05_before.java,3aba56b0_3679af05_after.java,True,chromium,6,6
183,3aba56b0_3679af05,102.0,Done,102.0,102.0,3aba56b0_3679af05_before.java,3aba56b0_3679af05_after.java,True,chromium,6,6
184,1352903e_913850c6,74.0,C++ would do NOTREACHED() here which would crash a debug build...I wonder if this should do something similar?  Throwing an exception would crash even a non-debug build though...,74.0,74.0,1352903e_913850c6_before.java,1352903e_913850c6_after.java,True,chromium,8,8
185,1352903e_913850c6,74.0,C++ would do NOTREACHED() here which would crash a debug build...I wonder if this should do something similar?  Throwing an exception would crash even a non-debug build though...,74.0,74.0,1352903e_913850c6_before.java,1352903e_913850c6_after.java,True,chromium,8,8
186,1352903e_913850c6,74.0,C++ would do NOTREACHED() here which would crash a debug build...I wonder if this should do something similar?  Throwing an exception would crash even a non-debug build though...,74.0,74.0,1352903e_913850c6_before.java,1352903e_913850c6_after.java,True,chromium,8,8
187,1352903e_913850c6,74.0,C++ would do NOTREACHED() here which would crash a debug build...I wonder if this should do something similar?  Throwing an exception would crash even a non-debug build though...,74.0,74.0,1352903e_913850c6_before.java,1352903e_913850c6_after.java,True,chromium,8,8
188,b900a0c3_a7e3d737,74.0,"The only way I think we handle it gracefully is to leave it as is and maybe add a Log statement [1]

To avoid any crashes, we'd also need to update the AuthenticatorOptionsAdapter[2] to handle cases where the iconResId is 0, so that it does not fail trying fetch an icon for that id.

[1]https://sites.google.com/a/google.com/clank/engineering/best-practices/logging 
[2]https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/AuthenticatorOptionsAdapter.java;l=58;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",74.0,74.0,b900a0c3_a7e3d737_before.java,b900a0c3_a7e3d737_after.java,True,chromium,8,8
189,b900a0c3_a7e3d737,74.0,"The only way I think we handle it gracefully is to leave it as is and maybe add a Log statement [1]

To avoid any crashes, we'd also need to update the AuthenticatorOptionsAdapter[2] to handle cases where the iconResId is 0, so that it does not fail trying fetch an icon for that id.

[1]https://sites.google.com/a/google.com/clank/engineering/best-practices/logging 
[2]https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/AuthenticatorOptionsAdapter.java;l=58;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",74.0,74.0,b900a0c3_a7e3d737_before.java,b900a0c3_a7e3d737_after.java,True,chromium,8,8
190,b900a0c3_a7e3d737,74.0,"The only way I think we handle it gracefully is to leave it as is and maybe add a Log statement [1]

To avoid any crashes, we'd also need to update the AuthenticatorOptionsAdapter[2] to handle cases where the iconResId is 0, so that it does not fail trying fetch an icon for that id.

[1]https://sites.google.com/a/google.com/clank/engineering/best-practices/logging 
[2]https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/AuthenticatorOptionsAdapter.java;l=58;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",74.0,74.0,b900a0c3_a7e3d737_before.java,b900a0c3_a7e3d737_after.java,True,chromium,8,8
191,b900a0c3_a7e3d737,74.0,"The only way I think we handle it gracefully is to leave it as is and maybe add a Log statement [1]

To avoid any crashes, we'd also need to update the AuthenticatorOptionsAdapter[2] to handle cases where the iconResId is 0, so that it does not fail trying fetch an icon for that id.

[1]https://sites.google.com/a/google.com/clank/engineering/best-practices/logging 
[2]https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/ui/android/autofill/internal/java/src/org/chromium/chrome/browser/ui/autofill/AuthenticatorOptionsAdapter.java;l=58;drc=0f7b26dc2dcf3aa5098a852fc2c02329b25ad98d",74.0,74.0,b900a0c3_a7e3d737_before.java,b900a0c3_a7e3d737_after.java,True,chromium,8,8
192,5cae2ef7_508cb6bf,74.0,"Theoretically, this should never happen. However, if it's as you say (NOTREACHED() only takes effect on debug builds), throwing an exception here might not be desirable. I'd prefer a more graceful way of handling error conditions in release builds than just straight up crashing... Is there a way to catch an exception across the JNI build?",74.0,74.0,5cae2ef7_508cb6bf_before.java,5cae2ef7_508cb6bf_after.java,True,chromium,8,8
193,5cae2ef7_508cb6bf,74.0,"Theoretically, this should never happen. However, if it's as you say (NOTREACHED() only takes effect on debug builds), throwing an exception here might not be desirable. I'd prefer a more graceful way of handling error conditions in release builds than just straight up crashing... Is there a way to catch an exception across the JNI build?",74.0,74.0,5cae2ef7_508cb6bf_before.java,5cae2ef7_508cb6bf_after.java,True,chromium,8,8
194,5cae2ef7_508cb6bf,74.0,"Theoretically, this should never happen. However, if it's as you say (NOTREACHED() only takes effect on debug builds), throwing an exception here might not be desirable. I'd prefer a more graceful way of handling error conditions in release builds than just straight up crashing... Is there a way to catch an exception across the JNI build?",74.0,74.0,5cae2ef7_508cb6bf_before.java,5cae2ef7_508cb6bf_after.java,True,chromium,8,8
195,5cae2ef7_508cb6bf,74.0,"Theoretically, this should never happen. However, if it's as you say (NOTREACHED() only takes effect on debug builds), throwing an exception here might not be desirable. I'd prefer a more graceful way of handling error conditions in release builds than just straight up crashing... Is there a way to catch an exception across the JNI build?",74.0,74.0,5cae2ef7_508cb6bf_before.java,5cae2ef7_508cb6bf_after.java,True,chromium,8,8
196,06b8ae77_bfb8df07,74.0,"Good question, agreed that throwing an exception isn't desirable either.  As for your question, not sure, unfortunately.  Maybe Sid knows?  Maybe we just have to leave it be.",74.0,74.0,06b8ae77_bfb8df07_before.java,06b8ae77_bfb8df07_after.java,True,chromium,8,8
197,06b8ae77_bfb8df07,74.0,"Good question, agreed that throwing an exception isn't desirable either.  As for your question, not sure, unfortunately.  Maybe Sid knows?  Maybe we just have to leave it be.",74.0,74.0,06b8ae77_bfb8df07_before.java,06b8ae77_bfb8df07_after.java,True,chromium,8,8
198,06b8ae77_bfb8df07,74.0,"Good question, agreed that throwing an exception isn't desirable either.  As for your question, not sure, unfortunately.  Maybe Sid knows?  Maybe we just have to leave it be.",74.0,74.0,06b8ae77_bfb8df07_before.java,06b8ae77_bfb8df07_after.java,True,chromium,8,8
199,06b8ae77_bfb8df07,74.0,"Good question, agreed that throwing an exception isn't desirable either.  As for your question, not sure, unfortunately.  Maybe Sid knows?  Maybe we just have to leave it be.",74.0,74.0,06b8ae77_bfb8df07_before.java,06b8ae77_bfb8df07_after.java,True,chromium,8,8
200,9bab2220_9319950a,74.0,Done,74.0,74.0,9bab2220_9319950a_before.java,9bab2220_9319950a_after.java,True,chromium,8,8
201,9bab2220_9319950a,74.0,Done,74.0,74.0,9bab2220_9319950a_before.java,9bab2220_9319950a_after.java,True,chromium,8,8
202,9bab2220_9319950a,74.0,Done,74.0,74.0,9bab2220_9319950a_before.java,9bab2220_9319950a_after.java,True,chromium,8,8
203,9bab2220_9319950a,74.0,Done,74.0,74.0,9bab2220_9319950a_before.java,9bab2220_9319950a_after.java,True,chromium,8,8
204,fd75ad03_194bf6ad,74.0,Done,74.0,74.0,fd75ad03_194bf6ad_before.java,fd75ad03_194bf6ad_after.java,True,chromium,8,8
205,fd75ad03_194bf6ad,74.0,Done,74.0,74.0,fd75ad03_194bf6ad_before.java,fd75ad03_194bf6ad_after.java,True,chromium,8,8
206,fd75ad03_194bf6ad,74.0,Done,74.0,74.0,fd75ad03_194bf6ad_before.java,fd75ad03_194bf6ad_after.java,True,chromium,8,8
207,fd75ad03_194bf6ad,74.0,Done,74.0,74.0,fd75ad03_194bf6ad_before.java,fd75ad03_194bf6ad_after.java,True,chromium,8,8
208,c095cb5c_e76f3e7a,83.0,"If nothing happens in the end if |list| is null, maybe starting off this function with `if (list == null) return;` would be better, to avoid unnecessary object construction?",83.0,83.0,c095cb5c_e76f3e7a_before.java,c095cb5c_e76f3e7a_after.java,True,chromium,8,8
209,c095cb5c_e76f3e7a,83.0,"If nothing happens in the end if |list| is null, maybe starting off this function with `if (list == null) return;` would be better, to avoid unnecessary object construction?",83.0,83.0,c095cb5c_e76f3e7a_before.java,c095cb5c_e76f3e7a_after.java,True,chromium,8,8
210,c095cb5c_e76f3e7a,83.0,"If nothing happens in the end if |list| is null, maybe starting off this function with `if (list == null) return;` would be better, to avoid unnecessary object construction?",83.0,83.0,c095cb5c_e76f3e7a_before.java,c095cb5c_e76f3e7a_after.java,True,chromium,8,8
211,c095cb5c_e76f3e7a,83.0,"If nothing happens in the end if |list| is null, maybe starting off this function with `if (list == null) return;` would be better, to avoid unnecessary object construction?",83.0,83.0,c095cb5c_e76f3e7a_before.java,c095cb5c_e76f3e7a_after.java,True,chromium,8,8
212,e1d80ebe_8ea8359d,83.0,Done,83.0,83.0,e1d80ebe_8ea8359d_before.java,e1d80ebe_8ea8359d_after.java,True,chromium,8,8
213,e1d80ebe_8ea8359d,83.0,Done,83.0,83.0,e1d80ebe_8ea8359d_before.java,e1d80ebe_8ea8359d_after.java,True,chromium,8,8
214,e1d80ebe_8ea8359d,83.0,Done,83.0,83.0,e1d80ebe_8ea8359d_before.java,e1d80ebe_8ea8359d_after.java,True,chromium,8,8
215,e1d80ebe_8ea8359d,83.0,Done,83.0,83.0,e1d80ebe_8ea8359d_before.java,e1d80ebe_8ea8359d_after.java,True,chromium,8,8
216,be65afc9_c47c30b6,96.0,Dismisses,96.0,96.0,be65afc9_c47c30b6_before.java,be65afc9_c47c30b6_after.java,True,chromium,8,8
217,be65afc9_c47c30b6,96.0,Dismisses,96.0,96.0,be65afc9_c47c30b6_before.java,be65afc9_c47c30b6_after.java,True,chromium,8,8
218,be65afc9_c47c30b6,96.0,Dismisses,96.0,96.0,be65afc9_c47c30b6_before.java,be65afc9_c47c30b6_after.java,True,chromium,8,8
219,be65afc9_c47c30b6,96.0,Dismisses,96.0,96.0,be65afc9_c47c30b6_before.java,be65afc9_c47c30b6_after.java,True,chromium,8,8
220,16d23f6d_79356f87,96.0,Done,96.0,96.0,16d23f6d_79356f87_before.java,16d23f6d_79356f87_after.java,True,chromium,8,8
221,16d23f6d_79356f87,96.0,Done,96.0,96.0,16d23f6d_79356f87_before.java,16d23f6d_79356f87_after.java,True,chromium,8,8
222,16d23f6d_79356f87,96.0,Done,96.0,96.0,16d23f6d_79356f87_before.java,16d23f6d_79356f87_after.java,True,chromium,8,8
223,16d23f6d_79356f87,96.0,Done,96.0,96.0,16d23f6d_79356f87_before.java,16d23f6d_79356f87_after.java,True,chromium,8,8
224,0a880965_e08adf83,112.0,nit: This comment seems unrelated.,110.0,112.0,0a880965_e08adf83_before.java,0a880965_e08adf83_after.java,True,chromium,8,8
225,0a880965_e08adf83,112.0,nit: This comment seems unrelated.,110.0,112.0,0a880965_e08adf83_before.java,0a880965_e08adf83_after.java,True,chromium,8,8
226,0a880965_e08adf83,112.0,nit: This comment seems unrelated.,110.0,112.0,0a880965_e08adf83_before.java,0a880965_e08adf83_after.java,True,chromium,8,8
227,0a880965_e08adf83,112.0,nit: This comment seems unrelated.,110.0,112.0,0a880965_e08adf83_before.java,0a880965_e08adf83_after.java,True,chromium,8,8
228,b01514fd_4e89dd9c,112.0,Done,110.0,112.0,b01514fd_4e89dd9c_before.java,b01514fd_4e89dd9c_after.java,True,chromium,8,8
229,b01514fd_4e89dd9c,112.0,Done,110.0,112.0,b01514fd_4e89dd9c_before.java,b01514fd_4e89dd9c_after.java,True,chromium,8,8
230,b01514fd_4e89dd9c,112.0,Done,110.0,112.0,b01514fd_4e89dd9c_before.java,b01514fd_4e89dd9c_after.java,True,chromium,8,8
231,b01514fd_4e89dd9c,112.0,Done,110.0,112.0,b01514fd_4e89dd9c_before.java,b01514fd_4e89dd9c_after.java,True,chromium,8,8
232,98c0be16_09d2e17a,69.0,"I think Java requires curly braces even in C++, sorry for my misleading comment earlier. :)

  if (list == null) {
    return;
  }",69.0,69.0,98c0be16_09d2e17a_before.java,98c0be16_09d2e17a_after.java,True,chromium,8,8
233,98c0be16_09d2e17a,69.0,"I think Java requires curly braces even in C++, sorry for my misleading comment earlier. :)

  if (list == null) {
    return;
  }",69.0,69.0,98c0be16_09d2e17a_before.java,98c0be16_09d2e17a_after.java,True,chromium,8,8
234,98c0be16_09d2e17a,69.0,"I think Java requires curly braces even in C++, sorry for my misleading comment earlier. :)

  if (list == null) {
    return;
  }",69.0,69.0,98c0be16_09d2e17a_before.java,98c0be16_09d2e17a_after.java,True,chromium,8,8
235,98c0be16_09d2e17a,69.0,"I think Java requires curly braces even in C++, sorry for my misleading comment earlier. :)

  if (list == null) {
    return;
  }",69.0,69.0,98c0be16_09d2e17a_before.java,98c0be16_09d2e17a_after.java,True,chromium,8,8
236,f78ff58c_5da46b46,69.0,Done,69.0,69.0,f78ff58c_5da46b46_before.java,f78ff58c_5da46b46_after.java,True,chromium,8,8
237,f78ff58c_5da46b46,69.0,Done,69.0,69.0,f78ff58c_5da46b46_before.java,f78ff58c_5da46b46_after.java,True,chromium,8,8
238,f78ff58c_5da46b46,69.0,Done,69.0,69.0,f78ff58c_5da46b46_before.java,f78ff58c_5da46b46_after.java,True,chromium,8,8
239,f78ff58c_5da46b46,69.0,Done,69.0,69.0,f78ff58c_5da46b46_before.java,f78ff58c_5da46b46_after.java,True,chromium,8,8
240,a4d1995c_714a528b,46.0,nit: consider handling edge cases if windowAndroid.getModalDialogManager() or windowAndroid.getActivity().get() are null. You can return null in this case and mark the function @Nullable,46.0,46.0,a4d1995c_714a528b_before.java,a4d1995c_714a528b_after.java,True,chromium,6,8
241,a4d1995c_714a528b,46.0,nit: consider handling edge cases if windowAndroid.getModalDialogManager() or windowAndroid.getActivity().get() are null. You can return null in this case and mark the function @Nullable,46.0,46.0,a4d1995c_714a528b_before.java,a4d1995c_714a528b_after.java,True,chromium,6,8
242,a4d1995c_714a528b,46.0,nit: consider handling edge cases if windowAndroid.getModalDialogManager() or windowAndroid.getActivity().get() are null. You can return null in this case and mark the function @Nullable,46.0,46.0,a4d1995c_714a528b_before.java,a4d1995c_714a528b_after.java,True,chromium,6,8
243,a4d1995c_714a528b,46.0,nit: consider handling edge cases if windowAndroid.getModalDialogManager() or windowAndroid.getActivity().get() are null. You can return null in this case and mark the function @Nullable,46.0,46.0,a4d1995c_714a528b_before.java,a4d1995c_714a528b_after.java,True,chromium,6,8
244,6bfe4db0_5cea3a67,46.0,Done,46.0,46.0,6bfe4db0_5cea3a67_before.java,6bfe4db0_5cea3a67_after.java,True,chromium,6,8
245,6bfe4db0_5cea3a67,46.0,Done,46.0,46.0,6bfe4db0_5cea3a67_before.java,6bfe4db0_5cea3a67_after.java,True,chromium,6,8
246,6bfe4db0_5cea3a67,46.0,Done,46.0,46.0,6bfe4db0_5cea3a67_before.java,6bfe4db0_5cea3a67_after.java,True,chromium,6,8
247,6bfe4db0_5cea3a67,46.0,Done,46.0,46.0,6bfe4db0_5cea3a67_before.java,6bfe4db0_5cea3a67_after.java,True,chromium,6,8
248,b228ff26_17f28503,121.0,"nit: you never reset mNativeCardUnmaskAuthenticationSelectionDialogView to 0, so maybe this check is redundant.",121.0,121.0,b228ff26_17f28503_before.java,b228ff26_17f28503_after.java,True,chromium,6,8
249,b228ff26_17f28503,121.0,"nit: you never reset mNativeCardUnmaskAuthenticationSelectionDialogView to 0, so maybe this check is redundant.",121.0,121.0,b228ff26_17f28503_before.java,b228ff26_17f28503_after.java,True,chromium,6,8
250,b228ff26_17f28503,121.0,"nit: you never reset mNativeCardUnmaskAuthenticationSelectionDialogView to 0, so maybe this check is redundant.",121.0,121.0,b228ff26_17f28503_before.java,b228ff26_17f28503_after.java,True,chromium,6,8
251,b228ff26_17f28503,121.0,"nit: you never reset mNativeCardUnmaskAuthenticationSelectionDialogView to 0, so maybe this check is redundant.",121.0,121.0,b228ff26_17f28503_before.java,b228ff26_17f28503_after.java,True,chromium,6,8
252,63dfb19c_c6268f93,121.0,Done,121.0,121.0,63dfb19c_c6268f93_before.java,63dfb19c_c6268f93_after.java,True,chromium,6,8
253,63dfb19c_c6268f93,121.0,Done,121.0,121.0,63dfb19c_c6268f93_before.java,63dfb19c_c6268f93_after.java,True,chromium,6,8
254,63dfb19c_c6268f93,121.0,Done,121.0,121.0,63dfb19c_c6268f93_before.java,63dfb19c_c6268f93_after.java,True,chromium,6,8
255,63dfb19c_c6268f93,121.0,Done,121.0,121.0,63dfb19c_c6268f93_before.java,63dfb19c_c6268f93_after.java,True,chromium,6,8
256,703a47fe_be8e4128,8.0,"+Sinan, if this is used in a scenario when ?attr/colorColorNormal doesn't work, would it be better for this to be default_icon_color? Or some other semantic color/",8.0,8.0,703a47fe_be8e4128_before.java,703a47fe_be8e4128_after.java,True,chromium,0,0
257,703a47fe_be8e4128,8.0,"+Sinan, if this is used in a scenario when ?attr/colorColorNormal doesn't work, would it be better for this to be default_icon_color? Or some other semantic color/",8.0,8.0,703a47fe_be8e4128_before.java,703a47fe_be8e4128_after.java,True,chromium,0,0
258,703a47fe_be8e4128,8.0,"+Sinan, if this is used in a scenario when ?attr/colorColorNormal doesn't work, would it be better for this to be default_icon_color? Or some other semantic color/",8.0,8.0,703a47fe_be8e4128_before.java,703a47fe_be8e4128_after.java,True,chromium,0,0
259,703a47fe_be8e4128,8.0,"+Sinan, if this is used in a scenario when ?attr/colorColorNormal doesn't work, would it be better for this to be default_icon_color? Or some other semantic color/",8.0,8.0,703a47fe_be8e4128_before.java,703a47fe_be8e4128_after.java,True,chromium,0,0
260,241acb96_2a89371c,8.0,Thanks for the quick response!,8.0,8.0,241acb96_2a89371c_before.java,241acb96_2a89371c_after.java,True,chromium,0,0
261,241acb96_2a89371c,8.0,Thanks for the quick response!,8.0,8.0,241acb96_2a89371c_before.java,241acb96_2a89371c_after.java,True,chromium,0,0
262,241acb96_2a89371c,8.0,Thanks for the quick response!,8.0,8.0,241acb96_2a89371c_before.java,241acb96_2a89371c_after.java,True,chromium,0,0
263,241acb96_2a89371c,8.0,Thanks for the quick response!,8.0,8.0,241acb96_2a89371c_before.java,241acb96_2a89371c_after.java,True,chromium,0,0
264,013d7444_aa453c91,8.0,"It doesn't really matter. There is a discussion here: https://chromium-review.googlesource.com/c/chromium/src/+/3207267/4/chrome/android/features/autofill_assistant/java/res/drawable/ic_autofill_assistant_add_circle_24dp.xml#15

In an unsent comment, I was going to suggest leaving the original color in these cases, i.e. @android:color/white.",8.0,8.0,013d7444_aa453c91_before.java,013d7444_aa453c91_after.java,True,chromium,0,0
265,013d7444_aa453c91,8.0,"It doesn't really matter. There is a discussion here: https://chromium-review.googlesource.com/c/chromium/src/+/3207267/4/chrome/android/features/autofill_assistant/java/res/drawable/ic_autofill_assistant_add_circle_24dp.xml#15

In an unsent comment, I was going to suggest leaving the original color in these cases, i.e. @android:color/white.",8.0,8.0,013d7444_aa453c91_before.java,013d7444_aa453c91_after.java,True,chromium,0,0
266,013d7444_aa453c91,8.0,"It doesn't really matter. There is a discussion here: https://chromium-review.googlesource.com/c/chromium/src/+/3207267/4/chrome/android/features/autofill_assistant/java/res/drawable/ic_autofill_assistant_add_circle_24dp.xml#15

In an unsent comment, I was going to suggest leaving the original color in these cases, i.e. @android:color/white.",8.0,8.0,013d7444_aa453c91_before.java,013d7444_aa453c91_after.java,True,chromium,0,0
267,013d7444_aa453c91,8.0,"It doesn't really matter. There is a discussion here: https://chromium-review.googlesource.com/c/chromium/src/+/3207267/4/chrome/android/features/autofill_assistant/java/res/drawable/ic_autofill_assistant_add_circle_24dp.xml#15

In an unsent comment, I was going to suggest leaving the original color in these cases, i.e. @android:color/white.",8.0,8.0,013d7444_aa453c91_before.java,013d7444_aa453c91_after.java,True,chromium,0,0
268,f40d885f_697ef2a8,153.0,"nit: addAccounts(accounts, /*areAccountsClickable=*/!hasSingleAccount);
go/java-practices/methods#call-site-literals",153.0,153.0,f40d885f_697ef2a8_before.java,f40d885f_697ef2a8_after.java,True,chromium,17,17
269,f40d885f_697ef2a8,153.0,"nit: addAccounts(accounts, /*areAccountsClickable=*/!hasSingleAccount);
go/java-practices/methods#call-site-literals",153.0,153.0,f40d885f_697ef2a8_before.java,f40d885f_697ef2a8_after.java,True,chromium,17,17
270,f40d885f_697ef2a8,153.0,"nit: addAccounts(accounts, /*areAccountsClickable=*/!hasSingleAccount);
go/java-practices/methods#call-site-literals",153.0,153.0,f40d885f_697ef2a8_before.java,f40d885f_697ef2a8_after.java,True,chromium,17,17
271,f40d885f_697ef2a8,153.0,"nit: addAccounts(accounts, /*areAccountsClickable=*/!hasSingleAccount);
go/java-practices/methods#call-site-literals",153.0,153.0,f40d885f_697ef2a8_before.java,f40d885f_697ef2a8_after.java,True,chromium,17,17
272,c2c02c8f_99d2f0a6,153.0,Done,153.0,153.0,c2c02c8f_99d2f0a6_before.java,c2c02c8f_99d2f0a6_after.java,True,chromium,17,17
273,c2c02c8f_99d2f0a6,153.0,Done,153.0,153.0,c2c02c8f_99d2f0a6_before.java,c2c02c8f_99d2f0a6_after.java,True,chromium,17,17
274,c2c02c8f_99d2f0a6,153.0,Done,153.0,153.0,c2c02c8f_99d2f0a6_before.java,c2c02c8f_99d2f0a6_after.java,True,chromium,17,17
275,c2c02c8f_99d2f0a6,153.0,Done,153.0,153.0,c2c02c8f_99d2f0a6_before.java,c2c02c8f_99d2f0a6_after.java,True,chromium,17,17
276,4d806afb_8756af6a,62.0,Nit: Returns... https://google.github.io/styleguide/javaguide.html#s7.2-summary-fragment,62.0,62.0,4d806afb_8756af6a_before.java,4d806afb_8756af6a_after.java,True,chromium,19,19
277,4d806afb_8756af6a,62.0,Nit: Returns... https://google.github.io/styleguide/javaguide.html#s7.2-summary-fragment,62.0,62.0,4d806afb_8756af6a_before.java,4d806afb_8756af6a_after.java,True,chromium,19,19
278,4d806afb_8756af6a,62.0,Nit: Returns... https://google.github.io/styleguide/javaguide.html#s7.2-summary-fragment,62.0,62.0,4d806afb_8756af6a_before.java,4d806afb_8756af6a_after.java,True,chromium,19,19
279,4d806afb_8756af6a,62.0,Nit: Returns... https://google.github.io/styleguide/javaguide.html#s7.2-summary-fragment,62.0,62.0,4d806afb_8756af6a_before.java,4d806afb_8756af6a_after.java,True,chromium,19,19
280,7ca165b9_9bf39e2f,66.0,Nit: period.,66.0,66.0,7ca165b9_9bf39e2f_before.java,7ca165b9_9bf39e2f_after.java,True,chromium,19,19
281,7ca165b9_9bf39e2f,66.0,Nit: period.,66.0,66.0,7ca165b9_9bf39e2f_before.java,7ca165b9_9bf39e2f_after.java,True,chromium,19,19
282,7ca165b9_9bf39e2f,66.0,Nit: period.,66.0,66.0,7ca165b9_9bf39e2f_before.java,7ca165b9_9bf39e2f_after.java,True,chromium,19,19
283,7ca165b9_9bf39e2f,66.0,Nit: period.,66.0,66.0,7ca165b9_9bf39e2f_before.java,7ca165b9_9bf39e2f_after.java,True,chromium,19,19
284,42aefa39_379f1917,137.0,I feel like I've seen you do this before in another recent CL. Is there a shared place you can put this pattern?,136.0,137.0,42aefa39_379f1917_before.java,42aefa39_379f1917_after.java,True,chromium,8,9
285,42aefa39_379f1917,137.0,I feel like I've seen you do this before in another recent CL. Is there a shared place you can put this pattern?,136.0,137.0,42aefa39_379f1917_before.java,42aefa39_379f1917_after.java,True,chromium,8,9
286,42aefa39_379f1917,137.0,I feel like I've seen you do this before in another recent CL. Is there a shared place you can put this pattern?,136.0,137.0,42aefa39_379f1917_before.java,42aefa39_379f1917_after.java,True,chromium,8,9
287,42aefa39_379f1917,137.0,I feel like I've seen you do this before in another recent CL. Is there a shared place you can put this pattern?,136.0,137.0,42aefa39_379f1917_before.java,42aefa39_379f1917_after.java,True,chromium,8,9
288,4ddf1150_88a6e516,2171.0,"Think of the case: 1) user open this background Tab. 2) tap the tab switcher button and enter the tab switcher. 3) choose the background tab from the tab switcher again. 4) on the background tab, taps the back button. There are many steps are done before it returns to the Start surface, do you still want to close this background tab? I'm fine with deleting the tab here, but just want to make sure that you really want to delete this tab in such a case.

Actually, I think this could be:
if (type == TabLaunchType.FROM_LONGPRESS_BACKGROUND && !StartSurfaceUserData.getKeepTab(currentTab)) {
  getCurrentTabModel().closeTab(currentTab);
}

StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?",2169.0,2171.0,4ddf1150_88a6e516_before.java,4ddf1150_88a6e516_after.java,True,chromium,119,117
289,4ddf1150_88a6e516,2171.0,"Think of the case: 1) user open this background Tab. 2) tap the tab switcher button and enter the tab switcher. 3) choose the background tab from the tab switcher again. 4) on the background tab, taps the back button. There are many steps are done before it returns to the Start surface, do you still want to close this background tab? I'm fine with deleting the tab here, but just want to make sure that you really want to delete this tab in such a case.

Actually, I think this could be:
if (type == TabLaunchType.FROM_LONGPRESS_BACKGROUND && !StartSurfaceUserData.getKeepTab(currentTab)) {
  getCurrentTabModel().closeTab(currentTab);
}

StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?",2169.0,2171.0,4ddf1150_88a6e516_before.java,4ddf1150_88a6e516_after.java,True,chromium,119,117
290,4ddf1150_88a6e516,2171.0,"Think of the case: 1) user open this background Tab. 2) tap the tab switcher button and enter the tab switcher. 3) choose the background tab from the tab switcher again. 4) on the background tab, taps the back button. There are many steps are done before it returns to the Start surface, do you still want to close this background tab? I'm fine with deleting the tab here, but just want to make sure that you really want to delete this tab in such a case.

Actually, I think this could be:
if (type == TabLaunchType.FROM_LONGPRESS_BACKGROUND && !StartSurfaceUserData.getKeepTab(currentTab)) {
  getCurrentTabModel().closeTab(currentTab);
}

StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?",2169.0,2171.0,4ddf1150_88a6e516_before.java,4ddf1150_88a6e516_after.java,True,chromium,119,117
291,4ddf1150_88a6e516,2171.0,"Think of the case: 1) user open this background Tab. 2) tap the tab switcher button and enter the tab switcher. 3) choose the background tab from the tab switcher again. 4) on the background tab, taps the back button. There are many steps are done before it returns to the Start surface, do you still want to close this background tab? I'm fine with deleting the tab here, but just want to make sure that you really want to delete this tab in such a case.

Actually, I think this could be:
if (type == TabLaunchType.FROM_LONGPRESS_BACKGROUND && !StartSurfaceUserData.getKeepTab(currentTab)) {
  getCurrentTabModel().closeTab(currentTab);
}

StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?",2169.0,2171.0,4ddf1150_88a6e516_before.java,4ddf1150_88a6e516_after.java,True,chromium,119,117
292,343e0792_12916045,2171.0,"> just want to make sure that you really want to delete this tab in such a case.

Yes, I would intend for the tab to be closed in that case. That's what currently happens if the tab is created from the New Tab Page feed.

> StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?

I see, sounds like I should check ""KeepTab"" before closing the tab.",2169.0,2171.0,343e0792_12916045_before.java,343e0792_12916045_after.java,True,chromium,119,117
293,343e0792_12916045,2171.0,"> just want to make sure that you really want to delete this tab in such a case.

Yes, I would intend for the tab to be closed in that case. That's what currently happens if the tab is created from the New Tab Page feed.

> StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?

I see, sounds like I should check ""KeepTab"" before closing the tab.",2169.0,2171.0,343e0792_12916045_before.java,343e0792_12916045_after.java,True,chromium,119,117
294,343e0792_12916045,2171.0,"> just want to make sure that you really want to delete this tab in such a case.

Yes, I would intend for the tab to be closed in that case. That's what currently happens if the tab is created from the New Tab Page feed.

> StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?

I see, sounds like I should check ""KeepTab"" before closing the tab.",2169.0,2171.0,343e0792_12916045_before.java,343e0792_12916045_after.java,True,chromium,119,117
295,343e0792_12916045,2171.0,"> just want to make sure that you really want to delete this tab in such a case.

Yes, I would intend for the tab to be closed in that case. That's what currently happens if the tab is created from the New Tab Page feed.

> StartSurfaceUserData.setKeepTab() is called when user taps either home button or tab switcher button on the tab. It distinguishes the cases that tapping the back button directly after opening the tab from the cases that user does multiple other steps. Wdyt?

I see, sounds like I should check ""KeepTab"" before closing the tab.",2169.0,2171.0,343e0792_12916045_before.java,343e0792_12916045_after.java,True,chromium,119,117
296,9cc50d0b_2f10b012,531.0,"nit: This name does not represent what the function does.

I think it might be better to duplicate in this case so a reader of the test doesn't have to go look up the function.

Alternatively, write something like

  private void startTestCounterExpansion(bool accessibilityEnabled) {
    TestThreadUtils.runOnUiThreadBlocking(() ->
      ChromeAccessibilityUtil.get().setAccessibilityEnabledForTesting(
        accessibilityEnabled));
     
     FormProto.Builder formProto = ...
     List<ActionProto> list = ...
     AutofillAssistantTestCript script = ...
     AutofillAssistantTestService testService = ...
     startAutofillAssistant(mTestRule.getActivity(), testService);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandEnabledWithoutAccessibility() {
     startTestCounterExpansion(true);
     
     waitUntilViewMatchesCondition(...);
     // Expand label is visible.
     waitUntilViewMatchesCondition(...);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandDisabledWithAccessibility() {
     startTestCounterExpansion(false);
     
     ...
   }
   
Similar to this:
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/features/autofill_assistant/javatests/src/org/chromium/chrome/browser/autofill_assistant/AutofillAssistantPersonalDataManagerTest.java;l=224-234",531.0,531.0,9cc50d0b_2f10b012_before.java,9cc50d0b_2f10b012_after.java,True,chromium,7,8
297,9cc50d0b_2f10b012,531.0,"nit: This name does not represent what the function does.

I think it might be better to duplicate in this case so a reader of the test doesn't have to go look up the function.

Alternatively, write something like

  private void startTestCounterExpansion(bool accessibilityEnabled) {
    TestThreadUtils.runOnUiThreadBlocking(() ->
      ChromeAccessibilityUtil.get().setAccessibilityEnabledForTesting(
        accessibilityEnabled));
     
     FormProto.Builder formProto = ...
     List<ActionProto> list = ...
     AutofillAssistantTestCript script = ...
     AutofillAssistantTestService testService = ...
     startAutofillAssistant(mTestRule.getActivity(), testService);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandEnabledWithoutAccessibility() {
     startTestCounterExpansion(true);
     
     waitUntilViewMatchesCondition(...);
     // Expand label is visible.
     waitUntilViewMatchesCondition(...);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandDisabledWithAccessibility() {
     startTestCounterExpansion(false);
     
     ...
   }
   
Similar to this:
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/features/autofill_assistant/javatests/src/org/chromium/chrome/browser/autofill_assistant/AutofillAssistantPersonalDataManagerTest.java;l=224-234",531.0,531.0,9cc50d0b_2f10b012_before.java,9cc50d0b_2f10b012_after.java,True,chromium,7,8
298,9cc50d0b_2f10b012,531.0,"nit: This name does not represent what the function does.

I think it might be better to duplicate in this case so a reader of the test doesn't have to go look up the function.

Alternatively, write something like

  private void startTestCounterExpansion(bool accessibilityEnabled) {
    TestThreadUtils.runOnUiThreadBlocking(() ->
      ChromeAccessibilityUtil.get().setAccessibilityEnabledForTesting(
        accessibilityEnabled));
     
     FormProto.Builder formProto = ...
     List<ActionProto> list = ...
     AutofillAssistantTestCript script = ...
     AutofillAssistantTestService testService = ...
     startAutofillAssistant(mTestRule.getActivity(), testService);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandEnabledWithoutAccessibility() {
     startTestCounterExpansion(true);
     
     waitUntilViewMatchesCondition(...);
     // Expand label is visible.
     waitUntilViewMatchesCondition(...);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandDisabledWithAccessibility() {
     startTestCounterExpansion(false);
     
     ...
   }
   
Similar to this:
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/features/autofill_assistant/javatests/src/org/chromium/chrome/browser/autofill_assistant/AutofillAssistantPersonalDataManagerTest.java;l=224-234",531.0,531.0,9cc50d0b_2f10b012_before.java,9cc50d0b_2f10b012_after.java,True,chromium,7,8
299,9cc50d0b_2f10b012,531.0,"nit: This name does not represent what the function does.

I think it might be better to duplicate in this case so a reader of the test doesn't have to go look up the function.

Alternatively, write something like

  private void startTestCounterExpansion(bool accessibilityEnabled) {
    TestThreadUtils.runOnUiThreadBlocking(() ->
      ChromeAccessibilityUtil.get().setAccessibilityEnabledForTesting(
        accessibilityEnabled));
     
     FormProto.Builder formProto = ...
     List<ActionProto> list = ...
     AutofillAssistantTestCript script = ...
     AutofillAssistantTestService testService = ...
     startAutofillAssistant(mTestRule.getActivity(), testService);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandEnabledWithoutAccessibility() {
     startTestCounterExpansion(true);
     
     waitUntilViewMatchesCondition(...);
     // Expand label is visible.
     waitUntilViewMatchesCondition(...);
   }
   
   @Test
   @MediumTest
   public void testCounterExpandDisabledWithAccessibility() {
     startTestCounterExpansion(false);
     
     ...
   }
   
Similar to this:
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/features/autofill_assistant/javatests/src/org/chromium/chrome/browser/autofill_assistant/AutofillAssistantPersonalDataManagerTest.java;l=224-234",531.0,531.0,9cc50d0b_2f10b012_before.java,9cc50d0b_2f10b012_after.java,True,chromium,7,8
300,82a99cce_91d43df6,81.0,Nit: I don't think this should be a capital P.,81.0,81.0,82a99cce_91d43df6_before.java,82a99cce_91d43df6_after.java,True,chromium,0,0
301,14973fd1_9cb72db7,81.0,Done,81.0,81.0,14973fd1_9cb72db7_before.java,14973fd1_9cb72db7_after.java,True,chromium,0,0
302,7d4b2d3f_9a0c9bba,864.0,"IMHO if the introduction of above If there seems no possibility that size of sorted actions will be more than BIG_VIEW_ACTIONS_COUNT.

Can this assert be removed?",,,7d4b2d3f_9a0c9bba_before.java,7d4b2d3f_9a0c9bba_after.java,True,chromium,40,40
303,f1bb0f25_8ae0f51b,864.0,You are right .  Done!! Thanks for the review.,,,f1bb0f25_8ae0f51b_before.java,f1bb0f25_8ae0f51b_after.java,True,chromium,40,40
304,a4192b58_35eea9bb,864.0,Ack,,,a4192b58_35eea9bb_before.java,a4192b58_35eea9bb_after.java,True,chromium,40,40
305,092fe65d_7448ffdb,864.0,Done,,,092fe65d_7448ffdb_before.java,092fe65d_7448ffdb_after.java,True,chromium,40,40
306,721708da_aa571b60,864.0,Done,,,721708da_aa571b60_before.java,721708da_aa571b60_after.java,True,chromium,40,40
307,eed45cd5_12cefde0,856.0,"It seems that, since STOP is last in |actionByOrder|, it might never be added to |sortedActions|, while it is ""picked out"" and used early in computeCompactViewActionIndices.

What does the UI look like after these changes, if you try to add 6 actions?",856.0,856.0,eed45cd5_12cefde0_before.java,eed45cd5_12cefde0_after.java,True,chromium,40,40
308,c2a0297f_57820b98,856.0,"Hi Thomas,
As there is no priority preference in Media Session as of now, we have fixed the below order for actions display.
int[] actionByOrder = {
                MediaSessionAction.PREVIOUS_TRACK,
                MediaSessionAction.SEEK_BACKWARD,
                MediaSessionAction.PLAY,
                MediaSessionAction.PAUSE,
                MediaSessionAction.SEEK_FORWARD,
                MediaSessionAction.NEXT_TRACK,
                MediaSessionAction.STOP,
        };
Android supports only @{BIG_VIEW_ACTIONS_COUNT} so we need to drop one. 
https://github.com/w3c/mediasession/issues/151",856.0,856.0,c2a0297f_57820b98_before.java,c2a0297f_57820b98_after.java,True,chromium,40,40
309,fc12f3df_17cc458f,856.0,"yes , if |actions| passed in the this method are as follows :
                MediaSessionAction.PREVIOUS_TRACK,
                MediaSessionAction.SEEK_BACKWARD,
                MediaSessionAction.PAUSE,
                MediaSessionAction.SEEK_FORWARD,
                MediaSessionAction.NEXT_TRACK,
                MediaSessionAction.STOP,
                
Now ""STOP"" action will not be added as only first 5 will be added.

But consider the scenario where |action| passed are  : 
                MediaSessionAction.SEEK_BACKWARD,
                MediaSessionAction.PAUSE,
                MediaSessionAction.SEEK_FORWARD,
                MediaSessionAction.STOP,
             
Now all the actions including STOP will also be added . 

To answer your another question ,  No there wont be any case where 6 action buttons will be shown. Because there is a framework spacing issue if we allow 6 action buttons.",856.0,856.0,fc12f3df_17cc458f_before.java,fc12f3df_17cc458f_after.java,True,chromium,40,40
310,30739388_3c18df76,856.0,"IIUC, if |actions| contains:
                MediaSessionAction.PREVIOUS_TRACK,
                MediaSessionAction.SEEK_BACKWARD,
                MediaSessionAction.PAUSE,
                MediaSessionAction.SEEK_FORWARD,
                MediaSessionAction.NEXT_TRACK,
                MediaSessionAction.STOP,
                
|sortedActions| will end up without MediaSessionAction.STOP.

So, even if there is no NEXT or LAST action buttons, STOP will also not show up.

Is this expected/intended? If so, is there a clearer way to represent this, or can you add comments?

Also, can |actions| ever have 6 values?",856.0,856.0,30739388_3c18df76_before.java,30739388_3c18df76_after.java,True,chromium,40,40
311,950e4ea5_511824c1,856.0,"For now only 5 Actions items will be shown . So even if the action STOP is last , it can be added once there is no ""NEXT or ""LAST"" action buttons . 

If we extend the max limit to add 6 items, then there is framework spacing issues between the items.

Please check  : https://bugs.chromium.org/p/chromium/issues/detail?id=1231980
Images are attached where STOP action is supported.",856.0,856.0,950e4ea5_511824c1_before.java,950e4ea5_511824c1_after.java,True,chromium,40,40
312,1e6b1585_90b296b7,856.0,"If the second scenario can happen, the comments in computeCompactViewActionIndices will be pretty confusing. See comment below.

Ok that the UI will never show 6 buttons. However, I'm wondering the java code ever populates |actions| with 6 actions at a time. If it does, is dropping ""STOP"" the intended behavior -- as opposed to dropping ""SEEK_BACKWARD + SEEK_FORWARD"" or any other actions? If it is, I think this should be clearly documented as intentional. Currently, I see STOP being dropped as a result of the ordering of the buttons in the UI, rather than the ""priority"" of the actions, which might be an old bug [1], with an unresolved github issue [2].

[1] https://bugs.chromium.org/p/chromium/issues/detail?id=667500
[2] https://github.com/w3c/mediasession/issues/151",856.0,856.0,1e6b1585_90b296b7_before.java,1e6b1585_90b296b7_after.java,True,chromium,40,40
313,cf9e91b8_455d667b,877.0,The results of computeBigViewActions() can be passed into here. I think we might hit this assert.,872.0,877.0,cf9e91b8_455d667b_before.java,cf9e91b8_455d667b_after.java,True,chromium,40,40
314,f4bcf945_f60d9a47,877.0,"Yes , You are right, The comment is confusing because stop can exist with either of the switch track actions or seek actions.
I have removed the assert .

The Action Combination that you wrote at the bottom will not be possible, as PLAY/PAUSE Action is always sent , so one of the action will always PLAY/PAUSE. So assert would not have failed .

Also I have uploaded the complete changes of the bug in this patch only for the better clarity.",872.0,877.0,f4bcf945_f60d9a47_before.java,f4bcf945_f60d9a47_after.java,True,chromium,40,40
315,5598500b_73c59a11,877.0,"Taking the example from the above comment, where |actions| passed in is:

                MediaSessionAction.SEEK_BACKWARD,
                MediaSessionAction.PAUSE,
                MediaSessionAction.SEEK_FORWARD,
                MediaSessionAction.STOP,
                
This will technically not trigger the assert, but the comments are still confusing. A correct comment would say ""Stop can coexist with either switch track actions, or seeking actions, but not both"". That seems pretty arbitrary, as it is derived from not the 6 action limit, and not from intentionally preventing stop from coexisting with both seek/skip actions.

Also I'm not sure if this could be passed in, and would fail the assert:
                MediaSessionAction.PREVIOUS_TRACK,
                MediaSessionAction.SEEK_BACKWARD,
                MediaSessionAction.SEEK_FORWARD,
                MediaSessionAction.NEXT_TRACK,
                MediaSessionAction.STOP,",872.0,877.0,5598500b_73c59a11_before.java,5598500b_73c59a11_after.java,True,chromium,40,40
316,704deb13_36b4d21a,877.0,"Yes we are passing result of ComputeBigViewActions() ,but in the case where added action item are 5, STOP will not be added . and in other case , assert condition will not fail.",872.0,877.0,704deb13_36b4d21a_before.java,704deb13_36b4d21a_after.java,True,chromium,40,40
317,edc4d312_76134b20,877.0,"Ok, removing the ASSERT/updating the comment sounds good. Thanks!",872.0,877.0,edc4d312_76134b20_before.java,edc4d312_76134b20_after.java,True,chromium,40,40
318,de5443d2_6f3fd012,59.0,Please add a comment explaining that this is the Notification hiding time + 100ms (IIUC),58.0,59.0,de5443d2_6f3fd012_before.java,de5443d2_6f3fd012_after.java,True,chromium,40,40
319,f85aa3fb_603e5e91,59.0,Done,58.0,59.0,f85aa3fb_603e5e91_before.java,f85aa3fb_603e5e91_after.java,True,chromium,40,40
320,bdc5b4a6_c70c011a,861.0,"Please add a comment outlining that we don't prioritize displaying any action above another, so STOP will likely be the one that is dropped.",861.0,861.0,bdc5b4a6_c70c011a_before.java,bdc5b4a6_c70c011a_after.java,True,chromium,40,40
321,8df22c38_036ed912,861.0,Done,861.0,861.0,8df22c38_036ed912_before.java,8df22c38_036ed912_after.java,True,chromium,40,40
322,62ec6d48_32c324f6,59.0,NIT: add a space.,59.0,59.0,62ec6d48_32c324f6_before.java,62ec6d48_32c324f6_after.java,True,chromium,40,40
323,749c8638_2d682c5d,59.0,Done,59.0,59.0,749c8638_2d682c5d_before.java,749c8638_2d682c5d_after.java,True,chromium,40,40
324,05005762_94ab364b,862.0,typo: prioritized,862.0,862.0,05005762_94ab364b_before.java,05005762_94ab364b_after.java,True,chromium,40,40
325,6c4f9ec4_41a05c59,862.0,Done,862.0,862.0,6c4f9ec4_41a05c59_before.java,6c4f9ec4_41a05c59_after.java,True,chromium,40,40
326,b88925a5_7cb75b24,59.0,"Where does this 1000ms come from? As far as I know, notifications go away immediately when stopping the service.",59.0,59.0,b88925a5_7cb75b24_before.java,b88925a5_7cb75b24_after.java,True,chromium,40,40
327,6c93eff4_3759f5cd,33.0,"Maybe I'm missing something, but I don't see why this needs to be split, since PLAY and PAUSE are always used together (in the rest of this CL at least)",25.0,33.0,6c93eff4_3759f5cd_before.java,6c93eff4_3759f5cd_after.java,True,chromium,23,23
328,7241be02_3115d396,33.0,Done,25.0,33.0,7241be02_3115d396_before.java,7241be02_3115d396_after.java,True,chromium,23,23
329,7db039ef_7f1c9a2a,33.0,"You are right , there is no need to separate them .
Since we had to change ACTION_STOP's value , I changed all of them to make similar.
Should i not change them  ?",25.0,33.0,7db039ef_7f1c9a2a_before.java,7db039ef_7f1c9a2a_after.java,True,chromium,23,23
330,f5277f99_d5b46e6a,33.0,"(For future reference, if have questions in comments, it's easier if you leave the comments unresolved, so they still show up in the CR)

In this patchset, these are no longer used and are now dead code, and these could be completely removed. However, I'm don't think removing setActions() is the right thing to do (see other comment). Please go back to using a bit mask, and grouping ACTION_PLAY_PAUSE.",25.0,33.0,f5277f99_d5b46e6a_before.java,f5277f99_d5b46e6a_after.java,True,chromium,23,23
331,5b2f27e5_c4ca56a3,33.0,"Please pass ACTION_STOP to the mNotificationInfoBuilder, along with ACTION_PLAY_PAUSE and ACTION_SWIPEAWAY.

This also means reverting changes to ACTION_* so they are bitmasks again, and reverting the removal of setActions().",25.0,33.0,5b2f27e5_c4ca56a3_before.java,5b2f27e5_c4ca56a3_after.java,True,chromium,23,23
332,d9778a4f_9f559525,33.0,"Hi Thomas , As far as I understood the cause , 

The stop button is not showing because , when  mNotificationInfoBuilder is being created in MediaSessionHelper.java file , ACTION_STOP is not being added there. 

Since it is never being added to mActions, MediaNotificationInfo # supportsStop() returns false and stop button is not seen in notifications.

Now we can either pass ACTION_STOP in the mNotificationInfoBuilder with PLAY_PAUSE and SWIPE_AWAY or we can modify MediaNotificationInfo # supportsStop() api.

I think instead of Supporting the STOP always ,we can  use the api like below.
 public boolean supportsStop() {
        return mediaSessionActions.contains(ACTION_STOP);
    }

as mediaSessionActions contains all the actions that website supports. So if website does not support STOP action , it will return false and stop action will not be added.

We can leave all the changes related to  PLAY_PAUSE or SWIPE_AWAYY action as they were for now. If refactoring is needed, we can do it another CL as you suggested. 

Please help with your feedback.",25.0,33.0,d9778a4f_9f559525_before.java,d9778a4f_9f559525_after.java,True,chromium,23,23
333,8bd96e93_d2b47eed,44.0,"The ACTION_* values need to be powers of 2 for the bit masking to work. I think STOP is defined as 7 (0b0111) and SCRUB_TO is 9 (0b1001), which will mess up checking for PLAY/PAUSE support.

I'm getting these values from:
https://source.chromium.org/chromium/chromium/src/+/main:out/android-Debug/gen/services/media_session/public/mojom/mojom_java/generated_java/input_srcjars/org/chromium/media_session/mojom/MediaSessionAction.java;l=51?q=MediaSessionAction",28.0,44.0,8bd96e93_d2b47eed_before.java,8bd96e93_d2b47eed_after.java,True,chromium,23,23
334,9cab8a8d_fa37da10,44.0,"You are right. Thankyou for pointing this out. 

I removed the bitwise operations and since we get the actions in ""set"" so I used that to verify if the action is in there or not.
if action is in the set that means it is supported else not. 
PLAY and PAUSE are always passed so I used ""||"" operator to check for the support.",28.0,44.0,9cab8a8d_fa37da10_before.java,9cab8a8d_fa37da10_after.java,True,chromium,23,23
335,4867ca2b_e4257cc6,249.0,"Same as (mActions & (ACTION_PLAY | ACTION_PAUSE)) != 0, once the ACTION_* values are fixed.",247.0,249.0,4867ca2b_e4257cc6_before.java,4867ca2b_e4257cc6_after.java,True,chromium,23,23
336,46011cf6_26279e15,249.0,"As per the new changes , it is not required anymore . Thankyou.",247.0,249.0,46011cf6_26279e15_before.java,46011cf6_26279e15_after.java,True,chromium,23,23
337,f56270b0_4bf70ea7,64.0,"This seems not used anymore,
IMHO can be removed.",64.0,64.0,f56270b0_4bf70ea7_before.java,f56270b0_4bf70ea7_after.java,True,chromium,23,22
338,d4128bb0_54f346ba,64.0,Done,64.0,64.0,d4128bb0_54f346ba_before.java,d4128bb0_54f346ba_after.java,True,chromium,23,22
339,0b2f9b51_06410398,254.0,"Until this is called, the actions in the MediaNotificationInfo will be empty. Is this always called in practice? How was this code tested?",254.0,254.0,0b2f9b51_06410398_before.java,0b2f9b51_06410398_after.java,True,chromium,25,25
340,cfef478d_69f1d223,254.0,restored the changes.,254.0,254.0,cfef478d_69f1d223_before.java,cfef478d_69f1d223_after.java,True,chromium,25,25
341,cd174149_0bf07d0b,76.0,"Does this need to be updated with equivalent action changes? It seems to me like the original intent of the ACTION_* values was to separate the set of all supported actions, versus the set of currently relevant actions.

If we get ""PLAYER_STATE_UNKNOWN"", we will still display the PLAY/PAUSE button. I'm not sure if this could cause an error if play/pause is called then.

I suspect there will be other noticeable side-effects from these changes. If this is really a clean up opportunity and not needed, this should go in a different CL. Otherwise, the STOP button changes might be reverted alongside this change if there was an undesirable side effect.",73.0,76.0,cd174149_0bf07d0b_before.java,cd174149_0bf07d0b_after.java,True,chromium,12,12
342,2f5f03a5_3650bd82,76.0,you are right .  I restored the changes.,73.0,76.0,2f5f03a5_3650bd82_before.java,2f5f03a5_3650bd82_after.java,True,chromium,12,12
343,903cb133_b2bb6075,232.0,not used?,,,903cb133_b2bb6075_before.java,903cb133_b2bb6075_after.java,True,chromium,35,35
344,c65aec89_40ba72ff,232.0,"ah, right, these are remnants of it being a static global in a past version. Done: removed, renumbered.",,,c65aec89_40ba72ff_before.java,c65aec89_40ba72ff_after.java,True,chromium,35,35
345,df1cf182_21ab87d2,65.0,"nit: ""... but has turned off sync.""",65.0,65.0,df1cf182_21ab87d2_before.java,df1cf182_21ab87d2_after.java,True,chromium,25,25
346,eb122599_60291808,65.0,Done,65.0,65.0,eb122599_60291808_before.java,eb122599_60291808_after.java,True,chromium,25,25
347,9e4108d9_e68e09a0,66.0,Could we rename this to SYNC_PROMO_WHEN_SYNC_TURNED_OFF?,66.0,66.0,9e4108d9_e68e09a0_before.java,9e4108d9_e68e09a0_after.java,True,chromium,25,25
348,805832cf_83b836bb,66.0,Thanks for the suggestion!,66.0,66.0,805832cf_83b836bb_before.java,805832cf_83b836bb_after.java,True,chromium,25,25
349,4188c430_a9b1a573,65.0,"Optional nit: ""Shown"" seems somewhat confusing here - this implies that we're actually tracking impressions or something like that. Not sure which name would work better, though. WDYT about PROMO_FOR_SIGNED_OUT_STATE or PROMO_FOR_SIGNED_IN_STATE?",63.0,65.0,4188c430_a9b1a573_before.java,4188c430_a9b1a573_after.java,True,chromium,25,25
350,af6b74bb_2f913d5e,65.0,I use Shown mostly to contrast Hidden in the first name. WDYT about the name of the first entry if we name this PROMO_FOR?,63.0,65.0,af6b74bb_2f913d5e_before.java,af6b74bb_2f913d5e_after.java,True,chromium,25,25
351,e6ccd401_b1ea435a,65.0,"I guess in that case it could be NO_PROMO, so the whole set will be:
NO_PROMO,
PROMO_FOR_SIGNED_OUT_STATE,
PROMO_FOR_SIGNED_IN_STATE.

This seems a bit clunky, but maybe it's less confusing than SHOWN_XYZ?",63.0,65.0,e6ccd401_b1ea435a_before.java,e6ccd401_b1ea435a_after.java,True,chromium,25,25
352,04afa6c5_6d2cd16c,67.0,"When this is used? These promos don't seem to be handled by SigninPromoController, so I'm not sure why we need them in this enum. Overall, it looks like these promos should be removed altogether - they shouldn't be shown anymore. WDYT?

If we plan to remove these promos, it probably makes sense to add a TODO and name this value accordingly.",67.0,67.0,04afa6c5_6d2cd16c_before.java,04afa6c5_6d2cd16c_after.java,True,chromium,25,25
353,c06d0a0e_b91e4e81,67.0,"They are used in recent tabs manager and book marks when sync is off. The current plan is to keep this promo in recent tabs(https://crbug.com/1230014#c1). Once it gets updated, it probably will also be handled in SigninPromoController.",67.0,67.0,c06d0a0e_b91e4e81_before.java,c06d0a0e_b91e4e81_after.java,True,chromium,25,25
354,020eb358_feb8d65d,67.0,"Got it, thanks!",67.0,67.0,020eb358_feb8d65d_before.java,020eb358_feb8d65d_after.java,True,chromium,25,25
355,3ad952a1_7f28bc20,26.0,"Since we don't need very much, I would probably just add a mLock, make add(), start() and cancel() synchronized, and use regular LinkedList and boolean for mFinalized.

This is likely simpler to reason about, and we don't care too much about performance I guess.

But up to you, since you've already done the work.",,,3ad952a1_7f28bc20_before.java,3ad952a1_7f28bc20_after.java,True,chromium,2,4
356,e313c57c_32a71431,26.0,"Changed to using a lock, but we need a volatile cancel boolean to make it work.",,,e313c57c_32a71431_before.java,e313c57c_32a71431_after.java,True,chromium,2,4
357,4a042ebb_f02c5ecb,75.0,"nit: While in the neighborhood, switch to a lambda, rather than a Runnable? It's a bit more compact.",,,4a042ebb_f02c5ecb_before.java,4a042ebb_f02c5ecb_after.java,True,chromium,2,4
358,144fbe75_7e99d7ab,75.0,Done,,,144fbe75_7e99d7ab_before.java,144fbe75_7e99d7ab_after.java,True,chromium,2,4
359,8e815c3d_c1057b96,79.0,:/ This fires on bots,,,8e815c3d_c1057b96_before.java,8e815c3d_c1057b96_after.java,True,chromium,2,4
360,d4e168d9_834ae74e,79.0,Done,,,d4e168d9_834ae74e_before.java,d4e168d9_834ae74e_after.java,True,chromium,2,4
361,7ab6638d_d59153e9,26.0,"This causes a compile warning. And this is redundant as well, since in Java booleans are always false initially.


Can you also add @GuardedBy(""mTasks"") to mFinalized?",,,7ab6638d_d59153e9_before.java,7ab6638d_d59153e9_after.java,True,chromium,4,4
362,c60b6302_9881331f,26.0,Done,,,c60b6302_9881331f_before.java,c60b6302_9881331f_after.java,True,chromium,4,4
363,57b17291_3207cab2,320.0,"would it suffice to call 

  OmniboxTestUtils.toggleUrlBarFocus(urlBar, true);
  
instead? i would prefer that we don't add new methods to UrlBar.java if possible. this call does exactly what you want (and i'm looking into making this the default way to run omnibox tests while simplifying the testutils class)",317.0,320.0,57b17291_3207cab2_before.java,57b17291_3207cab2_after.java,True,chromium,14,12
364,3c4e1fcf_e756c2f4,329.0,"could the same be achieved by 

  OmniboxTestUtils.toggleUrlBarFocus(urlBar, false);

or is explicit key press required here? (doesn't seem to be the case looking at the test, so maybe we could make it simpler?)",322.0,329.0,3c4e1fcf_e756c2f4_before.java,3c4e1fcf_e756c2f4_after.java,True,chromium,14,12
365,412d2316_982870ab,74.0,"Not sure if it's better to call clear() here OR recordMetrics directly. Even if we won't record duplicate metrics for clearing one message under current design, kind of feel that calling clear(reason) here is more readable, wdyt?",68.0,74.0,412d2316_982870ab_before.java,412d2316_982870ab_after.java,True,chromium,6,7
366,a26925b9_9e238068,74.0,"Yeah, if we can avoid duplication in metrics calling clear(reason) may be the cleaner way.",68.0,74.0,a26925b9_9e238068_before.java,a26925b9_9e238068_after.java,True,chromium,6,7
367,ccbdbed2_e28e2d61,74.0,"Sg! I'm a little concerned about calling clear() directly within the callback. There may be a scenario where we schedule a message when the previously posted message is being dispatched which would remove new posted message. Let's just ""clear"" the message here without calling mEnqueueMessageTimer.removeCallbacksAndMessages",68.0,74.0,ccbdbed2_e28e2d61_before.java,ccbdbed2_e28e2d61_after.java,True,chromium,6,7
368,87f0e316_61419cb5,417.0,"Were you able to manually trigger this snackbar so we can test various scenarios? If not, this might need an automated test  (even though the feature didn't previously have one).",417.0,417.0,87f0e316_61419cb5_before.java,87f0e316_61419cb5_after.java,True,chromium,158,159
369,c64c6514_1dd64544,417.0,Added an instrumentation test in ChromeActivityTest,417.0,417.0,c64c6514_1dd64544_before.java,c64c6514_1dd64544_after.java,True,chromium,158,159
370,4dd0d27a_247d0abd,417.0,"Yes, there is a way to trigger this snackbar after updating a setting in Developer Options. I'll look into adding a unit test for this nevertheless I think",417.0,417.0,4dd0d27a_247d0abd_before.java,4dd0d27a_247d0abd_after.java,True,chromium,158,159
371,2e8e7823_8a17e6f5,418.0,"If you've updated everywhere in //chrome/browser/ui/messages/.../snackbar/ to allow for null snackbars, then we don't need to pass any empty SnackbarController here, right?",418.0,418.0,2e8e7823_8a17e6f5_before.java,2e8e7823_8a17e6f5_after.java,True,chromium,158,159
372,cc43f6a7_ad5409fb,418.0,"I did that because I wasn't sure if the sequence of flow from here on was guaranteed to go through a null check. :) 
I've changed the input back to null, if checking the classes under //chrome/browser/ui/messages/.../snackbar/ is sufficient to allow for null snackbar controllers.",418.0,418.0,cc43f6a7_ad5409fb_before.java,cc43f6a7_ad5409fb_after.java,True,chromium,158,159
373,11c3f1d4_a5df8981,133.0,"Here you could do something like UndobarControllerTest's then assert on properties for that snackbar.


    private Snackbar getCurrentSnackbar() throws ExecutionException {
        return TestThreadUtils.runOnUiThreadBlocking(new Callable<Snackbar>() {
            @Override
            public Snackbar call() {
                return mSnackbarManager.getCurrentSnackbarForTesting();
            }
        });
    }",127.0,133.0,11c3f1d4_a5df8981_before.java,11c3f1d4_a5df8981_after.java,True,chromium,5,4
374,1dec6c0f_02e3283d,133.0,"Removed the instrumentation test, resolving as this is no longer applicable.",127.0,133.0,1dec6c0f_02e3283d_before.java,1dec6c0f_02e3283d_after.java,True,chromium,5,4
375,0f11bcc3_fa4b4507,139.0,"If we allow null here, should annotate with @Nullable and update the JavaDocs",139.0,139.0,0f11bcc3_fa4b4507_before.java,0f11bcc3_fa4b4507_after.java,True,chromium,1,29
376,039afdd0_4912911a,139.0,Done,139.0,139.0,039afdd0_4912911a_before.java,039afdd0_4912911a_after.java,True,chromium,1,29
377,476bbf9b_e610f9c4,245.0,and then here annotate @Nullable as well to indicate to anyone using the API that this may be return null.,245.0,245.0,476bbf9b_e610f9c4_before.java,476bbf9b_e610f9c4_after.java,True,chromium,1,29
378,0fb67e46_0e2936e7,245.0,Done,245.0,245.0,0fb67e46_0e2936e7_before.java,0fb67e46_0e2936e7_after.java,True,chromium,1,29
379,37ca5cb5_a568a9a7,136.0,"Here, if we allow null for SnackbarController now, we may want to safeguard that the controller passed to this method can't be null. If clients want ability to remove matching a Controller they have to supply a Controller (to prevent conflicts between multiple clients using null)",136.0,136.0,37ca5cb5_a568a9a7_before.java,37ca5cb5_a568a9a7_after.java,True,chromium,12,12
380,741fd913_8f58afa5,136.0,"Either seems fine to me. In either approach, let's update the JavaDoc so there's a clear signal to callers what is/isn't expected to work.",136.0,136.0,741fd913_8f58afa5_before.java,741fd913_8f58afa5_after.java,True,chromium,12,12
381,33ff7968_9a411cb7,136.0,I did consider returning early if the controller is null but I thought we'd want to remove snackbars with no controller specified anyway; I see what you mean - in case of multiple 'null' controllers associated with a specific snackbar we want to avoid ending up in a conflict as to when to remove it. Do we want to add an `assert controller != null;` here instead or return early? I am leaning towards returning early on a null controller. WDYT?,136.0,136.0,33ff7968_9a411cb7_before.java,33ff7968_9a411cb7_after.java,True,chromium,12,12
382,b44df7e3_d09a28da,136.0,Added a null check on the controller to return early. I've added notes to the Javadocs of the public APIs that invoke these methods.,136.0,136.0,b44df7e3_d09a28da_before.java,b44df7e3_d09a28da_after.java,True,chromium,12,12
383,c96cf9f2_618144c2,163.0,nit: Failure messages will make future debugging easier,162.0,163.0,c96cf9f2_618144c2_before.java,c96cf9f2_618144c2_after.java,True,chromium,11,11
384,2754b58e_525c3e29,163.0,Done,162.0,163.0,2754b58e_525c3e29_before.java,2754b58e_525c3e29_after.java,True,chromium,11,11
385,d1c1bed4_8575feb4,167.0,"nit: Let's end with ""... cannot be dismissed via this method""",167.0,167.0,d1c1bed4_8575feb4_before.java,d1c1bed4_8575feb4_after.java,True,chromium,21,21
386,f80f240a_2115de89,167.0,style nit: indent second line for this param by 8-chars to visually group,166.0,167.0,f80f240a_2115de89_before.java,f80f240a_2115de89_after.java,True,chromium,21,21
387,f911672f_27fc962e,167.0,Done,167.0,167.0,f911672f_27fc962e_before.java,f911672f_27fc962e_after.java,True,chromium,21,21
388,f27d2945_8a736f32,167.0,Done,166.0,167.0,f27d2945_8a736f32_before.java,f27d2945_8a736f32_after.java,True,chromium,21,21
389,5dbf66c2_792abb30,64.0,is this a single file or the whole jar?,64.0,64.0,5dbf66c2_792abb30_before.java,5dbf66c2_792abb30_after.java,True,chromium,4,4
390,20af979c_42cba9c3,64.0,Done,64.0,64.0,20af979c_42cba9c3_before.java,20af979c_42cba9c3_after.java,True,chromium,4,4
391,9fc5d740_eb3c203e,75.0,wouldnt this transfer all entries into the output? or is it just the one file?,,,9fc5d740_eb3c203e_before.java,9fc5d740_eb3c203e_after.java,True,chromium,4,4
392,e2360e7a_d0226ab8,75.0,Done,,,e2360e7a_d0226ab8_before.java,e2360e7a_d0226ab8_after.java,True,chromium,4,4
393,ba2b7e23_cab6bdad,59.0,when is this null?,59.0,59.0,ba2b7e23_cab6bdad_before.java,ba2b7e23_cab6bdad_after.java,True,chromium,8,8
394,88a8e985_65c044de,59.0,"According to ASM's docs this shouldn't be null, this may have been something I added while debugging.",59.0,59.0,88a8e985_65c044de_before.java,88a8e985_65c044de_after.java,True,chromium,8,8
395,af9f1f36_f8382985,28.0,you should specify that they are : separated lists,28.0,28.0,af9f1f36_f8382985_before.java,af9f1f36_f8382985_after.java,True,chromium,5,5
396,a486a656_911c64fb,28.0,Done,28.0,28.0,a486a656_911c64fb_before.java,a486a656_911c64fb_after.java,True,chromium,5,5
397,50077f88_214a559b,52.0,if this does not fail loudly when the file does not exist then you should manually check and fail loudly instead with a clear error message.,52.0,52.0,50077f88_214a559b_before.java,50077f88_214a559b_after.java,True,chromium,5,5
398,7fc0e820_ea022067,52.0,"ByteCodeRewriter throws an exception when inputJar doesn't exist.

https://source.chromium.org/chromium/chromium/src/+/main:build/android/bytecode/java/org/chromium/bytecode/ByteCodeRewriter.java;l=31;drc=c11c8eb328d65fdd14df6ced4b1eeb0fd755eac9",52.0,52.0,7fc0e820_ea022067_before.java,7fc0e820_ea022067_after.java,True,chromium,5,5
399,b953bdf7_2c78ecfc,52.0,Done,52.0,52.0,b953bdf7_2c78ecfc_before.java,b953bdf7_2c78ecfc_after.java,True,chromium,5,5
400,04b8a747_0f73a7ac,61.0,maybe this should be removed since now all overrides just return true?,,,04b8a747_0f73a7ac_before.java,04b8a747_0f73a7ac_after.java,True,chromium,5,5
401,e1c37af6_ecd7367d,61.0,ByteCodeRewriter defines this method as abstract.,,,e1c37af6_ecd7367d_before.java,e1c37af6_ecd7367d_after.java,True,chromium,5,5
402,925703ff_defec48d,61.0,Done,,,925703ff_defec48d_before.java,925703ff_defec48d_after.java,True,chromium,5,5
403,7a454d02_0b596859,6.0,is it possible to batch these tests? https://source.chromium.org/chromium/chromium/src/+/main:docs/testing/batching_instrumentation_tests.md,6.0,6.0,7a454d02_0b596859_before.java,7a454d02_0b596859_after.java,True,chromium,7,8
404,6560d374_cf3bf9a8,6.0,Done,6.0,6.0,6560d374_cf3bf9a8_before.java,6560d374_cf3bf9a8_after.java,True,chromium,7,8
405,ceae335b_d4c34fa0,65.0,"I didn't see any rendering on this test, do we need this?",60.0,65.0,ceae335b_d4c34fa0_before.java,ceae335b_d4c34fa0_after.java,True,chromium,7,8
406,1a7731e3_6b9560c5,65.0,Removed.,60.0,65.0,1a7731e3_6b9560c5_before.java,1a7731e3_6b9560c5_after.java,True,chromium,7,8
407,696e4367_4694e285,101.0,"nit:
@StringRes int menuItemResource",101.0,101.0,696e4367_4694e285_before.java,696e4367_4694e285_after.java,True,chromium,7,8
408,8651df38_5863e2bb,101.0,nit: 'launchSettingsActivity' sounds like it's directly starting an activity. Suggest a name like 'loadNTP_AndTapFeedMenuItem()',101.0,101.0,8651df38_5863e2bb_before.java,8651df38_5863e2bb_after.java,True,chromium,7,8
409,0600565d_02533ccd,101.0,Done,101.0,101.0,0600565d_02533ccd_before.java,0600565d_02533ccd_after.java,True,chromium,7,8
410,ead29d69_039354e5,101.0,Done,101.0,101.0,ead29d69_039354e5_before.java,ead29d69_039354e5_after.java,True,chromium,7,8
411,a99285fd_8ebb89b3,124.0,"These tests will be fairly expensive to run, and we're only verifying that an intent is fired. This feels like the kind of thing we can do in a unit test.

Can we add more assertions to make these more valuable, or maybe some renders? Note that we've had difficulty with rendering the NTP because its presentation changes often; if you render some of these activities or the menu, they may be less variable.",124.0,124.0,a99285fd_8ebb89b3_before.java,a99285fd_8ebb89b3_after.java,True,chromium,7,8
412,e3739a28_5af719c1,124.0,"> The argument could be made that the unit tests in FeedManagementMediatorTests.java are sufficient, and that we only need to test one intent launch, and I wouldn't object.

I'd like that better, if you aren't worried about losing coverage.

We have had issues with UI on the settings pages in the past, like the appearance of the toolbar, and accessibility of the back button (IIRC). A render check for those might be useful.",124.0,124.0,e3739a28_5af719c1_before.java,e3739a28_5af719c1_after.java,True,chromium,7,8
413,3bfd7f8e_15a47052,124.0,"We do have a unit test that checks the intent already.  We are already verifying more than the intent, though.  We're already checking the gear menu has manage, manage launches the interstitial, and that the proper items are appearing on the interstitial activity.

I don't think that render tests add much here (though I could be convinced otherwise if you disagree). While I'm happy to add more verification, the methods under test are really pretty simple and there isn't much more to verify.  I could verify more fields on the intent, but as long as the URL is right, I'm not sure that buys us much.

The argument could be made that the unit tests in FeedManagementMediatorTests.java are sufficient, and that we only need to test one intent launch, and I wouldn't object.",124.0,124.0,3bfd7f8e_15a47052_before.java,3bfd7f8e_15a47052_after.java,True,chromium,7,8
414,20eb429a_e179a48d,124.0,"OK, I removed the similar tests.

Looking at the page, there isn't really much to render, and I'm worried about it becoming a change detector test.  I'd be happy to go without it for now, but if you feel strongly, can we postpone it to a future changelist?",124.0,124.0,20eb429a_e179a48d_before.java,20eb429a_e179a48d_after.java,True,chromium,7,8
415,1fe630ce_71f06918,93.0,"ah, another nit: I think helpers are supposed to go on the bottom of the class",93.0,93.0,1fe630ce_71f06918_before.java,1fe630ce_71f06918_after.java,True,chromium,3,4
416,17b5b6c1_f59ee12b,93.0,"Now that I removed the other tests, we only needed the helper for one test, so I just re-inlined the code.  The helper function is gone.",93.0,93.0,17b5b6c1_f59ee12b_before.java,17b5b6c1_f59ee12b_after.java,True,chromium,3,4
417,51710430_b22466ad,35.0,nit: s/AT/accessibility services (or AccessibilityService?),,,51710430_b22466ad_before.java,51710430_b22466ad_after.java,True,chromium,11,13
418,fbd7d8a2_c18f7ca4,35.0,Updated in most recent patchset.,,,fbd7d8a2_c18f7ca4_before.java,fbd7d8a2_c18f7ca4_after.java,True,chromium,11,13
419,d4b9b66c_c724b537,71.0,nit: remove line? Not sure the convention in java doc.,,,d4b9b66c_c724b537_before.java,d4b9b66c_c724b537_after.java,True,chromium,11,13
420,13c9ee7e_9d8a444f,71.0,Addressed.,,,13c9ee7e_9d8a444f_before.java,13c9ee7e_9d8a444f_after.java,True,chromium,11,13
421,19d3b2e0_8d512bdc,76.0,"nit: maybe s/filePath/expectationFilePath. Also, any reason why the file name couldn't be part of the file path?",,,19d3b2e0_8d512bdc_before.java,19d3b2e0_8d512bdc_after.java,True,chromium,11,13
422,8397a6a4_ba47cf70,76.0,"Updated naming in most recent patchset.

I also combined the filepath and expectationfile here. I'll need to keep the filepath separately so that we can easily add tests in the various filepaths without having to write the full path each time (content/test/data/accessibility/html vs. content/test/data/accessibility/aria vs. content/test/data/accessibility/event etc).",,,8397a6a4_ba47cf70_before.java,8397a6a4_ba47cf70_after.java,True,chromium,11,13
423,71e0c368_d1f2d35f,169.0,"Will we have filters, e.g.
@ANDROID-EXTERNAL-[DIS]ALLOW:foo*

Would that be expected to be in the next round of changes?",,,71e0c368_d1f2d35f_before.java,71e0c368_d1f2d35f_after.java,True,chromium,11,13
424,bb2d947b_0d166e4d,169.0,"Leaving this unresolved for now so we don't forget. 

I haven't thought too much about whether or not to include this. Initially I thought I would print everything no matter what, but if there is a good use-case for specifically disallowing something, then I can work on fitting that into this as well. Either way it would be a follow-up CL.",,,bb2d947b_0d166e4d_before.java,bb2d947b_0d166e4d_after.java,True,chromium,11,13
425,7ceb7d9f_49ed9685,183.0,nit: worth sorting these?,,,7ceb7d9f_49ed9685_before.java,7ceb7d9f_49ed9685_after.java,True,chromium,11,13
426,2d3fee43_a4105696,183.0,"Sorted in most recent patchset to be alphabetical, and also made it so they only print when set to true to cut down on verbosity of outputs.",,,2d3fee43_a4105696_before.java,2d3fee43_a4105696_after.java,True,chromium,11,13
427,4d3f7a23_3f57e59c,113.0,nit: this could just be WindowOpenDisposition now,113.0,113.0,4d3f7a23_3f57e59c_before.java,4d3f7a23_3f57e59c_after.java,True,chromium,68,68
428,cbcd6a46_f5cc1c01,113.0,Done,113.0,113.0,cbcd6a46_f5cc1c01_before.java,cbcd6a46_f5cc1c01_after.java,True,chromium,68,68
429,7bb2df96_f4921d93,443.0,Missing actionDelegate in @param,443.0,443.0,7bb2df96_f4921d93_before.java,7bb2df96_f4921d93_after.java,True,chromium,68,68
430,7a5c3f40_afc6880b,443.0,Done,443.0,443.0,7a5c3f40_afc6880b_before.java,7a5c3f40_afc6880b_after.java,True,chromium,68,68
431,cd0b0f12_df8321a4,13.0,"nit: If this class is just responsible for fetching image assets, I think it'd be nice to mention that here",13.0,13.0,cd0b0f12_df8321a4_before.java,cd0b0f12_df8321a4_after.java,True,chromium,2,2
432,4816061f_4bc8acbe,13.0,Sounds good :),13.0,13.0,4816061f_4bc8acbe_before.java,4816061f_4bc8acbe_after.java,True,chromium,2,2
433,3091c73b_cfc2b69d,13.0,I was thinking of using this class for GIF encoding as well... Perhaps I can change the description when the class is more finalized?,13.0,13.0,3091c73b_cfc2b69d_before.java,3091c73b_cfc2b69d_after.java,True,chromium,2,2
434,486f2b1f_c926d3f9,23.0,tiny nit: javadoc for methods is written with /** */ comments,22.0,23.0,486f2b1f_c926d3f9_before.java,486f2b1f_c926d3f9_after.java,True,chromium,2,2
435,eb4b6709_60013c16,23.0,Done,22.0,23.0,eb4b6709_60013c16_before.java,eb4b6709_60013c16_after.java,True,chromium,2,2
436,40be2a6d_e014fdc8,370.0,"This is subtle but this will include all RFH for every page in the WebContents. WebContents are increasingly going to host multiple pages (e.g. a prerendered page, BFCache, etc.). We don't want a ""RemoveHighlights"" click to e.g. remove highlights from a prerendered page.

What we want here is the ""primary page"" (the one the user is currently interacting with). It seems that would be done via: WebContentsImpl->GetMainFrame()->ForEachRenderFrameHost(). It seems like you may have to add plumbing to the Java RFH object to ForEachRenderFrameHost",370.0,370.0,40be2a6d_e014fdc8_before.java,40be2a6d_e014fdc8_after.java,True,chromium,35,35
437,ad319e85_b76226c9,370.0,Done,370.0,370.0,ad319e85_b76226c9_before.java,ad319e85_b76226c9_after.java,True,chromium,35,35
438,5a767d09_e9dfb493,373.0,"nit: this won't just be child, it'll also include the main frame. Maybe just""renderFrameHost""?",373.0,373.0,5a767d09_e9dfb493_before.java,5a767d09_e9dfb493_after.java,True,chromium,35,35
439,7fbba8ff_c80d0298,373.0,Done,373.0,373.0,7fbba8ff_c80d0298_before.java,7fbba8ff_c80d0298_after.java,True,chromium,35,35
440,fac05e5f_5b72c8c6,42.0,This and the DEPS change look like a problem. chrome layer code should not be using content internal classes. The WebContents should declare the method for use here which should be implemented by WebContentsImpl.,,,fac05e5f_5b72c8c6_before.java,fac05e5f_5b72c8c6_after.java,True,chromium,35,35
441,2385b2d0_345fe213,42.0,Done,,,2385b2d0_345fe213_before.java,2385b2d0_345fe213_after.java,True,chromium,35,35
442,5b091154_cbb8519a,364.0,"Please leave a comment here that we want to ""remove highlights from all frames in the primary page.""",364.0,364.0,5b091154_cbb8519a_before.java,5b091154_cbb8519a_after.java,True,chromium,35,35
443,9a8650a9_7bfe33a5,227.0,"Nit, lets update this to e.g. Removes all text fragment highlights from all frames on the page",227.0,227.0,9a8650a9_7bfe33a5_before.java,9a8650a9_7bfe33a5_after.java,True,chromium,0,0
444,f2838290_8d90305a,227.0,Done,227.0,227.0,f2838290_8d90305a_before.java,f2838290_8d90305a_after.java,True,chromium,0,0
445,425f09d9_7da4fbac,111.0,Should this check mNativeRenderFrameHostAndroid before calling into c++ as the other methods do?,,,425f09d9_7da4fbac_before.java,425f09d9_7da4fbac_after.java,True,chromium,24,24
446,24c1e665_4315b765,422.0,"I think we should mirror the non-Java version and use the existing getMainFrame() to get the primary (the term ""main"" is being replaced by ""primary"" here) frame, then add a forEachRenderFrameHost to it.",422.0,422.0,24c1e665_4315b765_before.java,24c1e665_4315b765_after.java,True,chromium,108,107
447,2c27b7d8_9e4fd6bb,422.0,"More closely matching the C++ side sounds good to me. I'm not sure how cumbersome a callback style would be across jni, so producing an array seems fine as well.

So the java caller might look like
```
List<RenderFrameHost> renderFrameHosts = webContents.getMainFrame().getAllRenderFrameHosts();
```

Then that method should be declared on RenderFrameHost.java, implemented by RenderFrameHostImpl.java, and the C++ side RenderFrameHostAndroid would implement in terms of RFH::ForEachRenderFrameHost.",422.0,422.0,2c27b7d8_9e4fd6bb_before.java,2c27b7d8_9e4fd6bb_after.java,True,chromium,108,107
448,46dda827_cf9d4b8b,422.0,Done,422.0,422.0,46dda827_cf9d4b8b_before.java,46dda827_cf9d4b8b_after.java,True,chromium,108,107
449,3049ad68_f8810d28,114.0,"Rather than not test the new feature, I propose that you create a helper function that either tests for infobar or the new type of message depending on which feature is enabled.

Otherwise, we don't know if the experiment is working as intended.",114.0,114.0,3049ad68_f8810d28_before.java,3049ad68_f8810d28_after.java,True,chromium,5,13
450,af7c5cc9_ee5cd3fe,454.0,Not blocking since this tech debt already exists... but if we're going for actual toolbar height we should get from BrowserControlsStateProvider#getTopControlsHeight(): https://source.chromium.org/chromium/chromium/src/+/main:chrome/browser/browser_controls/android/java/src/org/chromium/chrome/browser/browser_controls/BrowserControlsStateProvider.java;l=65?q=browsercontrols&ss=chromium,453.0,454.0,af7c5cc9_ee5cd3fe_before.java,af7c5cc9_ee5cd3fe_after.java,True,chromium,60,60
451,0d2175de_cb9dab25,454.0,Done,453.0,454.0,0d2175de_cb9dab25_before.java,0d2175de_cb9dab25_after.java,True,chromium,60,60
452,6bede602_2636607c,51.0,"It looks like we have a duplicate dimension for IPHCommandBuilder.java.

Does //chrome/browser/feed/ depend on //chrome/browser/user_education/? If so, could it just use the dimen defined there for iph_text_bubble_menu_anchor_y_inset?",51.0,51.0,6bede602_2636607c_before.java,6bede602_2636607c_after.java,True,chromium,0,0
453,f00c5d57_889f17eb,51.0,Done,51.0,51.0,f00c5d57_889f17eb_before.java,f00c5d57_889f17eb_after.java,True,chromium,0,0
454,21618913_732a0ae6,52.0,"Is this meant to be the main top toolbar height?

If so, we shouldn't define here for a few reasons:
1) Top toolbar height can actually change depending on if status indicator is visible
2) There's nothing guaranteeing this dimension stays in-sync e.g. if we change the value in the future.

Could we pass actual height Java instead of using XML dimen?

Or we might leave a piece of ""glue"" code behind in //chrome/android/ that provides an inset for when to show the Feed IPH that can be aware of the top toolbar.

From a design perspective, there's the Feed content shouldn't need to directly know about the main browser top toolbar, since that implies the Feed must always be shown inside a tab with a top toolbar at some fixed height.",52.0,52.0,21618913_732a0ae6_before.java,21618913_732a0ae6_after.java,True,chromium,0,0
455,a938e8f9_1d12d3f2,52.0,"> Could we pass actual height Java instead of using XML dimen?

ah, sorry, I'm already doing that because you suggested it in the doc. I just forgot to remove this line.",52.0,52.0,a938e8f9_1d12d3f2_before.java,a938e8f9_1d12d3f2_after.java,True,chromium,0,0
456,02311794_76d0061f,163.0,can this be in the section header model instead? it could be an immutable field in the model,163.0,163.0,02311794_76d0061f_before.java,02311794_76d0061f_after.java,True,chromium,33,34
457,35ae1d76_55aec7e7,163.0,Done,163.0,163.0,35ae1d76_55aec7e7_before.java,35ae1d76_55aec7e7_after.java,True,chromium,33,34
458,35a85279_38956b1f,29.0,I suggest breaking into several tests. If a regression is introduced it can be difficult to resolve since a failed test will block the other assertions from happening.,,,35a85279_38956b1f_before.java,35a85279_38956b1f_after.java,True,chromium,0,3
459,c0b00fef_a2f2e3e7,29.0,Done,,,c0b00fef_a2f2e3e7_before.java,c0b00fef_a2f2e3e7_after.java,True,chromium,0,3
460,68624e02_5b8a0ddc,149.0,nit: perhaps using idpUrl directly?,149.0,149.0,68624e02_5b8a0ddc_before.java,68624e02_5b8a0ddc_after.java,True,chromium,17,17
461,90ccb329_62583000,149.0,Good point,149.0,149.0,90ccb329_62583000_before.java,90ccb329_62583000_after.java,True,chromium,17,17
462,955d9e67_8f8b5d46,55.0,s/requesting/relying,55.0,55.0,955d9e67_8f8b5d46_before.java,955d9e67_8f8b5d46_after.java,True,chromium,0,0
463,f2f612f4_7d24c57f,55.0,Done,55.0,55.0,f2f612f4_7d24c57f_before.java,f2f612f4_7d24c57f_after.java,True,chromium,0,0
464,0875bccd_dd67b0e3,58.0,s/requesting/relying,58.0,58.0,0875bccd_dd67b0e3_before.java,0875bccd_dd67b0e3_after.java,True,chromium,0,0
465,54082f37_bf62545b,58.0,Done,58.0,58.0,54082f37_bf62545b_before.java,54082f37_bf62545b_after.java,True,chromium,0,0
466,8625c46c_8bb38050,163.0,"nit: This is the coolest looking bad variable name I've seen to date.
I am not even mad...",163.0,163.0,8625c46c_8bb38050_before.java,8625c46c_8bb38050_after.java,True,chromium,41,40
467,2eeef766_6022c071,163.0,Done,163.0,163.0,2eeef766_6022c071_before.java,2eeef766_6022c071_after.java,True,chromium,41,40
468,747fe5c1_4587b1c3,74.0,"Hmm, does this logic belong in setBookmarkId?",74.0,74.0,747fe5c1_4587b1c3_before.java,747fe5c1_4587b1c3_after.java,True,chromium,9,9
469,12a673a2_6c1414c0,74.0,Ack,74.0,74.0,12a673a2_6c1414c0_before.java,12a673a2_6c1414c0_after.java,True,chromium,9,9
470,4adb3fca_49d4e601,74.0,setBookmarkId is existing infra to bind the base bookmark views (in super.setBookmarkId) so I think this is the best place.,74.0,74.0,4adb3fca_49d4e601_before.java,4adb3fca_49d4e601_after.java,True,chromium,9,9
471,51efc19d_295b4010,78.0,nit: add a TODO to use the cluster_id instead when that's ready.,78.0,78.0,51efc19d_295b4010_before.java,51efc19d_295b4010_after.java,True,chromium,9,9
472,50f11161_f59b5d6c,78.0,Done,78.0,78.0,50f11161_f59b5d6c_before.java,50f11161_f59b5d6c_after.java,True,chromium,9,9
473,a0ec1c79_7a3c58d7,147.0,Keep in mind that SubscriptionsManager doesn't retry failed attempts.,147.0,147.0,a0ec1c79_7a3c58d7_before.java,a0ec1c79_7a3c58d7_after.java,True,chromium,9,9
474,08b51dbe_92e1855b,147.0,Ack,147.0,147.0,08b51dbe_92e1855b_before.java,08b51dbe_92e1855b_after.java,True,chromium,9,9
475,a75784ba_f5465083,79.0,nit: Go with Long.toString(),79.0,79.0,a75784ba_f5465083_before.java,a75784ba_f5465083_after.java,True,chromium,9,10
476,a379d938_c1e8199d,79.0,Done,79.0,79.0,a379d938_c1e8199d_before.java,a379d938_c1e8199d_after.java,True,chromium,9,10
477,f152f6f4_427c2465,145.0,"Not sure if I am seeing right, but can this be replaced with call to:

  updatePriceTrackingImageForCurrentState(); 
?",143.0,145.0,f152f6f4_427c2465_before.java,f152f6f4_427c2465_after.java,True,chromium,9,10
478,fabbfed8_1db99aaf,145.0,nice catch!,143.0,145.0,fabbfed8_1db99aaf_before.java,fabbfed8_1db99aaf_after.java,True,chromium,9,10
479,3d08be36_1da91dba,54.0,"This is not used. Did you mean:

  subscription.getType(), /* forceFetch= */ false, (existingSubscriptions) -> {
    boolean isPriceTracked = false;
    for (CommerceSubscription existingSubscription : existingSubscriptions) {
      if (existingSubscription.equals(subscription)) {
        isPriceTracked = true;
        break;
      }
    }

    callback.onResult(isPriceTracked);
  });
  
2 things that does for you is ensuring that the callback is only invoked once, if you don't do that, you would invoked it twice if a single item is found (true then false).",54.0,54.0,3d08be36_1da91dba_before.java,3d08be36_1da91dba_after.java,True,chromium,1,1
480,e53c0d67_d0297dd0,54.0,I think I rewrote it and left that variable hanging there.,54.0,54.0,e53c0d67_d0297dd0_before.java,e53c0d67_d0297dd0_after.java,True,chromium,1,1
481,ca71b42b_c66fca0b,54.0,"I am still curious if you intended to return; from inside of the if in 56-58.
If you don't your callback may be called twice.",54.0,54.0,ca71b42b_c66fca0b_before.java,ca71b42b_c66fca0b_after.java,True,chromium,1,1
482,7837b3bc_fd6756d0,174.0,Am I assuming correctly that nothing will access/use/serialize UiThreadTaskTraits.DEFAULT before this point?,,,7837b3bc_fd6756d0_before.java,7837b3bc_fd6756d0_after.java,True,chromium,14,14
483,33f2d990_7add9d10,174.0,"Thanks! To test this out, I gave DEFAULT a new sentinel task priority in its definition and had TaskRunnerImpl.java assert false if it was created with this priority (i.e., before the call to ProcessInitializationHandler#handlePreNativeInitialization() was run). Note that AFAICT TaskRunnerImpl.java is the only entity that actually *uses* the TaskTraits.mPriority field (to determine thread priority when running tasks pre-native and to pass to native when obtaining the backing native task runner).

The bad news is that UiThreadTaskTraitsImpl has a static block that calls BrowserTaskExecutor.register(), so in fact the BrowserTaskExecutor can be registered effectively at any time :P. The good news is that apart from debug-only code in BrowserStartupControllerImpl.java, nothing creates a TaskRunnerImpl with UiThreadTaskTraits.DEFAULT before this call, i.e., once I commented that call out, the browser started up fine. You can see this test code in the diff between PS5 and PS6 if you're curious.",,,33f2d990_7add9d10_before.java,33f2d990_7add9d10_after.java,True,chromium,14,14
484,cb6651d5_d812391f,174.0,"Alright, thanks for checking! I guess this really only matters while the experiment is active, so there's no major risk of new tasks sneaking in here in the future.",,,cb6651d5_d812391f_before.java,cb6651d5_d812391f_after.java,True,chromium,14,14
485,aa60f15f_4cb8f918,174.0,"My (admittedly hopeful) thinking was based on the fact that this is before the BrowserTaskExecutor.register() call on line 178 below.

If it turns out that this might get used before this point, I imagine it's not a big deal (e.g., it's only here that we determine whether bootstrap tasks should be prioritized as well). My bigger concern is ensuring that the value of UiThreadTaskTraits.DEFAULT wasn't somehow cached before this point and then the cached value used in a way that broke the expected effect of this change.",,,aa60f15f_4cb8f918_before.java,aa60f15f_4cb8f918_after.java,True,chromium,14,14
486,5490bd15_1acb29ec,174.0,I don't think there's any way to guarantee that since all the task posting APIs are static :\,,,5490bd15_1acb29ec_before.java,5490bd15_1acb29ec_after.java,True,chromium,14,14
487,199413a2_0ca775dc,174.0,"AFAIK it shouldn't be cached, but it might be worth locally adding some logging to PostTask and here and checking not too many things end up posting with the old value of DEFAULT.",,,199413a2_0ca775dc_before.java,199413a2_0ca775dc_after.java,True,chromium,14,14
488,52fc5b96_707de4da,554.0,Nit: do you still need to add it for this test since you have added it for the entire test suite?,554.0,554.0,52fc5b96_707de4da_before.java,52fc5b96_707de4da_after.java,True,chromium,54,54
489,4af3baa4_739c14b8,554.0,"Oops, I forgot to remove this.",554.0,554.0,4af3baa4_739c14b8_before.java,4af3baa4_739c14b8_after.java,True,chromium,54,54
490,46ee8405_b0b7b528,191.0,it'd be nice if you can put this string in a const somewhere shareable between the two services if possible.,191.0,191.0,46ee8405_b0b7b528_before.java,46ee8405_b0b7b528_after.java,True,chromium,11,11
491,ed9c5939_fd37b979,191.0,Done,191.0,191.0,ed9c5939_fd37b979_before.java,ed9c5939_fd37b979_after.java,True,chromium,11,11
492,b76dd1cf_89d7ac26,91.0,nit: I don't think you need types in lambda expressions.,91.0,91.0,b76dd1cf_89d7ac26_before.java,b76dd1cf_89d7ac26_after.java,True,chromium,11,11
493,8e05a078_cb4daa61,91.0,Done,91.0,91.0,8e05a078_cb4daa61_before.java,8e05a078_cb4daa61_after.java,True,chromium,11,11
494,ebc05620_e475232d,115.0,"don't store it as class member, pass it as an argument to maybeStartUpdates();",115.0,115.0,ebc05620_e475232d_before.java,ebc05620_e475232d_after.java,True,chromium,13,11
495,2e18c55e_f50423f0,115.0,Done,115.0,115.0,2e18c55e_f50423f0_before.java,2e18c55e_f50423f0_after.java,True,chromium,13,11
496,d864059b_f6df35c2,156.0,nit: javadoc,156.0,156.0,d864059b_f6df35c2_before.java,d864059b_f6df35c2_after.java,True,chromium,9,11
497,272df415_b0f4821d,11.0,nit: remove since you don't know in what order someone reads the docs.,11.0,11.0,272df415_b0f4821d_before.java,272df415_b0f4821d_after.java,True,chromium,2,2
498,46fcf23f_c487e8f0,11.0,Done,11.0,11.0,46fcf23f_c487e8f0_before.java,46fcf23f_c487e8f0_after.java,True,chromium,2,2
499,4a35c694_435207c5,24.0,"nit: do you want to make this protected or (package) private? Otherwise, users may try to create and hold their own factories.",24.0,24.0,4a35c694_435207c5_before.java,4a35c694_435207c5_after.java,True,chromium,2,2
500,a1c84acb_be782ca6,24.0,"It is package private, unless I'm misunderstanding something.",24.0,24.0,a1c84acb_be782ca6_before.java,a1c84acb_be782ca6_after.java,True,chromium,2,2
501,82ec910c_e7625745,24.0,"Nope, everything allright, sorry.
(Not sure what past-me thought about ... maybe I mistook the createLauncher method for a constructor but that one can't easily be restricted.)",24.0,24.0,82ec910c_e7625745_before.java,82ec910c_e7625745_after.java,True,chromium,2,2
502,f9a8c178_d6ae6857,9.0,nitty nit: build files/configurations,9.0,9.0,f9a8c178_d6ae6857_before.java,f9a8c178_d6ae6857_after.java,True,chromium,0,0
503,aeb29274_b8dc4997,9.0,Done,9.0,9.0,aeb29274_b8dc4997_before.java,aeb29274_b8dc4997_after.java,True,chromium,0,0
504,ed1b3ba4_685d6ec1,38.0,"I feel that we should create a launcher without the feature. It only waste a couple of resources but even worse is that it may fail if the creation is non-trivial.
Even calls that just depend on a specific GMS version without actually invoking an API may meet that bar.",38.0,38.0,ed1b3ba4_685d6ec1_before.java,ed1b3ba4_685d6ec1_after.java,True,chromium,1,1
505,566c521e_b7472b83,38.0,"The creation is currently trivial, but won't necessarily stay the same, so that makes sense. Changed.",38.0,38.0,566c521e_b7472b83_before.java,566c521e_b7472b83_after.java,True,chromium,1,1
506,3ec2765a_7933771b,15.0,"What happens when you have a fillColor and a tint? I guess I had previously thought we'd fillColor w/ white, and then tint with the actual color. And I had assumed it was some sort of color multiplication going on. But maybe I'm totally wrong?

Is there a reason you're doing fillColor+tint? Is there some configuration this doesn't work in? I feel like you've explained this to me before, I'm sorry I cannot seem to remember this.",15.0,15.0,3ec2765a_7933771b_before.java,3ec2765a_7933771b_after.java,True,chromium,0,0
507,5d5e3986_6d80396b,15.0,"The default tint mode is src_in, so the fillColor doesn't matter if the tint works correctly.

Best case: The drawable is tinted to the color specified with android:tint.
Worst case: The theme doesn't have the attribute referenced by android:tint, and we get a magenta color or a crash, I'm not sure.

I don't really know if there is a difference between making the fillColor white vs default_icon_color_blue_baseline. I guess with default_icon_color_blue_baseline, Android Studio can preview the icon with the baseline color.",15.0,15.0,5d5e3986_6d80396b_before.java,5d5e3986_6d80396b_after.java,True,chromium,0,0
508,8a8f4843_fd3def0a,15.0,"Having preview work is nice.

I worry a bit that having two lines here, one of which does mostly nothing, isn't great. Going to be confusing to others writing new drawables why these choices were made. Any ideas to alleviate that?

Could we have a color name for fillColor like, @color/layout_preview_blue that's or something? And all drawables use these layout_preview_* only colors? Or maybe leave a code comment next to all of these?",15.0,15.0,8a8f4843_fd3def0a_before.java,8a8f4843_fd3def0a_after.java,True,chromium,0,0
509,eae9f73d_340c6f68,15.0,"We could use the original colors that these drawables come with, @android:color/white for this one for example. It might make it more obvious that this is the default color.",15.0,15.0,eae9f73d_340c6f68_before.java,eae9f73d_340c6f68_after.java,True,chromium,0,0
510,be6aae91_a477cd77,15.0,"Hmm, I'm not sure I follow exactly. It seems like @android:color/white would be less obvious it's the default, than @color/layout_preview_white. Since the layout_preview_* name would be, at least, attempting, to explain the situation. Cannot use 'default' in the name, since that term is heavily overloaded currently.",15.0,15.0,be6aae91_a477cd77_before.java,be6aae91_a477cd77_after.java,True,chromium,0,0
511,a0513b57_46f51f80,36.0,"Oooh, this is from the ThemeRefactor feature. If this is causing us pain right now, should we just delete all the old code?",36.0,36.0,a0513b57_46f51f80_before.java,a0513b57_46f51f80_after.java,True,chromium,0,0
512,e2777c41_fa6cf04e,36.0,why not *_color_accent1_baseline?,36.0,36.0,e2777c41_fa6cf04e_before.java,e2777c41_fa6cf04e_after.java,True,chromium,0,0
513,3681c36a_fe16a87f,36.0,Ack,36.0,36.0,3681c36a_fe16a87f_before.java,3681c36a_fe16a87f_after.java,True,chromium,0,0
514,899ba3e6_b9523be5,36.0,"It's not too painful, so we should be fine for now.",36.0,36.0,899ba3e6_b9523be5_before.java,899ba3e6_b9523be5_after.java,True,chromium,0,0
515,fd0f0ea5_2ab8a5c6,36.0,"Well I thought we'd use primary everywhere for this, but that ship seems to have sailed. I'd prefer accent1 over blue.",36.0,36.0,fd0f0ea5_2ab8a5c6_before.java,fd0f0ea5_2ab8a5c6_after.java,True,chromium,0,0
516,dbb9ddd3_84774755,36.0,That also works. I just quickly added baseline at the end here. Any preference?,36.0,36.0,dbb9ddd3_84774755_before.java,dbb9ddd3_84774755_after.java,True,chromium,0,0
517,500ecbc9_e5a4a365,36.0,Done,36.0,36.0,500ecbc9_e5a4a365_before.java,500ecbc9_e5a4a365_after.java,True,chromium,0,0
518,dd6328d6_b4b6bc44,7.0,"These are completely useless now that we build/lint with min sdk above 20, right?",7.0,7.0,dd6328d6_b4b6bc44_before.java,dd6328d6_b4b6bc44_after.java,True,chromium,0,0
519,ec716cb2_6879d128,7.0,"These have been useless for a while. Would you like them cleaned up in this CL, or should we have a follow up?",7.0,7.0,ec716cb2_6879d128_before.java,ec716cb2_6879d128_after.java,True,chromium,0,0
520,2ea52bc3_10f064d0,7.0,Let's not do it in this CL.,7.0,7.0,2ea52bc3_10f064d0_before.java,2ea52bc3_10f064d0_after.java,True,chromium,0,0
521,c97453b6_f22e5d1b,14.0,This thing doesn't get the formatting fix?,14.0,14.0,c97453b6_f22e5d1b_before.java,c97453b6_f22e5d1b_after.java,True,chromium,0,0
522,d3ae7f94_26467fb6,14.0,"I didn't really pay attention. I can try to format everything in this CL, but vector drawables are usually badly formatted anyway.",14.0,14.0,d3ae7f94_26467fb6_before.java,d3ae7f94_26467fb6_after.java,True,chromium,0,0
523,89390022_6ceb1777,14.0,Ack,14.0,14.0,89390022_6ceb1777_before.java,89390022_6ceb1777_after.java,True,chromium,0,0
524,9caca0d6_38760b38,16.0,"Uh oh. Are we just punting on this whole drawable, and leaving it for future work?",16.0,16.0,9caca0d6_38760b38_before.java,9caca0d6_38760b38_after.java,True,chromium,0,0
525,c7d7b09e_6c5a8ac8,16.0,"This would remove the indirection through the material styles, which could cause us to diverge, especially if they do something that's breaking. But on the other hand, we wouldn't immediately break.",16.0,16.0,c7d7b09e_6c5a8ac8_before.java,c7d7b09e_6c5a8ac8_after.java,True,chromium,0,0
526,b812874c_47d8c278,16.0,"This is going to be tricky. I thought the reason we cannot just reference system_accent1_50 is because it won't be there on the old systems. But maybe I'm mistaken?

colorOnPrimaryContainer is accent1_100. We might need to loop UX in on the look of this, is see if that's okay? Could also theoretically use alpha to tone it down.

I think not migrating this drawable in this CL is reasonable.",16.0,16.0,b812874c_47d8c278_before.java,b812874c_47d8c278_after.java,True,chromium,0,0
527,16edaeae_82fb5012,16.0,"Wait, yeah. That would work. This... We don't need attrs if we directly pointed at system colors like this. What if we just did this for everything? Now that we've ""launched"" dynamic colors... Can we do this for everything?",16.0,16.0,16edaeae_82fb5012_before.java,16edaeae_82fb5012_after.java,True,chromium,0,0
528,55a21496_3d9de88f,16.0,"I don't know what to do with drawables like this. Let me see if I can use the system colors here [1].

[1] https://developer.android.com/reference/android/R.color#system_accent1_50",16.0,16.0,55a21496_3d9de88f_before.java,55a21496_3d9de88f_after.java,True,chromium,0,0
529,6630ab57_7036c237,16.0,Do you see any issues with adding a @color/accent1_50 that will point to system_accent1_50 in values-v31?,16.0,16.0,6630ab57_7036c237_before.java,6630ab57_7036c237_after.java,True,chromium,0,0
530,2c3f8c70_9d49ebe0,16.0,"Wait wait, if this is called outside of the current activities that we enable dynamic colors for, then it won't behave correctly, right?

Like if this gets used in SettingsActivity, and we don't enable DynamicColors for that activity, using @color/accent1_50 directly would erroneously tint this with dynamic colors.",16.0,16.0,2c3f8c70_9d49ebe0_before.java,2c3f8c70_9d49ebe0_after.java,True,chromium,0,0
531,527fbda7_d19391b1,13.0,Why no tint on this one?,13.0,13.0,527fbda7_d19391b1_before.java,527fbda7_d19391b1_after.java,True,chromium,0,0
532,9ff74c53_d608c255,13.0,"There are two separate paths with different colors here. If we tint this, we'll just get a solid circle.",13.0,13.0,9ff74c53_d608c255_before.java,9ff74c53_d608c255_after.java,True,chromium,0,0
533,268ca58a_b6e42f17,13.0,Ack,13.0,13.0,268ca58a_b6e42f17_before.java,268ca58a_b6e42f17_after.java,True,chromium,0,0
534,9ad46158_e1fa9c0a,14.0,"Wait, why is this baseline?",14.0,14.0,9ad46158_e1fa9c0a_before.java,9ad46158_e1fa9c0a_after.java,True,chromium,0,0
535,e698082d_b8ce1cd3,14.0,"This is a brand icon (G on round blue background), so I left it as is.",14.0,14.0,e698082d_b8ce1cd3_before.java,e698082d_b8ce1cd3_after.java,True,chromium,0,0
536,8e2ac651_4d37f6fe,14.0,Would it be prudent to open a bug to track this so we don't forget?,14.0,14.0,8e2ac651_4d37f6fe_before.java,8e2ac651_4d37f6fe_after.java,True,chromium,0,0
537,af88d1af_15fd83f8,19.0,"Looks like we are reimplementing the clock with this one...
What if instead we had getElapsedTimeMillis() for the difference between stop and start if it is not running and difference between now and start when it is?

Also, because I sense this could be used by Chrometto, I think offering multiple resolutions here might be better. (At least millis and nanos?) 

Maybe an interface-enum that allows us to specify that, or TimeUnit mentioned earlier?",19.0,19.0,af88d1af_15fd83f8_before.java,af88d1af_15fd83f8_after.java,True,chromium,0,0
538,7cfb0fb3_6b76a7f6,19.0,Done via getElapsedTime(TimeUnit timeUnit),19.0,19.0,7cfb0fb3_6b76a7f6_before.java,7cfb0fb3_6b76a7f6_after.java,True,chromium,0,0
539,7b37b24e_684ad68c,26.0,Thought about this for some time and I think we'd be better off if we had an explicit start() and stop(). -- Easier to spot cases when we are holding it wrong.,26.0,26.0,7b37b24e_684ad68c_before.java,7b37b24e_684ad68c_after.java,True,chromium,0,0
540,de4503c4_7f4f0383,26.0,Done,26.0,26.0,de4503c4_7f4f0383_before.java,de4503c4_7f4f0383_after.java,True,chromium,0,0
541,76a42ab6_b4474d2a,16.0,"Can we add tests for this implementation?

Should be easy, since you can mock timeSource.

Please cover
* start/stop/isrunning semantics.
* asserts.
* getelapsedtime when stopped and running.
* and conversions from the base using when getelapsedtime called.",16.0,16.0,76a42ab6_b4474d2a_before.java,76a42ab6_b4474d2a_after.java,True,chromium,5,5
542,c7cfe390_65982d3d,16.0,Done,16.0,16.0,c7cfe390_65982d3d_before.java,c7cfe390_65982d3d_after.java,True,chromium,5,5
543,e7c3c652_11c01b15,16.0,No the file is definitely missing. I'll figure it out.,16.0,16.0,e7c3c652_11c01b15_before.java,e7c3c652_11c01b15_after.java,True,chromium,5,5
544,fe5e21a9_20653a7d,16.0,Ack,16.0,16.0,fe5e21a9_20653a7d_before.java,fe5e21a9_20653a7d_after.java,True,chromium,5,5
545,0c26a124_307a7963,16.0,+1!,16.0,16.0,0c26a124_307a7963_before.java,0c26a124_307a7963_after.java,True,chromium,5,5
546,49288cb7_df3ac5f7,16.0,"Hey, it is possible you missed adding tests? (Or it is late and I am not seeing them.)",16.0,16.0,49288cb7_df3ac5f7_before.java,49288cb7_df3ac5f7_after.java,True,chromium,5,5
547,54758acf_75620236,16.0,Not really sure what happened so I rewrote the tests,16.0,16.0,54758acf_75620236_before.java,54758acf_75620236_after.java,True,chromium,5,5
548,b1339cbe_b5df4881,17.0,mTimeSourceTimeUnit?,17.0,17.0,b1339cbe_b5df4881_before.java,b1339cbe_b5df4881_after.java,True,chromium,5,5
549,f1ac0b2e_c4b328a2,17.0,How about mSourceTimeUnit?,17.0,17.0,f1ac0b2e_c4b328a2_before.java,f1ac0b2e_c4b328a2_after.java,True,chromium,5,5
550,4d4c9aaf_0df0c06e,19.0,"Would it make sense to group these members somewhat for clarity?
I.e.:
- mTimeSource, mTimeUnit
- mStartTime, mStopTime
- mIsRunning

Possibly merging the latter two.

Regardless, these members should have JavaDoc, particularly the time source an its timeUnit.

For mStopTime maybe mention that it's always reset on start? Well, I guess technically that doesn't matter since it's not in use unless !mIsRunning.",,,4d4c9aaf_0df0c06e_before.java,4d4c9aaf_0df0c06e_after.java,True,chromium,5,5
551,23083270_b7d3b739,19.0,Done,,,23083270_b7d3b739_before.java,23083270_b7d3b739_after.java,True,chromium,5,5
552,143d6f09_3232c2d8,24.0,Nit: End sentences with a period.,,,143d6f09_3232c2d8_before.java,143d6f09_3232c2d8_after.java,True,chromium,5,5
553,d93737be_cf1ef86e,24.0,Done,,,d93737be_cf1ef86e_before.java,d93737be_cf1ef86e_after.java,True,chromium,5,5
554,d6cd82f0_042beb3c,29.0,"Super tiny nit: Could we re-order line 29 and 30 to match the constructor? And also re-order the fields on line 17 and 18? It makes sense to me to have ""This is my time source and this is its timeunit"", in that order.",,,d6cd82f0_042beb3c_before.java,d6cd82f0_042beb3c_after.java,True,chromium,5,5
555,73e6e7ea_33bd360b,29.0,Done,,,73e6e7ea_33bd360b_before.java,73e6e7ea_33bd360b_after.java,True,chromium,5,5
556,e278e8b0_87d293ab,12.0,{@link SystemClock#currentThreadTimeMillis()},12.0,12.0,e278e8b0_87d293ab_before.java,e278e8b0_87d293ab_after.java,True,chromium,1,1
557,5e363c0e_425aac46,12.0,Done,12.0,12.0,5e363c0e_425aac46_before.java,5e363c0e_425aac46_after.java,True,chromium,1,1
558,f9da920e_3c75f00d,24.0,Documentation reminder: This reset also needs to be documented.,,,f9da920e_3c75f00d_before.java,f9da920e_3c75f00d_after.java,True,chromium,0,1
559,fed68b4c_2fdb6e85,24.0,Done,,,fed68b4c_2fdb6e85_before.java,fed68b4c_2fdb6e85_after.java,True,chromium,0,1
560,8bcd4fc2_ca8111b2,3.0,Add header link: [elapsed time](#elapsed-time),3.0,3.0,8bcd4fc2_ca8111b2_before.java,8bcd4fc2_ca8111b2_after.java,True,chromium,0,0
561,2e38d70a_0fde3f39,3.0,Add header link: [wall time](#wall-time),3.0,3.0,2e38d70a_0fde3f39_before.java,2e38d70a_0fde3f39_after.java,True,chromium,0,0
562,3445eda7_bdeeb0cb,3.0,Done,3.0,3.0,3445eda7_bdeeb0cb_before.java,3445eda7_bdeeb0cb_after.java,True,chromium,0,0
563,b70cf39e_93b50d66,3.0,Done,3.0,3.0,b70cf39e_93b50d66_before.java,b70cf39e_93b50d66_after.java,True,chromium,0,0
564,f2585585_5fd31056,4.0,"Add a new header before this:

## Wall time
Wall time is the user visible ...",3.0,4.0,f2585585_5fd31056_before.java,f2585585_5fd31056_after.java,True,chromium,0,0
565,3d66e8e8_3e34ddcf,4.0,Done,3.0,4.0,3d66e8e8_3e34ddcf_before.java,3d66e8e8_3e34ddcf_after.java,True,chromium,0,0
566,6376a701_e3175370,5.0,"Maybe add a parenthesis here with ""(e.g. daylight saving time, user changing time on their device)""",5.0,5.0,6376a701_e3175370_before.java,6376a701_e3175370_after.java,True,chromium,0,0
567,0b5e6ad6_78b35dd0,5.0,Done,5.0,5.0,0b5e6ad6_78b35dd0_before.java,0b5e6ad6_78b35dd0_after.java,True,chromium,0,0
568,e5756b62_ab0d88e9,6.0,Get rid of the trailing whitespace in this file,,,e5756b62_ab0d88e9_before.java,e5756b62_ab0d88e9_after.java,True,chromium,0,0
569,fd1830b0_af5800a0,6.0,"Move ""If you do..."" to a new paragraph to make it stand out and easy to parse.",6.0,6.0,fd1830b0_af5800a0_before.java,fd1830b0_af5800a0_after.java,True,chromium,0,0
570,a091ab78_c57f4c1d,6.0,Done,,,a091ab78_c57f4c1d_before.java,a091ab78_c57f4c1d_after.java,True,chromium,0,0
571,d6c297d6_e18ec1e3,6.0,Done,6.0,6.0,d6c297d6_e18ec1e3_before.java,d6c297d6_e18ec1e3_after.java,True,chromium,0,0
572,54578f8a_0c2d0c32,7.0,""", or use `java.util.Date`.""",7.0,7.0,54578f8a_0c2d0c32_before.java,54578f8a_0c2d0c32_after.java,True,chromium,0,0
573,b2062bad_6ccf7d73,7.0,Done,7.0,7.0,b2062bad_6ccf7d73_before.java,b2062bad_6ccf7d73_after.java,True,chromium,0,0
574,19c27c54_255b0871,8.0,"Add a new header before this:

## Elapsed time
Elapsed time is a measurement ...",8.0,8.0,19c27c54_255b0871_before.java,19c27c54_255b0871_after.java,True,chromium,0,0
575,a0848967_1f7b8dae,8.0,"Remove "", in contrast,"" now that it is in its own section and clearly different.",8.0,8.0,a0848967_1f7b8dae_before.java,a0848967_1f7b8dae_after.java,True,chromium,0,0
576,dc4a917f_93da07ca,8.0,Done,8.0,8.0,dc4a917f_93da07ca_before.java,dc4a917f_93da07ca_after.java,True,chromium,0,0
577,2d54bb74_b640cb3a,8.0,Done,8.0,8.0,2d54bb74_b640cb3a_before.java,2d54bb74_b640cb3a_after.java,True,chromium,0,0
578,5910891f_39da9dc5,12.0,Prefix all these with `SystemClock.`,12.0,12.0,5910891f_39da9dc5_before.java,5910891f_39da9dc5_after.java,True,chromium,0,0
579,574e238a_62764b86,12.0,Done,12.0,12.0,574e238a_62764b86_before.java,574e238a_62764b86_after.java,True,chromium,0,0
580,ec42b208_412e4064,27.0,`TimeUnit`,27.0,27.0,ec42b208_412e4064_before.java,ec42b208_412e4064_after.java,True,chromium,0,0
581,645745e6_2e6c5ec4,27.0,Done,27.0,27.0,645745e6_2e6c5ec4_before.java,645745e6_2e6c5ec4_after.java,True,chromium,0,0
582,18c3ed96_5e123d01,29.0,Linkify?,29.0,29.0,18c3ed96_5e123d01_before.java,18c3ed96_5e123d01_after.java,True,chromium,0,0
583,a2fa83fd_cfa2655b,29.0,Done,29.0,29.0,a2fa83fd_cfa2655b_before.java,a2fa83fd_cfa2655b_after.java,True,chromium,0,0
584,591447ff_2f028a3f,37.0,"""but it""?",37.0,37.0,591447ff_2f028a3f_before.java,591447ff_2f028a3f_after.java,True,chromium,0,0
585,735a0986_af98e472,37.0,Done,37.0,37.0,735a0986_af98e472_before.java,735a0986_af98e472_after.java,True,chromium,0,0
586,6b11ffd0_67874ef4,47.0,Please add a timer for testing here for completeness.,,,6b11ffd0_67874ef4_before.java,6b11ffd0_67874ef4_after.java,True,chromium,0,0
587,519ea767_06b83dd4,47.0,Done,,,519ea767_06b83dd4_before.java,519ea767_06b83dd4_after.java,True,chromium,0,0
588,6b9f80d5_5ae64535,49.0,Was this intended? backslash in front of a *,49.0,49.0,6b9f80d5_5ae64535_before.java,6b9f80d5_5ae64535_after.java,True,chromium,0,0
589,75675228_9bda6ba6,49.0,Sounds good if that is the case.,49.0,49.0,75675228_9bda6ba6_before.java,75675228_9bda6ba6_after.java,True,chromium,0,0
590,25bd5b0f_bc10efbe,49.0,"I think it's to create a literal '*' to refer back to the ""definitely*"" above. I think visually this in fact looks OK.",49.0,49.0,25bd5b0f_bc10efbe_before.java,25bd5b0f_bc10efbe_after.java,True,chromium,0,0
591,cfa59390_8d8a63e1,49.0,"You can always see the current version of the README.md rendered on gitiles through the ""gitiles"" link above, or by clicking on the SHA1 sum next to the patch set list on the main page of the review (and then click on the relevant file). For patch set 6, you can see the rendered markdown here:
https://chromium.googlesource.com/chromium/src/+/refs/changes/99/2767399/6/base/android/java/src/org/chromium/base/time/README.md",49.0,49.0,cfa59390_8d8a63e1_before.java,cfa59390_8d8a63e1_after.java,True,chromium,0,0
592,0e1eb6dd_f5fb34e8,49.0,The more you know... Thanks.,49.0,49.0,0e1eb6dd_f5fb34e8_before.java,0e1eb6dd_f5fb34e8_after.java,True,chromium,0,0
593,46e26b57_311af072,52.0,Missing period.,,,46e26b57_311af072_before.java,46e26b57_311af072_after.java,True,chromium,0,0
594,fff6b0ac_10048844,52.0,Done,,,fff6b0ac_10048844_before.java,fff6b0ac_10048844_after.java,True,chromium,0,0
595,d7bdfea7_a618e561,18.0,Is this intended?,18.0,18.0,d7bdfea7_a618e561_before.java,d7bdfea7_a618e561_after.java,True,chromium,0,0
596,d97efcb9_57c681a7,18.0,The colon is; the bracket wasn't,18.0,18.0,d97efcb9_57c681a7_before.java,d97efcb9_57c681a7_after.java,True,chromium,0,0
597,20467383_a18da2d2,18.0,Ack,18.0,18.0,20467383_a18da2d2_before.java,20467383_a18da2d2_after.java,True,chromium,0,0
598,9fd4ae29_0eeebb38,19.0,This is one brace too many.,19.0,19.0,9fd4ae29_0eeebb38_before.java,9fd4ae29_0eeebb38_after.java,True,chromium,0,0
599,5dcbc857_0dea831e,19.0,Done,19.0,19.0,5dcbc857_0dea831e_before.java,5dcbc857_0dea831e_after.java,True,chromium,0,0
600,44408a69_73fed850,20.0,remove: e,20.0,20.0,44408a69_73fed850_before.java,44408a69_73fed850_after.java,True,chromium,0,0
601,6a80db7b_97ade784,20.0,Done,20.0,20.0,6a80db7b_97ade784_before.java,6a80db7b_97ade784_after.java,True,chromium,0,0
602,abe2f583_fe58a620,58.0,"Close the tick at the end.
Also this one link doesn't work... could be that you have to back out quite a bit to make it work, or maybe // to open up will work better?",58.0,58.0,abe2f583_fe58a620_before.java,abe2f583_fe58a620_after.java,True,chromium,0,0
603,546e8a56_7bc39700,58.0,Done,58.0,58.0,546e8a56_7bc39700_before.java,546e8a56_7bc39700_after.java,True,chromium,0,0
604,7a2683e0_5e1f7cb3,25.0,Documentation reminder: Update based on rounding-discussion.,25.0,25.0,7a2683e0_5e1f7cb3_before.java,7a2683e0_5e1f7cb3_after.java,True,chromium,0,0
605,b1ed5fb7_1b009882,25.0,"Should that be mentioned explicitly in README.md as well maybe?
That is with the comment of why we round down.",25.0,25.0,b1ed5fb7_1b009882_before.java,b1ed5fb7_1b009882_after.java,True,chromium,0,0
606,17114cd1_0e84648b,25.0,Done,25.0,25.0,17114cd1_0e84648b_before.java,17114cd1_0e84648b_after.java,True,chromium,0,0
607,196f8b15_3a202c96,13.0,s/should/must/,13.0,13.0,196f8b15_3a202c96_before.java,196f8b15_3a202c96_after.java,True,chromium,0,0
608,b4faf1dd_886a72ce,13.0,Done,13.0,13.0,b4faf1dd_886a72ce_before.java,b4faf1dd_886a72ce_after.java,True,chromium,0,0
609,7ff7df14_fe757bb1,17.0,"the ""to 0"" here feels like an implementation detail. When I think about it, I think the important message we want to convey is that when you invoke start(), the timer resets and acts as if it is the first time we call start.",17.0,17.0,7ff7df14_fe757bb1_before.java,7ff7df14_fe757bb1_after.java,True,chromium,0,0
610,18db711d_4ab3c420,17.0,Done,17.0,17.0,18db711d_4ab3c420_before.java,18db711d_4ab3c420_after.java,True,chromium,0,0
611,c075c438_4da2be8c,20.0,"Since we have an assert that calling start() twice or stop() twice consecutively should fail, we should document that in start() and stop().",,,c075c438_4da2be8c_before.java,c075c438_4da2be8c_after.java,True,chromium,0,0
612,fae0cf6d_a3b0713d,20.0,Done,,,fae0cf6d_a3b0713d_before.java,fae0cf6d_a3b0713d_after.java,True,chromium,0,0
613,b0e86d46_2d78a3af,22.0,"Do we want to mention that after stopping the timer, you can use getElapsedTime() to get what the time stopped at?",,,b0e86d46_2d78a3af_before.java,b0e86d46_2d78a3af_after.java,True,chromium,0,0
614,0d778835_1ffc66bb,22.0,Done,,,0d778835_1ffc66bb_before.java,0d778835_1ffc66bb_after.java,True,chromium,0,0
615,189029e9_fa8ea03c,33.0,What should happen if TimeUnit is more detailed than what the source can provide?,33.0,33.0,189029e9_fa8ea03c_before.java,189029e9_fa8ea03c_after.java,True,chromium,0,0
616,2079aca1_f21cd1a1,33.0,"I'd say in that case you get what you ask for... e.g.

  1 ms = 1000 ns.

Meaning it is very nicely rounded... no?",33.0,33.0,2079aca1_f21cd1a1_before.java,2079aca1_f21cd1a1_after.java,True,chromium,0,0
617,d37494e7_cb075a61,33.0,I think you're right. This also means that it'll probably just work as expected.,33.0,33.0,d37494e7_cb075a61_before.java,d37494e7_cb075a61_after.java,True,chromium,0,0
618,84c3aaee_275895ef,33.0,The added tests should document this,33.0,33.0,84c3aaee_275895ef_before.java,84c3aaee_275895ef_after.java,True,chromium,0,0
619,3cbf1f32_a6636c9f,12.0,"Let's follow Tommy's recommendation here and use {SystemClock#uptimeMillis()}.
applies to the other timers.",12.0,12.0,3cbf1f32_a6636c9f_before.java,3cbf1f32_a6636c9f_after.java,True,chromium,1,1
620,e97dc7ec_1ccbc349,12.0,Done,12.0,12.0,e97dc7ec_1ccbc349_before.java,e97dc7ec_1ccbc349_after.java,True,chromium,1,1
621,ba312727_05df0c7c,88.0,Please call destroy() when hiding the Start surface.,88.0,88.0,ba312727_05df0c7c_before.java,ba312727_05df0c7c_after.java,True,chromium,4,5
622,79032eef_8569c634,88.0,Done,88.0,88.0,79032eef_8569c634_before.java,79032eef_8569c634_after.java,True,chromium,4,5
623,b175393d_0e602964,88.0,Good point! LogoBridge is created by ToolbarManager which cannot access hiding start surface. So I call destroy() in ToolbarManager#destroy.,88.0,88.0,b175393d_0e602964_before.java,b175393d_0e602964_after.java,True,chromium,4,5
624,ac1d6eb9_3cebb907,59.0,Update annotations to @Nullable and JavaDocs to indicate API contract when any of these params are null,59.0,59.0,ac1d6eb9_3cebb907_before.java,ac1d6eb9_3cebb907_after.java,True,chromium,3,4
625,e6eab77e_795760d9,76.0,"How would the logo get clicked if the View is null?

Ideally, we wouldn't hook up a click listener or would keep clickable set to false if clicking does nothing.",76.0,76.0,e6eab77e_795760d9_before.java,e6eab77e_795760d9_after.java,True,chromium,3,4
626,910d6eac_88ea0328,1514.0,Do you need to register here again?,1514.0,1514.0,910d6eac_88ea0328_before.java,910d6eac_88ea0328_after.java,True,chromium,76,76
627,637ab5d2_8f95fb53,1514.0,Done,1514.0,1514.0,637ab5d2_8f95fb53_before.java,637ab5d2_8f95fb53_after.java,True,chromium,76,76
628,21b9b98c_6a1df9a3,1514.0,"I tried to remove this line and it seems not work. 

I notice that NTP also calls this in onTemplateURLServiceChanged()
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/ntp/NewTabPage.java;drc=8f95b5eab2797a3e26bba299f3b0df85bfc98bf5;l=798

This is not register the observer, but trigger the observer to fetch current logo.",1514.0,1514.0,21b9b98c_6a1df9a3_before.java,21b9b98c_6a1df9a3_after.java,True,chromium,76,76
629,7e161832_e0bad736,928.0,Ditto here. Trigger the observer to fetch current logo.,,,7e161832_e0bad736_before.java,7e161832_e0bad736_after.java,True,chromium,86,76
630,a7fe303d_ab0c9ed3,928.0,"Maybe when leaving the start surface, we should call destroy() as well. I think we can have a simplified LogoDelegateImpl or maybe just reuse it, instead of creating the mLogoBridge in ToolbarManager. If the changes in here is simple enough, I am fine to leave the code without a new LogoDelegateImpl though.",,,a7fe303d_ab0c9ed3_before.java,a7fe303d_ab0c9ed3_after.java,True,chromium,86,76
631,e6be98ab_547c1906,928.0,"I remove this call in onStartSurfaceStateChanged() here. 

Instead, I add a OneShotCallback to make sure loadSearchProviderLogo() to be called when profile is ready. That's enough for logo image initialization.

So I think calling destroy() is not needed when leaving start surface? It's doable (check |newState|), but I guess it's not necessary in this case?",,,e6be98ab_547c1906_before.java,e6be98ab_547c1906_after.java,True,chromium,86,76
632,a9c51c19_b638f155,928.0,Done,,,a9c51c19_b638f155_before.java,a9c51c19_b638f155_after.java,True,chromium,86,76
633,2e2b3e21_1328a6d4,1922.0,"Look at the usage of mLogoBridge.getCurrentLogo(), I think you should split 1) the creation of mLogoBridge, and 2) use mLogoBridge.getCurrentLog(mLogoObserver) to get the current logo. This is because 1) is more likely to initialize the bridge; 2) the goal of getCurrentLog() is to fetch a logo and return to the observer, and this method should only be called when we need a logo or the search provider changed.",1922.0,1922.0,2e2b3e21_1328a6d4_before.java,2e2b3e21_1328a6d4_after.java,True,chromium,86,76
634,d394b553_5255c501,1922.0,Done,1922.0,1922.0,d394b553_5255c501_before.java,d394b553_5255c501_after.java,True,chromium,86,76
635,0922661d_39d55771,1933.0,Nit: mToolbar.onLogoImageAvailable(logo == null ? null : logo.image);,1929.0,1933.0,0922661d_39d55771_before.java,0922661d_39d55771_after.java,True,chromium,86,76
636,1d33e675_9f8890b5,1933.0,Done,1929.0,1933.0,1d33e675_9f8890b5_before.java,1d33e675_9f8890b5_after.java,True,chromium,86,76
637,7d2d3504_35e3501c,1240.0,I think we can create this callback only when the start surface is enabled.,1235.0,1240.0,7d2d3504_35e3501c_before.java,7d2d3504_35e3501c_after.java,True,chromium,75,77
638,d1b3eff0_238a18dc,1240.0,Done,1235.0,1240.0,d1b3eff0_238a18dc_before.java,d1b3eff0_238a18dc_after.java,True,chromium,75,77
639,4e650a42_abc1a988,433.0,"Why do we need to cache this value in ToolbarManager?
If it is expensive to query (and cannot change based on the fact that we store it here) why not sort out caching it in RTCEUtils and have all calls to the method use that fact?",433.0,433.0,4e650a42_abc1a988_before.java,4e650a42_abc1a988_after.java,True,chromium,5,77
640,7b4907c9_3341fce6,433.0,It seems it is not necessary to cache it. Removed. Thanks!,433.0,433.0,7b4907c9_3341fce6_before.java,7b4907c9_3341fce6_after.java,True,chromium,5,77
641,52571641_e152584f,927.0,"I know these get compiled out, but at the same time they support my statement that adding the boolean variable might not be necessary.",927.0,927.0,52571641_e152584f_before.java,52571641_e152584f_after.java,True,chromium,5,77
642,d9224a81_297de135,927.0,Ack,927.0,927.0,d9224a81_297de135_before.java,d9224a81_297de135_after.java,True,chromium,5,77
643,67436abc_ff1bc3c9,1538.0,Can this be simply replaced with a check that mLogoDelegate != null?,1538.0,1538.0,67436abc_ff1bc3c9_before.java,67436abc_ff1bc3c9_after.java,True,chromium,5,77
644,b6a20d04_a35a6a13,1538.0,"We want to make sure that  |mLogoDelegate| has been created at least once for current search engine when homepage is showing.

If search engine is changed on incognito page (profile is offline), |mLogoDelegate| won't be created from onTemplateURLServiceChanged(). So we need to use this value |mHasLogoLoadedOnHomepage| to ensure to create |mLogoDelegate| when showing non-incognito homepage.

We don't want to keep |mLogoDelegate| when leaving start surface, so we need this value. I've updated the name to |mHasLogoLoadedForCurrentSearchEngine|. Is it better?",1538.0,1538.0,b6a20d04_a35a6a13_before.java,b6a20d04_a35a6a13_after.java,True,chromium,5,77
645,6391d31f_9ea7dc7d,1538.0,"I still don't think that variable is necessary.

What if you rewrite 1527-1530 to:

  if (ReturnToChromeExperimentsUtil.isStartSurfaceHomepageEnabled()) {
    mLogoDelegate.destroy();
    mLogoDelegate = null;
    loadSearchProviderLogo();
    // Alternative to the above line is call the whole maybe... flow:
    maybeLoadSearchProviderLogoOnHomepage();
  }
  
From what you are saying, we should either be creating the logo delegate when on the start surface homepage, or when the search engine changes, wouldn't the above help with that?",1538.0,1538.0,6391d31f_9ea7dc7d_before.java,6391d31f_9ea7dc7d_after.java,True,chromium,5,77
646,acb7ae5c_807464dd,1539.0,"You could consider adding the following above:

  if (mProfileSupplier.hasValue()) {
      loadSearchProviderLogo();
      return;
  }
  
That way you only rarely need to invoke OneShotCallback<> code.",1539.0,1539.0,acb7ae5c_807464dd_before.java,acb7ae5c_807464dd_after.java,True,chromium,5,77
647,2a595131_c6f28e38,1539.0,Done,1539.0,1539.0,2a595131_c6f28e38_before.java,2a595131_c6f28e38_after.java,True,chromium,5,77
648,407a37d8_559e16a4,1557.0,"mProfileSupplier.hasValue() does the trick.
This applies to other places in this patch, where such a change makes sense.",1557.0,1557.0,407a37d8_559e16a4_before.java,407a37d8_559e16a4_after.java,True,chromium,5,77
649,ddc4c19a_176985b6,1557.0,Done,1557.0,1557.0,ddc4c19a_176985b6_before.java,ddc4c19a_176985b6_after.java,True,chromium,5,77
650,9156d84f_b81ce20d,1559.0,"I am not sure I understand the semantics of this.
Based on the code below the logo might not appear, while this predicate states that the logo is loaded. Should this variable be renamed?",1559.0,1559.0,9156d84f_b81ce20d_before.java,9156d84f_b81ce20d_after.java,True,chromium,5,77
651,7b59a0c8_02fcf6de,1559.0,"Per my other comment WRT how to handle things when template URL service, please notice here that your are setting the boolean variable to true only here, coincidentally in the place where you create a new instance of LogoDelegate...",1559.0,1559.0,7b59a0c8_02fcf6de_before.java,7b59a0c8_02fcf6de_after.java,True,chromium,5,77
652,29a4b351_dd78a248,1559.0,Changed it to mHasLogoLoadedForCurrentSearchEngine. Not sure whether it's better,1559.0,1559.0,29a4b351_dd78a248_before.java,29a4b351_dd78a248_after.java,True,chromium,5,77
653,1220b73c_1b5ebc54,1570.0,"if profile isOffTheRecord() you might not have initialized mLogoDeletegate and this is NPE.

Either your condition above is wrong (not necessary) or you need to make changes here and add a relevant test, please.",1570.0,1570.0,1220b73c_1b5ebc54_before.java,1220b73c_1b5ebc54_after.java,True,chromium,5,77
654,5162f910_a98a3fd7,1570.0,"Sorry I didn't understand why NPE could happen - If profile  isOffTheRecord(), mLogoDeletegate is not created, then  mToolbar.onLogoImageAvailable(null); in line 1566 would be called.",1570.0,1570.0,5162f910_a98a3fd7_before.java,5162f910_a98a3fd7_after.java,True,chromium,5,77
655,a0bb85f0_ae83abc1,1570.0,Ack. I think I read || as && in 1565,1570.0,1570.0,a0bb85f0_ae83abc1_before.java,a0bb85f0_ae83abc1_after.java,True,chromium,5,77
656,d4f3c91b_7371edd8,1541.0,"Could you document this method is meant for a specific version configuration of the feature by adding an assert on top?

  assert ReturnToChromeExperimentsUtil.isStartSurfaceHomepageEnabled();
  
I'd also add this to loadsearchproviderlogo()",,,d4f3c91b_7371edd8_before.java,d4f3c91b_7371edd8_after.java,True,chromium,77,77
657,e48e890a_1572ca9a,1541.0,Done,,,e48e890a_1572ca9a_before.java,e48e890a_1572ca9a_after.java,True,chromium,77,77
658,e26cd10b_0e70a3d7,1572.0,Apologies for coming in late here... but why is this on ToolbarManager rather than in some Start specific code?,1538.0,1572.0,e26cd10b_0e70a3d7_before.java,e26cd10b_0e70a3d7_after.java,True,chromium,2,77
659,3e897b4e_e0c7517b,1584.0,"For the NTP, the logo bridge can return a number of different types of logos -- static w/ or w/out a click target as well as animated. There is also optional altText provided.

Checkout the fields on the Logo class for an idea of what might need to be handled for Start: https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/ntp/LogoBridge.java;l=21?q=Logo%20file:.java&ss=chromium",1582.0,1584.0,3e897b4e_e0c7517b_before.java,3e897b4e_e0c7517b_after.java,True,chromium,2,77
660,bb97bee5_4c951c6c,191.0,"Nit: rename to ""mDefaultSearchEngineHaveLogo"".",191.0,191.0,bb97bee5_4c951c6c_before.java,bb97bee5_4c951c6c_after.java,True,chromium,37,37
661,9f28a5a6_a6896a79,191.0,Done,191.0,191.0,9f28a5a6_a6896a79_before.java,9f28a5a6_a6896a79_after.java,True,chromium,37,37
662,174f7841_dc9476a3,165.0,"I don't think we need this observer anymore. This is because the same event has been observed by ToolbarManager#registerTemplateUrlObserver, and call to onLogoImageAvailable() via coordinator. I think you can move line 159 to 161 into onLogoImageAvailable().",156.0,165.0,174f7841_dc9476a3_before.java,174f7841_dc9476a3_after.java,True,chromium,35,36
663,ce6a43ad_8d2d9324,165.0,Done,156.0,165.0,ce6a43ad_8d2d9324_before.java,ce6a43ad_8d2d9324_after.java,True,chromium,35,36
664,4c7f702f_eccbba79,165.0,"Done.
I make LOGO_IMAGE property key to skip equality check so that onLogoImageAvailable() can be called every time templateUrlService is changed.",156.0,165.0,4c7f702f_eccbba79_before.java,4c7f702f_eccbba79_after.java,True,chromium,35,36
665,3349ec0f_0ccf2588,393.0,"It seems updateLogoVisibility() is only called in this class, and you alway pass in mDefaultSearchEngineHaveLogo as parameter. You can remove this parameter, and use mDefaultSearchEngineHaveLogo inside the method.",393.0,393.0,3349ec0f_0ccf2588_before.java,3349ec0f_0ccf2588_after.java,True,chromium,35,36
666,6c387c22_5a65a17e,393.0,Done,393.0,393.0,6c387c22_5a65a17e_before.java,6c387c22_5a65a17e_after.java,True,chromium,35,36
667,deef6e3b_79bba001,390.0,"Do we need this type of special casing?
Wouldn't we simply pass the logoImageDrawable that is google specific to 376?

I don't understand why we even need to check/know here whether Google is the DSE. At least for the purpose of logo handling.

Would any of the API calls to Template URL Service change their response based on google being DSE or not?",390.0,390.0,deef6e3b_79bba001_before.java,deef6e3b_79bba001_after.java,True,chromium,36,36
668,fdc4292e_7dbb071e,390.0,"When Google is DSE, null is passed in instead of google logo image. (NTP does similar check[1]). Also, we don't support doodle yet, when google is DSE, static google image is wanted.

[1] https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/ntp/LogoView.java;drc=ed29b11535052162b60b14c1eaf88553f42b8d5b;l=207",390.0,390.0,fdc4292e_7dbb071e_before.java,fdc4292e_7dbb071e_after.java,True,chromium,36,36
669,71fa1f36_818c2366,172.0,Nit: rename to logoImage?,172.0,172.0,71fa1f36_818c2366_before.java,71fa1f36_818c2366_after.java,True,chromium,44,44
670,30c3def6_993df675,172.0,Done,172.0,172.0,30c3def6_993df675_before.java,30c3def6_993df675_after.java,True,chromium,44,44
671,38609b7f_339d81b6,187.0,Maybe inline the logic to setLogoImage() and remove maybeShowDefaultLogo().,187.0,187.0,38609b7f_339d81b6_before.java,38609b7f_339d81b6_after.java,True,chromium,45,44
672,bc32f64f_7300b0f6,187.0,Done,187.0,187.0,bc32f64f_7300b0f6_before.java,bc32f64f_7300b0f6_after.java,True,chromium,45,44
673,be2180ed_fbb199ea,68.0,Nit: default search engine logo,68.0,68.0,be2180ed_fbb199ea_before.java,be2180ed_fbb199ea_after.java,True,chromium,45,46
674,52ad9909_ebaec481,68.0,Done,68.0,68.0,52ad9909_ebaec481_before.java,52ad9909_ebaec481_after.java,True,chromium,45,46
675,078f7ee0_dafeb636,179.0,"Will setLogoImage() called before native is initialized? If yes, maybe add an early exit and don't set the logo; if not, you can make this as an assert instead.",179.0,179.0,078f7ee0_dafeb636_before.java,078f7ee0_dafeb636_after.java,True,chromium,45,46
676,853523e6_3bf87500,179.0,Done,179.0,179.0,853523e6_3bf87500_before.java,853523e6_3bf87500_after.java,True,chromium,45,46
677,36c4d56c_dd3d64f5,181.0,Nit: use mLogo and rename getLogoView() to getLogoViewForTesting().,181.0,181.0,36c4d56c_dd3d64f5_before.java,36c4d56c_dd3d64f5_after.java,True,chromium,45,46
678,a48e57da_4fd79937,181.0,Nit: use mLogoDefaultDrawable directly.,181.0,181.0,a48e57da_4fd79937_before.java,a48e57da_4fd79937_after.java,True,chromium,45,46
679,6ddbc288_3d7e2b17,181.0,Done,181.0,181.0,6ddbc288_3d7e2b17_before.java,6ddbc288_3d7e2b17_after.java,True,chromium,45,46
680,37e9ceaa_fd5fa83e,181.0,Done,181.0,181.0,37e9ceaa_fd5fa83e_before.java,37e9ceaa_fd5fa83e_after.java,True,chromium,45,46
681,5e502a13_b76137e8,426.0,Nit: rename to getLogoViewForTesting().,426.0,426.0,5e502a13_b76137e8_before.java,5e502a13_b76137e8_after.java,True,chromium,45,46
682,c554c9b1_06ec9141,426.0,Done,426.0,426.0,c554c9b1_06ec9141_before.java,c554c9b1_06ec9141_after.java,True,chromium,45,46
683,377be851_e3641421,431.0,Nit: rename to getLogoDefaultDrawableForTesting().,431.0,431.0,377be851_e3641421_before.java,377be851_e3641421_after.java,True,chromium,45,46
684,2019a2a0_40cd19f0,431.0,Done,431.0,431.0,2019a2a0_40cd19f0_before.java,2019a2a0_40cd19f0_after.java,True,chromium,45,46
685,1d7d1736_b8fe694e,685.0,"This comment in 3 different places, I see 2 problems with that:
1. If we change implementation in ToolbarManager, it may go out of sync with reality.
2. It documents when the method is called instead of what it does. The former is a nice addition to the documentation, however (see 1.) I'd make sure that is expressed in generic terms: This method should be called, when there is a possibility that logo image became available or was changed.",680.0,685.0,1d7d1736_b8fe694e_before.java,1d7d1736_b8fe694e_after.java,True,chromium,57,57
686,5e4b6525_84e7bda6,685.0,Done,680.0,685.0,5e4b6525_84e7bda6_before.java,5e4b6525_84e7bda6_after.java,True,chromium,57,57
687,cd53d150_c89f0c9d,685.0,"Thanks! That makes more sense.
I wanted to highlight when TemplateUrlService is changed, this method should be called. Because pervious TemplateUrlService observer was removed in StartSurfaceToolbarMediator and now it depends on this method to observe the service change. But agree with you, commenting more generally makes more sense and is safer.",680.0,685.0,cd53d150_c89f0c9d_before.java,cd53d150_c89f0c9d_after.java,True,chromium,57,57
688,d26403ed_ed869499,157.0,"I don't think we can ignore the layout params being passed when GONE. I think we just need to suppress the requestLayout that happens.

I was thinking we could override requestLayout() and have a boolean to suppress the super call if we're in this state, but it looks like setLayoutParams triggers a layout on the parent too:
https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/view/View.java;l=18181

I wonder if we need something like:

private ViewGroup.LayoutParams mPendingLayoutParams;

public void setLayoutParams(params) {
    if (getVisibility() == View.GONE) {
        mPendingLayoutParams = params;
        return;
    }
    <...>
}

public void setVisibility(visibility) {
    super.setVisibility(visibility);
    if (visibility != View.GONE && mPendingLayoutParams != null) {
        setLayoutParams(mPendingLayoutParams);
        mPendingLayoutParams = null;
    }
}

-----

Granted, then should we change getLayoutParams() to return mPendingLayoutParams if set? It's slightly odd because the above proposal would break the contract where setLayoutParams(p), then p.equals(getLayoutParams()) == true.

I don't know if that ""actually"" matters though. And having this mismatch might be OK?",157.0,157.0,d26403ed_ed869499_before.java,d26403ed_ed869499_after.java,True,chromium,4,6
689,2123faeb_17acf5f8,157.0,"> I've gone ahead and made the change since it makes sense to me.
> 
> I suspect if we go to the trouble of storing the layout, we should return it as well when its requested. The only concern is that we eventually break something and someone doesn't understand why it says its equal but has no effect on the screen.
> 
> I.E. if someone depends on the tree being relayed out (because they set the layoutParams on a GONE view). We could add a log if we're concerned about that?

I can't imagine that being the case, but a log message couldn't hurt.

> 
> Do you have opinions of just landing this change? Or should we pipe a finch flag down into this layer? (and then how would you like it piped, because it would require updating the constructor and then all callsites (or is there an easy way to do that)?

I think we can land the change (maybe ping the internal chrome android dev list). To me, this is matching the expectations I have of Android, so it makes sense to land. If we break something and need to revert, so be it, but this seems sane to me.",157.0,157.0,2123faeb_17acf5f8_before.java,2123faeb_17acf5f8_after.java,True,chromium,4,6
690,59f63ebe_f9e00fb2,157.0,"Sounds good, it was the best I could imagine, but it seems like a strange thing but my favorite programming lay is https://www.hyrumslaw.com/ which this squarely falls into 😄

Added a log for now, the only downside is log spam, so I made it only log on the first delayed call, and referenced the bug in case someone wants to look into it.

Not sure which mailing list you have in mind, I think I have an idea but honestly not sure, let me shot you a quick message over chat to confirm.",157.0,157.0,59f63ebe_f9e00fb2_before.java,59f63ebe_f9e00fb2_after.java,True,chromium,4,6
691,1c5f6e73_8b63d09b,157.0,"I've gone ahead and made the change since it makes sense to me.

I suspect if we go to the trouble of storing the layout, we should return it as well when its requested. The only concern is that we eventually break something and someone doesn't understand why it says its equal but has no effect on the screen.

I.E. if someone depends on the tree being relayed out (because they set the layoutParams on a GONE view). We could add a log if we're concerned about that?

Do you have opinions of just landing this change? Or should we pipe a finch flag down into this layer? (and then how would you like it piped, because it would require updating the constructor and then all callsites (or is there an easy way to do that)?",157.0,157.0,1c5f6e73_8b63d09b_before.java,1c5f6e73_8b63d09b_after.java,True,chromium,4,6
692,5b57d68e_25ea2760,160.0,"Maybe for an extra bit of caution (in case Android ever starts doing equality internally using getLayoutParmas()), we should do this:

ViewGroup.LayoutParams pendingParams = mPendingLayoutParams;
mPendingLayoutParams = null;
setLayoutParams(pendingParams);",,,5b57d68e_25ea2760_before.java,5b57d68e_25ea2760_after.java,True,chromium,6,6
693,df25f45a_1bd1837d,160.0,"I don't know if I follow what this is protecting against.

Since java does reference counting, if they internally keep it for equality won't it will survive anyway? We don't need to make a spare reference ourselves right?

I.E.
if we say mPendingLayoutParams = @1 (the object id)

Then
```
if (mPendingLayoutParams != null) { // There exists 1 reference to @1
  pendingParams = @1  // There exists 2 references to @1
  mPendingLayoutParams = null; // There exists 1 reference to @1
  setLayoutParams(pendingParams); // count for @1 might increase.
  // pendingParams is destroyed // the reference count decreases by 1.
}
```

This is the same as what we currently have no?

```
if (mPendingLayoutParams != null) { // There exists 1 reference to @1
  setLayoutParams(mPendingLayoutParams); // count for @1 might increase
  mPendingLayoutParams = null; // reference count for @1 decreased by 1
}
```",,,df25f45a_1bd1837d_before.java,df25f45a_1bd1837d_after.java,True,chromium,6,6
694,a49f0f71_c63292cd,160.0,"My thinking here was if setLayoutParams in the super class looked like this:

void setLayoutParamn(params) {
    if (params.equals(getLayoutParams()) return;
    <... actual heavy lifting ...>
}

As the code is written now, you're passing in the same layout params that getLayoutParams() would return, so an equality check there would pass.

My proposal was to ensure that we cleared the cached value from getLayoutParams() before calling setLayoutParams() so the hypothetical above check would use super.getLayoutParams() for equality instead of mPendingLayoutParams.",,,a49f0f71_c63292cd_before.java,a49f0f71_c63292cd_after.java,True,chromium,6,6
695,bb79fdca_cbdebb60,178.0,"nit, but no need for ""this.""",178.0,178.0,bb79fdca_cbdebb60_before.java,bb79fdca_cbdebb60_after.java,True,chromium,6,6
696,c0a8de3f_008a3cee,178.0,Done,178.0,178.0,c0a8de3f_008a3cee_before.java,c0a8de3f_008a3cee_after.java,True,chromium,6,6
697,3d8b2a70_9f34bb7c,19.0,nit: does it make sense to rename this to something like executeDoneAction() or something referring to Done? executeAction may be a little vague,19.0,19.0,3d8b2a70_9f34bb7c_before.java,3d8b2a70_9f34bb7c_after.java,True,chromium,0,0
698,368c4d4d_9b6f7e01,19.0,"Renamed both, I think it makes more sense this way",19.0,19.0,368c4d4d_9b6f7e01_before.java,368c4d4d_9b6f7e01_after.java,True,chromium,0,0
699,2e3f8d48_a0dbf93a,83.0,"Adding getSyncErrorFromPromptType seems unfortunate - we're not sure if there's always going to be 1:1 mapping between SyncErrorPromptType and SyncError

Does it make sense to rewrite this method in a way that would avoid adding getSyncErrorFromPromptType? Something like this:

 switch (type) {
     case SyncErrorPromptType.AUTH_ERROR:
     case SyncErrorPromptType.SYNC_SETUP_INCOMPLETE:
     case SyncErrorPromptType.CLIENT_OUT_OF_DATE:
     case SyncErrorPromptType.PASSPHRASE_REQUIRED:
     case SyncErrorPromptType.TRUSTED_VAULT_KEY_REQUIRED_FOR_EVERYTHING:
         return context.getString(R.string.sync_error_card_title);
     case SyncErrorPromptType.TRUSTED_VAULT_KEY_REQUIRED_FOR_PASSWORDS:
         return context.getString(R.string.password_sync_error_summary);
     case SyncErrorPromptType.TRUSTED_VAULT_RECOVERABILITY_DEGRADED_FOR_EVERYTHING:
     case SyncErrorPromptType.TRUSTED_VAULT_RECOVERABILITY_DEGRADED_FOR_PASSWORDS:
         return context.getString(R.string.sync_needs_verification_title);
     case SyncErrorPromptType.NOT_SHOWN:
         assert false;
         return null;
     default:
         assert false;
         return null;
 }
 
In the end, this is more readable, requires fewer LOC and gives us more flexibility over these strings.",79.0,83.0,2e3f8d48_a0dbf93a_before.java,2e3f8d48_a0dbf93a_after.java,True,chromium,12,11
700,c37d9fd4_140a5acb,83.0,"Hm, I think we do want to enforce the string is the same as the error card, so that there's some parallel between the 2 UIs. I did basically inline getSyncErrorFromPromptType() in its 2 callers now, not sure if it's better but at least avoids the weird method, WDYT?",79.0,83.0,c37d9fd4_140a5acb_before.java,c37d9fd4_140a5acb_after.java,True,chromium,12,11
701,d4951ae9_b883ac84,83.0,"If we want these titles to be controlled in a single place, then I'm not sure I understand the interest in adding SyncErrorPromptType - as the added complexity with back-and-forth conversions seems to outweigh the benefits.",79.0,83.0,d4951ae9_b883ac84_before.java,d4951ae9_b883ac84_after.java,True,chromium,12,11
702,83c73944_8a0c0268,104.0,"This seems to be a bug - you transform type into SyncError, but then switch over SyncErrorPromptType values.

I believe this method should use the same pattern I proposed above (avoid converting back to SyncError and switch over SyncErrorPromptType directly).",87.0,104.0,83c73944_8a0c0268_before.java,83c73944_8a0c0268_after.java,True,chromium,12,11
703,0e04b220_8ba5aacd,104.0,"It was a bug, removing the getSyncErrorFromPromptType() does the trick.",87.0,104.0,0e04b220_8ba5aacd_before.java,0e04b220_8ba5aacd_after.java,True,chromium,12,11
704,05da92c0_da3e929d,116.0,"Nit: with this name, it's not clear that the method will get the current sync error from SyncService and compute the corresponding prompt type. Can you please rename it?",116.0,116.0,05da92c0_da3e929d_before.java,05da92c0_da3e929d_after.java,True,chromium,12,11
705,f72327db_1ecbe656,116.0,"In doubt, reverted to the old name (I just wanted to avoid having SyncError both on the class name and method name)",116.0,116.0,f72327db_1ecbe656_before.java,f72327db_1ecbe656_after.java,True,chromium,12,11
706,b9a7f006_29ea53e5,68.0,"It's been a while since I looked at it. IIRC, we only need this method (+ the ""getNetworks()"" it depends on), as well as the BASIC_CARD string.

Since this is a copy we'll have to maintain, I'd remove the others we don't need?

For a follow up: Since this is now our code anyhow, we might also want to refactor this such that it provides us the filtered integer list we need. This should not be part of this ""split"" here though.",68.0,68.0,b9a7f006_29ea53e5_before.java,b9a7f006_29ea53e5_after.java,True,chromium,6,3
707,fd0baa50_e318d9cf,68.0,"It seems you moved it to /settings/, I'd have to check what they're using. If it were in /autofill_assistant/ I could do it (since it's our code base and we know what we need).

Either way, I can sync with the Autofill team and check.",68.0,68.0,fd0baa50_e318d9cf_before.java,fd0baa50_e318d9cf_after.java,True,chromium,6,3
708,047fd5a4_82fabb34,68.0,"Removed.

Are you able to do the refactoring?",68.0,68.0,047fd5a4_82fabb34_before.java,047fd5a4_82fabb34_after.java,True,chromium,6,3
709,c98e2bc0_661060a0,35.0,nit: can these be a single line?,34.0,35.0,c98e2bc0_661060a0_before.java,c98e2bc0_661060a0_after.java,True,chromium,3,3
710,73ee2d20_1758043f,35.0,Done,34.0,35.0,73ee2d20_1758043f_before.java,73ee2d20_1758043f_after.java,True,chromium,3,3
711,967a425b_7064b8c6,129.0,I suggest remove the prefix SERIALIZE_DESERIALIZE as it makes it hard to read.,,,967a425b_7064b8c6_before.java,967a425b_7064b8c6_after.java,True,chromium,8,8
712,d2af5a11_53a936c8,129.0,Done,,,d2af5a11_53a936c8_before.java,d2af5a11_53a936c8_after.java,True,chromium,8,8
713,3e77d115_80bb8fad,136.0,Could you please add in some assertions that the hours and minutes are in the range you expect?,,,3e77d115_80bb8fad_before.java,3e77d115_80bb8fad_after.java,True,chromium,15,20
714,844fbebd_262c0c63,136.0,Done,,,844fbebd_262c0c63_before.java,844fbebd_262c0c63_after.java,True,chromium,15,20
715,291f53df_04f81c9f,169.0,"This could be sb.append(mStoreHours.mIsOpen ? ""Open, "" : ""Closed, "");

I would also make ""Open, ""  and ""Closed, "" constants.",,,291f53df_04f81c9f_before.java,291f53df_04f81c9f_after.java,True,chromium,15,20
716,8c0ceeb2_b4707a6f,169.0,Done,,,8c0ceeb2_b4707a6f_before.java,8c0ceeb2_b4707a6f_after.java,True,chromium,15,20
717,4c91a0ac_3a83931c,173.0,Either leave a comment or use localizable strings (through the grd files),168.0,173.0,4c91a0ac_3a83931c_before.java,4c91a0ac_3a83931c_after.java,True,chromium,15,20
718,34fe765e_d4650666,173.0,Done,168.0,173.0,34fe765e_d4650666_before.java,34fe765e_d4650666_after.java,True,chromium,15,20
719,9762a982_341d2f1d,183.0,add a comment - if minutes are non-zero,,,9762a982_341d2f1d_before.java,9762a982_341d2f1d_after.java,True,chromium,15,20
720,c3dabe05_c152bb81,183.0,Done,,,c3dabe05_c152bb81_before.java,c3dabe05_c152bb81_after.java,True,chromium,15,20
721,82fa5a7e_6b19a6a1,325.0,can you make Jan 1 1970 a constant and explain the reason for this choice?,,,82fa5a7e_6b19a6a1_before.java,82fa5a7e_6b19a6a1_after.java,True,chromium,15,20
722,716d3bca_1d200f9d,325.0,Done,,,716d3bca_1d200f9d_before.java,716d3bca_1d200f9d_after.java,True,chromium,15,20
723,439ce87b_f579e99b,39.0,Can you access the context using mTab.getContext()? I don't think you need to store the Context.,,,439ce87b_f579e99b_before.java,439ce87b_f579e99b_after.java,True,chromium,20,20
724,6db27e5e_1db083ce,39.0,Done,,,6db27e5e_1db083ce_before.java,6db27e5e_1db083ce_after.java,True,chromium,20,20
725,af35c0c7_ee9f525c,162.0,nit: I would call this verifyIfValidRange,,,af35c0c7_ee9f525c_before.java,af35c0c7_ee9f525c_after.java,True,chromium,20,20
726,6dad49eb_4bf0a8bf,162.0,Done,,,6dad49eb_4bf0a8bf_before.java,6dad49eb_4bf0a8bf_after.java,True,chromium,20,20
727,7c41a3d8_b7458718,1.0,nit: 2021,1.0,1.0,7c41a3d8_b7458718_before.java,7c41a3d8_b7458718_after.java,True,chromium,1,1
728,540a69c4_5f1c479f,19.0,nit: Remove empty line.,,,540a69c4_5f1c479f_before.java,540a69c4_5f1c479f_after.java,True,chromium,1,1
729,f97546dc_7b9da7be,174.0,"could be

boolean isWholeHour = standardTimeMinutes % STANDARD_MINUTES_ONE_HOUR == 0;",,,f97546dc_7b9da7be_before.java,f97546dc_7b9da7be_after.java,True,chromium,18,18
730,cc2bcd41_6a4c5180,174.0,Done,,,cc2bcd41_6a4c5180_before.java,cc2bcd41_6a4c5180_after.java,True,chromium,18,18
731,fb38e9ca_5217a19a,214.0,retusn sb.append(isPM ? PM_STRING : AM_STRING).toString();,,,fb38e9ca_5217a19a_before.java,fb38e9ca_5217a19a_after.java,True,chromium,18,18
732,64ab63b0_d8b3d1b4,214.0,Done,,,64ab63b0_d8b3d1b4_before.java,64ab63b0_d8b3d1b4_after.java,True,chromium,18,18
733,ba9f3a87_6e83af3a,585.0,"Nit: Can we also restructure this to match the code above? eg:

        // TODO(dtrainor): Should we try to rebuild the ContentView if it's frozen?
        if (OfflinePageUtils.isOfflinePage(this)) {
            // If current page is an offline page, reload it with custom behavior defined in extra
            // header respected.
            OfflinePageUtils.reload(getWebContents(),
                    /*loadUrlDelegate=*/new OfflinePageUtils.TabOfflinePageLoadUrlDelegate(this));
            return;
        } 
        if (getWebContents() == null) return;
        switchUserAgentIfNeeded();
        getWebContents().getNavigationController().reload(true);",574.0,585.0,ba9f3a87_6e83af3a_before.java,ba9f3a87_6e83af3a_after.java,True,chromium,116,116
734,b5f163e1_09774641,585.0,Done,574.0,585.0,b5f163e1_09774641_before.java,b5f163e1_09774641_after.java,True,chromium,116,116
735,146d6882_dcaab314,75.0,nit: failure messages would help w/ future debugging,75.0,75.0,146d6882_dcaab314_before.java,146d6882_dcaab314_after.java,True,chromium,7,6
736,9ec558f7_f19a7175,75.0,Done,75.0,75.0,9ec558f7_f19a7175_before.java,9ec558f7_f19a7175_after.java,True,chromium,7,6
737,4d564d13_7846902e,90.0,"Is it possible to run any of these tests on earlier OS versions, e.g. by stubbing prod calls in some way?

The Android 12 bot is still FYI / not sheriffed, so if these tests started failing in the future we likely wouldn't know (and also, changes that might break this could make it through the CQ)",90.0,90.0,4d564d13_7846902e_before.java,4d564d13_7846902e_after.java,True,chromium,7,6
738,cd3f5791_1d7b187d,90.0,"We don't need a 1:1 mapping for QA team's test scenarios per se.

It'd OK to have multiple tests covering different steps in the test and also OK if they're running on different OS versions. For example, we might keep 1 manual test for sanity checking whatever is S-specific until we have a sheriffed bot, but everything else I think could be validated on any OS version.

Might be great to reach out to yzjr@, though as asking if he has any thoughts on how to properly account for this.",90.0,90.0,cd3f5791_1d7b187d_before.java,cd3f5791_1d7b187d_after.java,True,chromium,7,6
739,3d440bd6_8498136b,90.0,"Yes these tests are not quite ready for bots (or vice versa).

Main purpose of these tests are to replace what QA team would do manually. You'll notice that they are almost 1:1 mapped to the test scenarios in the test plan. In that sense it is required they run on Android S to be alternatives to the manual testing. Maybe these tests should wait till S bot is ready?",90.0,90.0,3d440bd6_8498136b_before.java,3d440bd6_8498136b_after.java,True,chromium,7,6
740,08f8b47c_711f2815,107.0,"Remind me, we have a unit test for this already, right?",106.0,107.0,08f8b47c_711f2815_before.java,08f8b47c_711f2815_after.java,True,chromium,7,6
741,68d54e57_9b68ca00,107.0,Yes - this is just to make sure to cover the prerequisite step in the test plan that puts Chrome in multiple instance state. Has the same rationale as above,106.0,107.0,68d54e57_9b68ca00_before.java,68d54e57_9b68ca00_after.java,True,chromium,7,6
742,3abe2116_945ba707,107.0,Ack,106.0,107.0,3abe2116_945ba707_before.java,3abe2116_945ba707_after.java,True,chromium,7,6
743,310e2baf_42eb1fec,121.0,nit: full qualification isn't needed since we import org.chromium.chrome.R; above?,121.0,121.0,310e2baf_42eb1fec_before.java,310e2baf_42eb1fec_after.java,True,chromium,7,6
744,01372963_b649fd8f,121.0,Yes Removed.,121.0,121.0,01372963_b649fd8f_before.java,01372963_b649fd8f_after.java,True,chromium,7,6
745,34a2b0b8_6ab89cb4,124.0,The 2nd instance we created is going to be id = 1?,123.0,124.0,34a2b0b8_6ab89cb4_before.java,34a2b0b8_6ab89cb4_after.java,True,chromium,7,6
746,5bde82cb_456a4d13,124.0,Yes. Added a comment to make it clearer.,123.0,124.0,5bde82cb_456a4d13_before.java,5bde82cb_456a4d13_after.java,True,chromium,7,6
747,1db2faea_494a6b29,143.0,Do we want to do any validation that position 1 is the 2nd window (here and for test above)? That way if that assumption breaks we'd have some visibility into why the test is failing,143.0,143.0,1db2faea_494a6b29_before.java,1db2faea_494a6b29_after.java,True,chromium,7,6
748,2ee49caa_b2f82832,143.0,Done,143.0,143.0,2ee49caa_b2f82832_before.java,2ee49caa_b2f82832_after.java,True,chromium,7,6
749,3cd76714_601d7b2f,153.0,"In #create2ndInstance we write a shared pref that indicates the 2nd instance has 2 tabs (prefs.writeInt(MultiInstanceManagerApi31.tabCountKey(1), 2);), but since there's no actual tab state on disk when we move the tab from instance 0 to instance 1, the total tab count is just 1. Am I reading this correctly?",153.0,153.0,3cd76714_601d7b2f_before.java,3cd76714_601d7b2f_after.java,True,chromium,7,6
750,36a0b243_740c58d8,153.0,Exactly. Sorry for not being clearer on that. Added a comment.,153.0,153.0,36a0b243_740c58d8_before.java,36a0b243_740c58d8_after.java,True,chromium,7,6
751,4280c44d_0c70a8cf,314.0,Lets leave incognito out for now,314.0,314.0,4280c44d_0c70a8cf_before.java,4280c44d_0c70a8cf_after.java,True,chromium,71,74
752,a8631c46_ae3db10d,314.0,Done,314.0,314.0,a8631c46_ae3db10d_before.java,a8631c46_ae3db10d_after.java,True,chromium,71,74
753,43f9aae8_fe4532fe,319.0,See comment on other change but lets update this,319.0,319.0,43f9aae8_fe4532fe_before.java,43f9aae8_fe4532fe_after.java,True,chromium,71,74
754,c1d7ddef_db66768d,319.0,Done,319.0,319.0,c1d7ddef_db66768d_before.java,c1d7ddef_db66768d_after.java,True,chromium,71,74
755,e0e8383f_478444c1,1595.0,"I might have missed this in the initial CL, but can we make this more generic and just call it CALLER_PACKAGE and remove the lens qualifiers?

I think this code should be as generic as possible to more easily support other apps if they are allowlisted in the future",1595.0,1595.0,e0e8383f_478444c1_before.java,e0e8383f_478444c1_after.java,True,chromium,71,74
756,152b136b_2e968a2d,1595.0,"The calling application is already denoted by the EXTRA_APPLICATION_ID passed through the Intent. This LENS_CALLER_PACKAGE is for the application that invoked Lens, such as Chrome or Photos.",1595.0,1595.0,152b136b_2e968a2d_before.java,152b136b_2e968a2d_after.java,True,chromium,71,74
757,98d78dab_9ac2791c,1612.0,"We could still have lens specific UMA logs, but how about we have two sets of each uma log, one for 'unspecified' intents from AGSA and a second for 'lens' intents from AGSA. That way all AGSA intents back are supported here but we retain Lens-specific breakouts",1612.0,1612.0,98d78dab_9ac2791c_before.java,98d78dab_9ac2791c_after.java,True,chromium,71,74
758,0d0c13ed_874fd5d3,1612.0,"AGSA intents into Chrome (including Lens) are already recorded by this histogram as long as EXTRA_APPLICATION_ID is set: https://source.chromium.org/chromium/chromium/src/+/master:chrome/android/java/src/org/chromium/chrome/browser/IntentHandler.java

Do you think it is worth adding another histogram to record these unspecified AGSA intents? The current implementation would log them as an unknown LensSurface.",1612.0,1612.0,0d0c13ed_874fd5d3_before.java,0d0c13ed_874fd5d3_after.java,True,chromium,71,74
759,dc1a61e5_0bc4cf6d,1637.0,Is this right? Wouldn't any app that had a journey starting in chrome and coming back to chrome satisfy this condition of having a chrome package name?,1636.0,1637.0,dc1a61e5_0bc4cf6d_before.java,dc1a61e5_0bc4cf6d_after.java,True,chromium,71,74
760,7bd70689_e1aee0b9,1637.0,The package name is specific to the Lens invoking package. This intent extra is specific to Lens so the only way for it to be set is if set explicitly. The caller package for the chrome intent is keyed by EXTRA_APPLICATION_ID.,1636.0,1637.0,7bd70689_e1aee0b9_before.java,7bd70689_e1aee0b9_after.java,True,chromium,71,74
761,56a5707a_b8703ef6,1036.0,Is the goal to make this the default behavior in the future? Maybe we should name this something like getSearchByImageMenuItemsWithInternalEligibilityCheck.,1036.0,1036.0,56a5707a_b8703ef6_before.java,56a5707a_b8703ef6_after.java,True,chromium,42,42
762,35993405_cc3fbef8,1036.0,Done,1036.0,1036.0,35993405_cc3fbef8_before.java,35993405_cc3fbef8_after.java,True,chromium,42,42
763,642c925b_ad91f8f9,1045.0,Do we need to check for the default search engine as well?,,,642c925b_ad91f8f9_before.java,642c925b_ad91f8f9_after.java,True,chromium,42,42
764,64d64512_a9341b8b,1045.0,"We will check the default search engine in the internal API for context menu search (If it's not Google, return false and show search by image) so we dont need to duplicate the check here.",,,64d64512_a9341b8b_before.java,64d64512_a9341b8b_after.java,True,chromium,42,42
765,4d8ca9f6_2926b4c6,1045.0,Ack,,,4d8ca9f6_2926b4c6_before.java,4d8ca9f6_2926b4c6_after.java,True,chromium,42,42
766,26e28d10_4546fc72,536.0,"Do we really need a feature for this?  If we test all cases manually and carefully I don't think we should need to roll this out via a finch launch.

Then we don't have the need to maintain two functions temporarily",536.0,536.0,26e28d10_4546fc72_before.java,26e28d10_4546fc72_after.java,True,chromium,43,42
767,5c40c61a_2c045154,536.0,Done,536.0,536.0,5c40c61a_2c045154_before.java,5c40c61a_2c045154_after.java,True,chromium,43,42
768,dbbc327b_dd44f42f,536.0,"It's safer to use a feature flag here since we are modifying a launched feature. Also, we this feature flag we can use a new param to control and verify the newly added device check (min os and has camera) for this entry point. b/180523921",536.0,536.0,dbbc327b_dd44f42f_before.java,dbbc327b_dd44f42f_after.java,True,chromium,43,42
769,0b17a80c_99ec13aa,536.0,As discussed offline lets update the other code to not update the added device check which should remove the need for this feature,536.0,536.0,0b17a80c_99ec13aa_before.java,0b17a80c_99ec13aa_after.java,True,chromium,43,42
770,21a94bc1_bde7eb0d,1039.0,Shouldn't this also be updated to be internal while we are at it?,1039.0,1039.0,21a94bc1_bde7eb0d_before.java,21a94bc1_bde7eb0d_after.java,True,chromium,43,42
771,0d76419c_5f6efb40,1039.0,"Yes, it will eventually be internal. But I think it's safer to migrate these two separately.",1039.0,1039.0,0d76419c_5f6efb40_before.java,0d76419c_5f6efb40_after.java,True,chromium,43,42
772,4d9284c5_b25cb3a8,1025.0,"One last nit: I think we can omit 'withInternalEligibilityCheck' if we are not duplicating the function anymore. Can we just keep the name the same as before?

'getSearchByImageMenuItemsToShowAndRecordMetrics'",1025.0,1025.0,4d9284c5_b25cb3a8_before.java,4d9284c5_b25cb3a8_after.java,True,chromium,17,42
773,ae0b1b97_10d8d421,101.0,nit: Could just pass Context context here,101.0,101.0,ae0b1b97_10d8d421_before.java,ae0b1b97_10d8d421_after.java,True,chromium,20,21
774,9cef839f_7e433b33,101.0,"I'm not up-to-date on the DI we use in CCT code but from that description, agreed, APP_CONTEXT doesn't sound like what we want.

Should be possible to provide a Context from whatever is providing dependencies but not blocking.",101.0,101.0,9cef839f_7e433b33_before.java,9cef839f_7e433b33_after.java,True,chromium,20,21
775,1b015190_427b614e,101.0,Neat. There is an ACTIVITY_CONTEXT I can use instead. PTAL,101.0,101.0,1b015190_427b614e_before.java,1b015190_427b614e_after.java,True,chromium,20,21
776,631d46e2_7718ceed,101.0,"That's what I tried at first, but the dependency injection mechanism doesn't seem to know about Contexts (but Activities work out of the box). Someone mentioned I should annotate it with APP_CONTEXT to get it to work, but that didn't feel right because we explicitly |don't| want the app context here. WDYT?",101.0,101.0,631d46e2_7718ceed_before.java,631d46e2_7718ceed_after.java,True,chromium,20,21
777,005b72e6_4501576a,2205.0,"The screen width / height might be different than the smallestScreenWidthDp since we override smallestScreenWidthDp to be the display size rather than the current window size while screenWidthDp and screenHeightDp always reflect the current window size.

I think this CL is directionally correct -- it seems we should be checking whether we need to restart both when the configuration changes and when the display changes.

When we get into this #performOnConfigurationChanged(), has the display been updated yet? If so could we rely on #didChangeTabletMode() (like we did prior to https://chromium-review.googlesource.com/c/chromium/src/+/2728243)?",2205.0,2205.0,005b72e6_4501576a_before.java,005b72e6_4501576a_after.java,True,chromium,161,158
778,fd15266e_ff7f9b06,43.0,Where is this used in UI? Is it also shown at the start of a row or shown elsewhere?,43.0,43.0,fd15266e_ff7f9b06_before.java,fd15266e_ff7f9b06_after.java,True,chromium,0,0
779,c5c946c1_1362b52e,43.0,"I was struggling with that, thanks for the tip Shakti! TinyCircularProgress (and the cancel_button in download_manager_in_progress_item) are both for the pause and cancel icons, respectively, for in-progress images (original: https://screenshot.googleplex.com/4TjcuQGZVCEkPeu.png, changed: https://screenshot.googleplex.com/A9nn727UVR6yx3k.png). As a result, I've reverted those changes.",43.0,43.0,c5c946c1_1362b52e_before.java,c5c946c1_1362b52e_after.java,True,chromium,0,0
780,3ba842f6_8d4201d7,43.0,"Can you make a screenshot for this? Easiest way would be to hack and set the OfflineItem#state to IN_PROGRESS here, and show an image.
https://source.chromium.org/chromium/chromium/src/+/main:chrome/android/java/src/org/chromium/chrome/browser/download/DownloadItem.java;drc=e6039c6dad7d380f0d7c0866cb29f0bc4a589da0;l=233",43.0,43.0,3ba842f6_8d4201d7_before.java,3ba842f6_8d4201d7_after.java,True,chromium,0,0
781,5794d2d4_61442c64,43.0,"I believe it's used for in-progress image downloads, but I'll double-check this",43.0,43.0,5794d2d4_61442c64_before.java,5794d2d4_61442c64_after.java,True,chromium,0,0
782,50231629_20e0ea8e,109.0,JS test executed on tab here,,,50231629_20e0ea8e_before.java,50231629_20e0ea8e_after.java,True,chromium,0,1
